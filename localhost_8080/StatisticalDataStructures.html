<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>

<!-- Mirrored from localhost:8080/StatisticalDataStructures by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 29 Oct 2015 20:32:28 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="edit_on_doubleclick" content="/">
<meta name="robots" content="index,nofollow">

<title>StatisticalDataStructures - SciPy</title>
<script type="text/javascript" src="moin_static197/common/js/common.js"></script>

<script type="text/javascript">
<!--
var search_hint = "Search";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="moin_static197/modern/css/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="moin_static197/modern/css/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="moin_static197/modern/css/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="moin_static197/modern/css/projection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="/moin_static197/modern/css/msie.css">
<![endif]-->


<link rel="alternate" title="SciPy: StatisticalDataStructures" href="../external.html?link=http://localhost:8080/StatisticalDataStructures?diffs=1&amp;show_att=1&amp;action=rss_rc&amp;unique=0&amp;page=StatisticalDataStructures&amp;ddiffs=1" type="application/rss+xml">


<link rel="Start" href="AllPages.html">
<link rel="Alternate" title="Wiki Markup" href="../external.html?link=http://localhost:8080/StatisticalDataStructures?action=raw">
<link rel="Alternate" media="print" title="Print View" href="../external.html?link=http://localhost:8080/StatisticalDataStructures?action=print">
<link rel="Search" href="FindPage.html">
<link rel="Index" href="TitleIndex.html">
<link rel="Glossary" href="WordIndex.html">
<link rel="Help" href="HelpOnFormatting.html">
</head>

<body  lang="en" dir="ltr">

<div id="header">


<form id="searchform" method="get" action="../external.html?link=http://localhost:8080/StatisticalDataStructures">
<div>
<input type="hidden" name="action" value="fullsearch">
<input type="hidden" name="context" value="180">
<label for="searchinput">Search:</label>
<input id="searchinput" type="text" name="value" value="" size="20"
    onfocus="searchFocus(this)" onblur="searchBlur(this)"
    onkeyup="searchChange(this)" onchange="searchChange(this)" alt="Search">
<input id="titlesearch" name="titlesearch" type="submit"
    value="Titles" alt="Search Titles">
<input id="fullsearch" name="fullsearch" type="submit"
    value="Text" alt="Search Full Text">
</div>
</form>
<script type="text/javascript">
<!--// Initialize search form
var f = document.getElementById('searchform');
f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
searchChange(e);
searchBlur(e);
//-->
</script>

<ul id="username"><li><a href="StatisticalDataStructures456e.html?action=login" id="login" rel="nofollow">Login</a></li></ul>
<div id="locationline">
<div id="interwiki"><span><a href="AllPages.html" rel="nofollow">SciPy</a></span></div>

<ul id="pagelocation">
<li><a class="backlink" href="AllPages45f2.html?action=fullsearch&amp;context=180&amp;value=linkto%3A%22StatisticalDataStructures%22" rel="nofollow" title="Click to do a full-text search for this title">StatisticalDataStructures</a></li>
</ul>

</div>


<ul id="navibar">
<li class="wikilink"><a href="RecentChanges.html">RecentChanges</a></li><li class="wikilink"><a class="nonexistent" href="FindPage.html">FindPage</a></li><li class="wikilink"><a class="nonexistent" href="HelpContents.html">HelpContents</a></li><li class="current"><a href="StatisticalDataStructures.html">StatisticalDataStructures</a></li>
</ul>

<div id="pageline"><hr style="display:none;"></div>

<ul class="editbar"><li class="toggleCommentsButton" style="display:none;"><a href="#" class="nbcomment" onClick="toggleComments();return false;">Comments</a></li><li><a class="nbattachments" href="StatisticalDataStructures37dc.html?action=AttachFile" rel="nofollow">Attachments</a></li><li>
<form class="actionsmenu" method="GET" action="../external.html?link=http://localhost:8080/StatisticalDataStructures">
<div>
    <label>More Actions:</label>
    <select name="action"
        onchange="if ((this.selectedIndex != 0) &&
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="RenamePage" disabled class="disabled">Rename Page</option>
<option value="DeletePage" disabled class="disabled">Delete Page</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Subscribe User</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Remove Spam</option>
<option value="show" disabled class="disabled">Revert to this revision</option>
    </select>
    <input type="submit" value="Do">
    
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('More Actions:');
//-->
</script>
</form>
</li></ul>

</div>

<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><p class="line867"><span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span><span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span><span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span><span class="anchor" id="line-16"></span><p>We'd like to have a central place to collect knowledge and opinions about data structures for statistics, finance, econometrics, and other related application domains. Since a number of projects having to do with this problem domain have appeared in recent times, having constructive discussions about the various design choices made would be beneficial to all parties.</p>
<div class="section" id="packages-of-interest">
<h3>Packages of interest</h3>
<blockquote>
<ul class="simple">
<li><a class="http reference external" href="../external.html?link=http://docs.scipy.org/">NumPy structured (record) arrays</a></li><li><a class="http reference external" href="../external.html?link=http://larry.sourceforge.net/">la (larry)</a></li><li><a class="http reference external" href="../external.html?link=http://www.parsemydata.com/tabular/">tabular</a></li><li><a class="http reference external" href="../external.html?link=http://pytseries.sourceforge.net/">scikits.timeseries</a></li><li><a class="http reference external" href="../external.html?link=http://statsmodels.sourceforge.net/">scikits.statsmodels</a></li><li><a class="http reference external" href="../external.html?link=http://pandas.googlecode.com/">pandas</a> (<a class="http reference external" href="../external.html?link=http://python.mirocommunity.org/video/1531/pycon-2010-python-in-quantitat">Talk on pandas from PyCon 2010</a>)</li><li><a class="http reference external" href="../external.html?link=http://biopython.org/">Biopython</a></li><li><a class="http reference external" href="../external.html?link=http://csc.media.mit.edu/docs/divisi2/">divisi</a></li></ul>
</blockquote>
</div>
<span class="anchor" id="line-17"></span><p class="line867">
<h2 id="Comparison_of_packages">Comparison of packages</h2>
<span class="anchor" id="line-18"></span><div><table><tbody><tr>  <td><p class="line862"> package name </td>
  <td><p class="line862"> pandas </td>
  <td><p class="line862"> la </td>
</tr>
<tr>  <td><span class="anchor" id="line-19"></span><p class="line862"> web site </td>
  <td><p class="line862"> <a class="http" href="../external.html?link=http://pandas.googlecode.com/">http://pandas.googlecode.com</a> </td>
  <td><p class="line862"> <a class="http" href="../external.html?link=http://larry.sourceforge.net/">http://larry.sourceforge.net</a> </td>
</tr>
<tr>  <td><span class="anchor" id="line-20"></span><p class="line862"> license </td>
  <td><p class="line862"> New BSD </td>
  <td><p class="line862"> Simplified BSD </td>
</tr>
<tr>  <td><span class="anchor" id="line-21"></span><p class="line862"> programming languages </td>
  <td><p class="line862"> Python, Cython </td>
  <td><p class="line862"> Python, Cython </td>
</tr>
<tr>  <td><span class="anchor" id="line-22"></span><p class="line862"> required dependencies </td>
  <td><p class="line862"> Python, Numpy, dateutil </td>
  <td><p class="line862"> Python, Numpy </td>
</tr>
<tr>  <td><span class="anchor" id="line-23"></span><p class="line862"> optional dependencies </td>
  <td><p class="line862"> scikits.statsmodels, nose, scipy </td>
  <td><p class="line862"> h5py, Scipy, nose </td>
</tr>
<tr>  <td><span class="anchor" id="line-24"></span><p class="line862"> build dependencies </td>
  <td><p class="line862"> C-compiler </td>
  <td><p class="line862"> optional: C-compiler </td>
</tr>
<tr>  <td><span class="anchor" id="line-25"></span><p class="line862"> year started (open source) </td>
  <td><p class="line862"> 2008 (2009) </td>
  <td><p class="line862"> 2008 (2010) </td>
</tr>
<tr>  <td><span class="anchor" id="line-26"></span><p class="line862"> data objects </td>
  <td><p class="line862"> 1d: Series; 2d: <a class="nonexistent" href="DataFrame.html">DataFrame</a>, <a class="nonexistent" href="DataMatrix.html">DataMatrix</a>; 3d: <a class="nonexistent" href="WidePanel.html">WidePanel</a>, <a class="nonexistent" href="LongPanel.html">LongPanel</a> </td>
  <td><p class="line862"> nd: larry </td>
</tr>
<tr>  <td><span class="anchor" id="line-27"></span><p class="line862"> Number of dimensions supported </td>
  <td><p class="line862"> 1-3d </td>
  <td><p class="line862"> nd &gt; 0d </td>
</tr>
<tr>  <td><span class="anchor" id="line-28"></span><p class="line862"> mutability </td>
  <td><p class="line862"> data mutable, expandable on 1 axis </td>
  <td><p class="line862"> data and label mutable; axis insertable </td>
</tr>
<tr>  <td><span class="anchor" id="line-29"></span><p class="line862"> data container </td>
  <td><p class="line862"> 1d: ndarray; 2d: dict of Series or 2D ndarray (<a class="nonexistent" href="DataMatrix.html">DataMatrix</a>); 3d: ndarray </td>
  <td><p class="line862"> ndarray </td>
</tr>
<tr>  <td><span class="anchor" id="line-30"></span><p class="line862"> data types </td>
  <td><p class="line862"> homogenous, <a class="nonexistent" href="DataFrame/DataMatrix.html">DataFrame/DataMatrix</a> support heterogeneous </td>
  <td><p class="line862"> homogenous: float, int, str, object </td>
</tr>
<tr>  <td><span class="anchor" id="line-31"></span><p class="line862"> index/label container </td>
  <td><p class="line862"> ndarray (Index class) </td>
  <td><p class="line862"> lists </td>
</tr>
<tr>  <td><span class="anchor" id="line-32"></span><p class="line862"> index/label types </td>
  <td><p class="line862"> heterogenous, hashable </td>
  <td><p class="line862"> heterogenous, hashable </td>
</tr>
<tr>  <td><span class="anchor" id="line-33"></span><p class="line862"> index/label constraints </td>
  <td><p class="line862"> unique along any one axis, hashable </td>
  <td><p class="line862"> unique along any one axis, hashable </td>
</tr>
<tr>  <td><span class="anchor" id="line-34"></span><p class="line862"> missing values </td>
  <td><p class="line862"> NaN (float) or None (object) </td>
  <td><p class="line862"> NaN (float),  partial support: &quot;&quot; (str), None (object) </td>
</tr>
<tr>  <td><span class="anchor" id="line-35"></span><p class="line862"> binary operations on two data objects </td>
  <td><p class="line862"> union of indices </td>
  <td><p class="line862"> intersection of labels </td>
</tr>
<tr>  <td><span class="anchor" id="line-36"></span><p class="line862"> IO </td>
  <td><p class="line862"> pickle, partial CSV </td>
  <td><p class="line862"> HDF5, partial support for CSV </td>
</tr>
</tbody></table></div><span class="anchor" id="line-37"></span><p class="line867"><span class="anchor" id="line-38"></span><span class="anchor" id="line-39"></span><span class="anchor" id="line-40"></span><span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span><span class="anchor" id="line-43"></span><span class="anchor" id="line-44"></span><span class="anchor" id="line-45"></span><span class="anchor" id="line-46"></span><span class="anchor" id="line-47"></span><span class="anchor" id="line-48"></span><span class="anchor" id="line-49"></span><span class="anchor" id="line-50"></span><span class="anchor" id="line-51"></span><span class="anchor" id="line-52"></span><span class="anchor" id="line-53"></span><span class="anchor" id="line-54"></span><span class="anchor" id="line-55"></span><span class="anchor" id="line-56"></span><span class="anchor" id="line-57"></span><span class="anchor" id="line-58"></span><span class="anchor" id="line-59"></span><span class="anchor" id="line-60"></span><span class="anchor" id="line-61"></span><span class="anchor" id="line-62"></span><span class="anchor" id="line-63"></span><span class="anchor" id="line-64"></span><span class="anchor" id="line-65"></span><span class="anchor" id="line-66"></span><span class="anchor" id="line-67"></span><span class="anchor" id="line-68"></span><span class="anchor" id="line-69"></span><span class="anchor" id="line-70"></span><span class="anchor" id="line-71"></span><span class="anchor" id="line-72"></span><span class="anchor" id="line-73"></span><span class="anchor" id="line-74"></span><span class="anchor" id="line-75"></span><span class="anchor" id="line-76"></span><span class="anchor" id="line-77"></span><h1>pandas</h1>
<p>pandas started in 2008 as a set of data structures for quantitative finance applications. It's original intent was to improve on ideas found in R's data.frame structure (hence the DataFrame class) and to enable Python to be a better tool for building robust systems. For example, the R data.frame does not support automatic data alignment and this is often desirable.
Development on pandas proceeded with the following goals:</p>
<blockquote>
<ul class="simple">
<li>Want to make it easy to interactively explore the data in memory, particularly in an IPython session. R for example is quite good at this as is MATLAB and other libraries / research environments.</li><li>The user should not need to become a Python expert to become an expert in the use of pandas (in other words, where possible it tries not to make your life difficult)</li><li>No need to support higher than 3-dimensional data since such data sets are seldom found in statistical / financial applications. For this reason I avoided a generic n-dimensional approach (like larry, for example)</li><li>Performance is <strong>extremely</strong> important. This led to significant amounts of Cython code to optimize core operations (more on this below).</li></ul>
</blockquote>
<p>At a glance, the two workhorse data objects of pandas are the Series and the DataFrame:</p>
<pre>from pandas import *
s = Series([0, 1, 2], index=['a', 'b', 'c'])
df = DataFrame({'col1' : s, 'col2' : s * 2})
&gt;&gt;&gt; s
a    0
b    1
c    2
&gt;&gt;&gt; df
     col1           col2
a    0              0
b    1              2
c    2              4
&gt;&gt;&gt; df['col3'] = 6
&gt;&gt;&gt; df
     col1           col2           col3
a    0              0              6
b    1              2              6
c    2              4              6</pre><p>Series behaves like both a dict and an ndarray. Binary operations (+, -, etc.) match on labels. For R users, DataFrame is like a data.frame + automatic data alignment.</p>
<blockquote>
<ul class="simple">
<li><a class="http reference external" href="../external.html?link=http://pandas.sourceforge.net/series.html">Series docs</a></li><li><a class="http reference external" href="../external.html?link=http://pandas.sourceforge.net/dataframe.html">DataFrame docs</a></li></ul>
</blockquote>
<span class="anchor" id="line-78"></span><p class="line867">
<h2 id="larry">larry</h2>
<span class="anchor" id="line-79"></span><span class="anchor" id="line-80"></span><p class="line874">Here's larry in schematic form: <span class="anchor" id="line-81"></span><span class="anchor" id="line-82"></span><span class="anchor" id="line-83"></span><span class="anchor" id="line-84"></span><span class="anchor" id="line-85"></span><span class="anchor" id="line-86"></span><pre><span class="anchor" id="line-1"></span>             date1    date2    date3
<span class="anchor" id="line-2"></span>    'AAPL'   209.19   207.87   210.11
<span class="anchor" id="line-3"></span>y = 'IBM'    129.03   130.39   130.55
<span class="anchor" id="line-4"></span>    'DELL'    14.82    15.11    14.94</pre><p class="line874">                <span class="anchor" id="line-87"></span>The larry above is stored internally as a Numpy array and a list of lists: <span class="anchor" id="line-88"></span><span class="anchor" id="line-89"></span><span class="anchor" id="line-90"></span><span class="anchor" id="line-91"></span><span class="anchor" id="line-92"></span><span class="anchor" id="line-93"></span><pre><span class="anchor" id="line-1-1"></span>y.label = [['AAPL', 'IBM', 'DELL'], [date1, date2, date3]]
<span class="anchor" id="line-2-1"></span>y.x = np.array([[209.19, 207.87, 210.11],
<span class="anchor" id="line-3-1"></span>                [129.03, 130.39, 130.55],
<span class="anchor" id="line-4-1"></span>                [ 14.82,  15.11,  14.94]])               </pre><p class="line874">   <span class="anchor" id="line-94"></span>A larry can have any number of dimensions except zero. Here, for example, is <span class="anchor" id="line-95"></span>one way to create a one-dimensional larry: <span class="anchor" id="line-96"></span><span class="anchor" id="line-97"></span><span class="anchor" id="line-98"></span><span class="anchor" id="line-99"></span><pre><span class="anchor" id="line-1-2"></span>&gt;&gt;&gt; import la
<span class="anchor" id="line-2-2"></span>&gt;&gt;&gt; y = la.larry([1, 2, 3])</pre><p class="line874">    <span class="anchor" id="line-100"></span>In the statement above the list is converted to a Numpy array and the labels <span class="anchor" id="line-101"></span>default to <tt class="backtick"></tt>range(n)<tt class="backtick"></tt>, where *n* in this case is 3. <span class="anchor" id="line-102"></span><span class="anchor" id="line-103"></span><p class="line874">For the most part larry acts like a Numpy array. And, whenever you want, <span class="anchor" id="line-104"></span>you have direct access to the Numpy array that holds your data. For <span class="anchor" id="line-105"></span>example if you have a function, *myfunc*, that works on Numpy arrays and <span class="anchor" id="line-106"></span>doesn't change the shape or ordering of the array, then you can use it on a <span class="anchor" id="line-107"></span>larry, *y*, like this: <span class="anchor" id="line-108"></span><span class="anchor" id="line-109"></span><span class="anchor" id="line-110"></span><pre><span class="anchor" id="line-1-3"></span>y.x = myfunc(y.x)</pre><span class="anchor" id="line-111"></span><span class="anchor" id="line-112"></span><p class="line874">One of the design goals of the larry data object is to behave in a way that a Numpy array user would expect. <span class="anchor" id="line-113"></span>Here's a brief comparison to Numpy arrays:   <span class="anchor" id="line-114"></span><div><table><tbody><tr>  <td><p class="line862"> <strong>Numpy</strong> </td>
  <td><p class="line862"> <strong>la</strong> </td>
</tr>
<tr>  <td><span class="anchor" id="line-115"></span><p class="line862"> <tt class="backtick">arr&nbsp;=&nbsp;np.array([[1,&nbsp;2],&nbsp;[3,&nbsp;4]])</tt> </td>
  <td><p class="line891"><tt class="backtick">lar&nbsp;=&nbsp;larry([[1,&nbsp;2],&nbsp;[3,&nbsp;4]])</tt> </td>
</tr>
<tr>  <td><span class="anchor" id="line-116"></span><p class="line862"> <tt class="backtick">np.nansum(arr)</tt> </td>
  <td><p class="line862"> <tt class="backtick">lar.sum()</tt> </td>
</tr>
<tr>  <td><span class="anchor" id="line-117"></span><p class="line862"> <tt class="backtick">arr.shape</tt>, <tt class="backtick">arr.dtype</tt>, <tt class="backtick">arr.ndim</tt>, <tt class="backtick">arr.T</tt> </td>
  <td><p class="line862"> <tt class="backtick">lar.shape</tt>, <tt class="backtick">lar.dtype</tt>, <tt class="backtick">lar.ndim</tt>, <tt class="backtick">lar.T</tt> </td>
</tr>
<tr>  <td><span class="anchor" id="line-118"></span><p class="line862"> <tt class="backtick">arr.astype(float)</tt> </td>
  <td><p class="line862"> <tt class="backtick">lar.astype(float)</tt> </td>
</tr>
<tr>  <td><span class="anchor" id="line-119"></span><p class="line862"> <tt class="backtick">arr1&nbsp;+&nbsp;arr2</tt> </td>
  <td><p class="line862"> <tt class="backtick">lar1&nbsp;+&nbsp;lar2</tt> </td>
</tr>
<tr>  <td><span class="anchor" id="line-120"></span><p class="line862"> <tt class="backtick">arr[:,0]</tt> </td>
  <td><p class="line862"> <tt class="backtick">lar[:,0]</tt> </td>
</tr>
<tr>  <td><span class="anchor" id="line-121"></span><p class="line862"> <tt class="backtick"></tt>nd<tt class="backtick"></tt> --&gt; (<tt class="backtick"></tt>nd + 1<tt class="backtick"></tt>) </td>
  <td><p class="line862"> <tt class="backtick">lar.insertaxis(axis,&nbsp;label)</tt> </td>
</tr>
</tbody></table></div><span class="anchor" id="line-122"></span><p class="line867"><span class="anchor" id="line-123"></span><span class="anchor" id="line-124"></span><span class="anchor" id="line-125"></span><span class="anchor" id="line-126"></span><span class="anchor" id="line-127"></span><span class="anchor" id="line-128"></span><span class="anchor" id="line-129"></span><span class="anchor" id="line-130"></span><span class="anchor" id="line-131"></span><span class="anchor" id="line-132"></span><span class="anchor" id="line-133"></span><span class="anchor" id="line-134"></span><span class="anchor" id="line-135"></span><span class="anchor" id="line-136"></span><span class="anchor" id="line-137"></span><span class="anchor" id="line-138"></span><span class="anchor" id="line-139"></span><span class="anchor" id="line-140"></span><span class="anchor" id="line-141"></span><span class="anchor" id="line-142"></span><span class="anchor" id="line-143"></span><span class="anchor" id="line-144"></span><span class="anchor" id="line-145"></span><span class="anchor" id="line-146"></span><span class="anchor" id="line-147"></span><span class="anchor" id="line-148"></span><span class="anchor" id="line-149"></span><span class="anchor" id="line-150"></span><span class="anchor" id="line-151"></span><span class="anchor" id="line-152"></span><span class="anchor" id="line-153"></span><span class="anchor" id="line-154"></span><span class="anchor" id="line-155"></span><span class="anchor" id="line-156"></span><span class="anchor" id="line-157"></span><span class="anchor" id="line-158"></span><span class="anchor" id="line-159"></span><span class="anchor" id="line-160"></span><span class="anchor" id="line-161"></span><span class="anchor" id="line-162"></span><span class="anchor" id="line-163"></span><span class="anchor" id="line-164"></span><span class="anchor" id="line-165"></span><span class="anchor" id="line-166"></span><span class="anchor" id="line-167"></span><span class="anchor" id="line-168"></span><span class="anchor" id="line-169"></span><span class="anchor" id="line-170"></span><span class="anchor" id="line-171"></span><span class="anchor" id="line-172"></span><span class="anchor" id="line-173"></span><span class="anchor" id="line-174"></span><span class="anchor" id="line-175"></span><span class="anchor" id="line-176"></span><span class="anchor" id="line-177"></span><span class="anchor" id="line-178"></span><span class="anchor" id="line-179"></span><span class="anchor" id="line-180"></span><span class="anchor" id="line-181"></span><span class="anchor" id="line-182"></span><span class="anchor" id="line-183"></span><span class="anchor" id="line-184"></span><span class="anchor" id="line-185"></span><span class="anchor" id="line-186"></span><span class="anchor" id="line-187"></span><span class="anchor" id="line-188"></span><span class="anchor" id="line-189"></span><span class="anchor" id="line-190"></span><span class="anchor" id="line-191"></span><span class="anchor" id="line-192"></span><span class="anchor" id="line-193"></span><span class="anchor" id="line-194"></span><span class="anchor" id="line-195"></span><span class="anchor" id="line-196"></span><span class="anchor" id="line-197"></span><span class="anchor" id="line-198"></span><span class="anchor" id="line-199"></span><span class="anchor" id="line-200"></span><span class="anchor" id="line-201"></span><span class="anchor" id="line-202"></span><span class="anchor" id="line-203"></span><span class="anchor" id="line-204"></span><span class="anchor" id="line-205"></span><span class="anchor" id="line-206"></span><span class="anchor" id="line-207"></span><span class="anchor" id="line-208"></span><span class="anchor" id="line-209"></span><span class="anchor" id="line-210"></span><span class="anchor" id="line-211"></span><span class="anchor" id="line-212"></span><span class="anchor" id="line-213"></span><span class="anchor" id="line-214"></span><span class="anchor" id="line-215"></span><span class="anchor" id="line-216"></span><span class="anchor" id="line-217"></span><span class="anchor" id="line-218"></span><span class="anchor" id="line-219"></span><span class="anchor" id="line-220"></span><span class="anchor" id="line-221"></span><span class="anchor" id="line-222"></span><span class="anchor" id="line-223"></span><span class="anchor" id="line-224"></span><span class="anchor" id="line-225"></span><span class="anchor" id="line-226"></span><span class="anchor" id="line-227"></span><span class="anchor" id="line-228"></span><span class="anchor" id="line-229"></span><span class="anchor" id="line-230"></span><span class="anchor" id="line-231"></span><span class="anchor" id="line-232"></span><span class="anchor" id="line-233"></span><span class="anchor" id="line-234"></span><span class="anchor" id="line-235"></span><span class="anchor" id="line-236"></span><span class="anchor" id="line-237"></span><span class="anchor" id="line-238"></span><span class="anchor" id="line-239"></span><span class="anchor" id="line-240"></span><span class="anchor" id="line-241"></span><span class="anchor" id="line-242"></span><span class="anchor" id="line-243"></span><span class="anchor" id="line-244"></span><span class="anchor" id="line-245"></span><span class="anchor" id="line-246"></span><span class="anchor" id="line-247"></span><span class="anchor" id="line-248"></span><span class="anchor" id="line-249"></span><span class="anchor" id="line-250"></span><span class="anchor" id="line-251"></span><span class="anchor" id="line-252"></span><span class="anchor" id="line-253"></span><span class="anchor" id="line-254"></span><span class="anchor" id="line-255"></span><span class="anchor" id="line-256"></span><span class="anchor" id="line-257"></span><span class="anchor" id="line-258"></span><span class="anchor" id="line-259"></span><span class="anchor" id="line-260"></span><span class="anchor" id="line-261"></span><span class="anchor" id="line-262"></span><span class="anchor" id="line-263"></span><span class="anchor" id="line-264"></span><span class="anchor" id="line-265"></span><span class="anchor" id="line-266"></span><span class="anchor" id="line-267"></span><span class="anchor" id="line-268"></span><span class="anchor" id="line-269"></span><span class="anchor" id="line-270"></span><span class="anchor" id="line-271"></span><span class="anchor" id="line-272"></span><span class="anchor" id="line-273"></span><span class="anchor" id="line-274"></span><span class="anchor" id="line-275"></span><span class="anchor" id="line-276"></span><span class="anchor" id="line-277"></span><span class="anchor" id="line-278"></span><span class="anchor" id="line-279"></span><span class="anchor" id="line-280"></span><span class="anchor" id="line-281"></span><span class="anchor" id="line-282"></span><span class="anchor" id="line-283"></span><span class="anchor" id="line-284"></span><span class="anchor" id="line-285"></span><span class="anchor" id="line-286"></span><span class="anchor" id="line-287"></span><span class="anchor" id="line-288"></span><span class="anchor" id="line-289"></span><span class="anchor" id="line-290"></span><span class="anchor" id="line-291"></span><span class="anchor" id="line-292"></span><span class="anchor" id="line-293"></span><span class="anchor" id="line-294"></span><span class="anchor" id="line-295"></span><span class="anchor" id="line-296"></span><span class="anchor" id="line-297"></span><span class="anchor" id="line-298"></span><span class="anchor" id="line-299"></span><span class="anchor" id="line-300"></span><span class="anchor" id="line-301"></span><span class="anchor" id="line-302"></span><span class="anchor" id="line-303"></span><span class="anchor" id="line-304"></span><span class="anchor" id="line-305"></span><span class="anchor" id="line-306"></span><span class="anchor" id="line-307"></span><span class="anchor" id="line-308"></span><span class="anchor" id="line-309"></span><span class="anchor" id="line-310"></span><span class="anchor" id="line-311"></span><span class="anchor" id="line-312"></span><span class="anchor" id="line-313"></span><span class="anchor" id="line-314"></span><span class="anchor" id="line-315"></span><span class="anchor" id="line-316"></span><span class="anchor" id="line-317"></span><span class="anchor" id="line-318"></span><span class="anchor" id="line-319"></span><span class="anchor" id="line-320"></span><span class="anchor" id="line-321"></span><span class="anchor" id="line-322"></span><span class="anchor" id="line-323"></span><span class="anchor" id="line-324"></span><span class="anchor" id="line-325"></span><span class="anchor" id="line-326"></span><span class="anchor" id="line-327"></span><span class="anchor" id="line-328"></span><span class="anchor" id="line-329"></span><span class="anchor" id="line-330"></span><span class="anchor" id="line-331"></span><span class="anchor" id="line-332"></span><span class="anchor" id="line-333"></span><span class="anchor" id="line-334"></span><span class="anchor" id="line-335"></span><span class="anchor" id="line-336"></span><span class="anchor" id="line-337"></span><span class="anchor" id="line-338"></span><span class="anchor" id="line-339"></span><span class="anchor" id="line-340"></span><span class="anchor" id="line-341"></span><span class="anchor" id="line-342"></span><span class="anchor" id="line-343"></span><span class="anchor" id="line-344"></span><span class="anchor" id="line-345"></span><span class="anchor" id="line-346"></span><span class="anchor" id="line-347"></span><span class="anchor" id="line-348"></span><span class="anchor" id="line-349"></span><span class="anchor" id="line-350"></span><span class="anchor" id="line-351"></span><span class="anchor" id="line-352"></span><span class="anchor" id="line-353"></span><span class="anchor" id="line-354"></span><span class="anchor" id="line-355"></span><span class="anchor" id="line-356"></span><span class="anchor" id="line-357"></span><span class="anchor" id="line-358"></span><span class="anchor" id="line-359"></span><span class="anchor" id="line-360"></span><span class="anchor" id="line-361"></span><span class="anchor" id="line-362"></span><span class="anchor" id="line-363"></span><span class="anchor" id="line-364"></span><span class="anchor" id="line-365"></span><span class="anchor" id="line-366"></span><span class="anchor" id="line-367"></span><span class="anchor" id="line-368"></span><span class="anchor" id="line-369"></span><span class="anchor" id="line-370"></span><span class="anchor" id="line-371"></span><span class="anchor" id="line-372"></span><span class="anchor" id="line-373"></span><span class="anchor" id="line-374"></span><span class="anchor" id="line-375"></span><span class="anchor" id="line-376"></span><span class="anchor" id="line-377"></span><span class="anchor" id="line-378"></span><span class="anchor" id="line-379"></span><span class="anchor" id="line-380"></span><span class="anchor" id="line-381"></span><span class="anchor" id="line-382"></span><span class="anchor" id="line-383"></span><span class="anchor" id="line-384"></span><span class="anchor" id="line-385"></span><span class="anchor" id="line-386"></span><span class="anchor" id="line-387"></span><span class="anchor" id="line-388"></span><span class="anchor" id="line-389"></span><span class="anchor" id="line-390"></span><span class="anchor" id="line-391"></span><span class="anchor" id="line-392"></span><span class="anchor" id="line-393"></span><span class="anchor" id="line-394"></span><span class="anchor" id="line-395"></span><span class="anchor" id="line-396"></span><span class="anchor" id="line-397"></span><span class="anchor" id="line-398"></span><span class="anchor" id="line-399"></span><span class="anchor" id="line-400"></span><span class="anchor" id="line-401"></span><span class="anchor" id="line-402"></span><span class="anchor" id="line-403"></span><span class="anchor" id="line-404"></span><span class="anchor" id="line-405"></span><span class="anchor" id="line-406"></span><span class="anchor" id="line-407"></span><span class="anchor" id="line-408"></span><span class="anchor" id="line-409"></span><span class="anchor" id="line-410"></span><span class="anchor" id="line-411"></span><span class="anchor" id="line-412"></span><span class="anchor" id="line-413"></span><span class="anchor" id="line-414"></span><span class="anchor" id="line-415"></span><span class="anchor" id="line-416"></span><span class="anchor" id="line-417"></span><span class="anchor" id="line-418"></span><span class="anchor" id="line-419"></span><span class="anchor" id="line-420"></span><span class="anchor" id="line-421"></span><span class="anchor" id="line-422"></span><span class="anchor" id="line-423"></span><span class="anchor" id="line-424"></span><span class="anchor" id="line-425"></span><span class="anchor" id="line-426"></span><span class="anchor" id="line-427"></span><span class="anchor" id="line-428"></span><span class="anchor" id="line-429"></span><span class="anchor" id="line-430"></span><span class="anchor" id="line-431"></span><span class="anchor" id="line-432"></span><span class="anchor" id="line-433"></span><span class="anchor" id="line-434"></span><span class="anchor" id="line-435"></span><span class="anchor" id="line-436"></span><span class="anchor" id="line-437"></span><span class="anchor" id="line-438"></span><span class="anchor" id="line-439"></span><span class="anchor" id="line-440"></span><span class="anchor" id="line-441"></span><span class="anchor" id="line-442"></span><span class="anchor" id="line-443"></span><span class="anchor" id="line-444"></span><span class="anchor" id="line-445"></span><span class="anchor" id="line-446"></span><span class="anchor" id="line-447"></span><span class="anchor" id="line-448"></span><span class="anchor" id="line-449"></span><span class="anchor" id="line-450"></span><span class="anchor" id="line-451"></span><span class="anchor" id="line-452"></span><span class="anchor" id="line-453"></span><span class="anchor" id="line-454"></span><span class="anchor" id="line-455"></span><span class="anchor" id="line-456"></span><span class="anchor" id="line-457"></span><span class="anchor" id="line-458"></span><span class="anchor" id="line-459"></span><span class="anchor" id="line-460"></span><span class="anchor" id="line-461"></span><span class="anchor" id="line-462"></span><span class="anchor" id="line-463"></span><span class="anchor" id="line-464"></span><span class="anchor" id="line-465"></span><span class="anchor" id="line-466"></span><span class="anchor" id="line-467"></span><span class="anchor" id="line-468"></span><span class="anchor" id="line-469"></span><span class="anchor" id="line-470"></span><span class="anchor" id="line-471"></span><span class="anchor" id="line-472"></span><span class="anchor" id="line-473"></span><span class="anchor" id="line-474"></span><span class="anchor" id="line-475"></span><span class="anchor" id="line-476"></span><span class="anchor" id="line-477"></span><span class="anchor" id="line-478"></span><span class="anchor" id="line-479"></span><span class="anchor" id="line-480"></span><span class="anchor" id="line-481"></span><span class="anchor" id="line-482"></span><span class="anchor" id="line-483"></span><span class="anchor" id="line-484"></span><span class="anchor" id="line-485"></span><span class="anchor" id="line-486"></span><span class="anchor" id="line-487"></span><span class="anchor" id="line-488"></span><span class="anchor" id="line-489"></span><span class="anchor" id="line-490"></span><span class="anchor" id="line-491"></span><span class="anchor" id="line-492"></span><span class="anchor" id="line-493"></span><span class="anchor" id="line-494"></span><span class="anchor" id="line-495"></span><span class="anchor" id="line-496"></span><span class="anchor" id="line-497"></span><span class="anchor" id="line-498"></span><span class="anchor" id="line-499"></span><span class="anchor" id="line-500"></span><span class="anchor" id="line-501"></span><span class="anchor" id="line-502"></span><span class="anchor" id="line-503"></span><span class="anchor" id="line-504"></span><span class="anchor" id="line-505"></span><span class="anchor" id="line-506"></span><span class="anchor" id="line-507"></span><span class="anchor" id="line-508"></span><span class="anchor" id="line-509"></span><span class="anchor" id="line-510"></span><span class="anchor" id="line-511"></span><span class="anchor" id="line-512"></span><span class="anchor" id="line-513"></span><span class="anchor" id="line-514"></span><span class="anchor" id="line-515"></span><span class="anchor" id="line-516"></span><span class="anchor" id="line-517"></span><span class="anchor" id="line-518"></span><span class="anchor" id="line-519"></span><span class="anchor" id="line-520"></span><span class="anchor" id="line-521"></span><span class="anchor" id="line-522"></span><span class="anchor" id="line-523"></span><span class="anchor" id="line-524"></span><span class="anchor" id="line-525"></span><span class="anchor" id="line-526"></span><span class="anchor" id="line-527"></span><span class="anchor" id="line-528"></span><span class="anchor" id="line-529"></span><span class="anchor" id="line-530"></span><span class="anchor" id="line-531"></span><span class="anchor" id="line-532"></span><span class="anchor" id="line-533"></span><span class="anchor" id="line-534"></span><span class="anchor" id="line-535"></span><span class="anchor" id="line-536"></span><span class="anchor" id="line-537"></span><span class="anchor" id="line-538"></span><span class="anchor" id="line-539"></span><span class="anchor" id="line-540"></span><span class="anchor" id="line-541"></span><span class="anchor" id="line-542"></span><span class="anchor" id="line-543"></span><span class="anchor" id="line-544"></span><span class="anchor" id="line-545"></span><span class="anchor" id="line-546"></span><span class="anchor" id="line-547"></span><span class="anchor" id="line-548"></span><span class="anchor" id="line-549"></span><span class="anchor" id="line-550"></span><span class="anchor" id="line-551"></span><span class="anchor" id="line-552"></span><span class="anchor" id="line-553"></span><span class="anchor" id="line-554"></span><span class="anchor" id="line-555"></span><span class="anchor" id="line-556"></span><span class="anchor" id="line-557"></span><span class="anchor" id="line-558"></span><span class="anchor" id="line-559"></span><span class="anchor" id="line-560"></span><span class="anchor" id="line-561"></span><span class="anchor" id="line-562"></span><span class="anchor" id="line-563"></span><span class="anchor" id="line-564"></span><span class="anchor" id="line-565"></span><span class="anchor" id="line-566"></span><span class="anchor" id="line-567"></span><span class="anchor" id="line-568"></span><span class="anchor" id="line-569"></span><span class="anchor" id="line-570"></span><span class="anchor" id="line-571"></span><span class="anchor" id="line-572"></span><span class="anchor" id="line-573"></span><span class="anchor" id="line-574"></span><span class="anchor" id="line-575"></span><span class="anchor" id="line-576"></span><span class="anchor" id="line-577"></span><span class="anchor" id="line-578"></span><span class="anchor" id="line-579"></span><span class="anchor" id="line-580"></span><span class="anchor" id="line-581"></span><span class="anchor" id="line-582"></span><span class="anchor" id="line-583"></span><span class="anchor" id="line-584"></span><span class="anchor" id="line-585"></span><span class="anchor" id="line-586"></span><span class="anchor" id="line-587"></span><span class="anchor" id="line-588"></span><span class="anchor" id="line-589"></span><span class="anchor" id="line-590"></span><span class="anchor" id="line-591"></span><span class="anchor" id="line-592"></span><span class="anchor" id="line-593"></span><span class="anchor" id="line-594"></span><span class="anchor" id="line-595"></span><span class="anchor" id="line-596"></span><span class="anchor" id="line-597"></span><span class="anchor" id="line-598"></span><span class="anchor" id="line-599"></span><span class="anchor" id="line-600"></span><span class="anchor" id="line-601"></span><span class="anchor" id="line-602"></span><span class="anchor" id="line-603"></span><span class="anchor" id="line-604"></span><span class="anchor" id="line-605"></span><span class="anchor" id="line-606"></span><span class="anchor" id="line-607"></span><span class="anchor" id="line-608"></span><span class="anchor" id="line-609"></span><span class="anchor" id="line-610"></span><span class="anchor" id="line-611"></span><span class="anchor" id="line-612"></span><span class="anchor" id="line-613"></span><span class="anchor" id="line-614"></span><span class="anchor" id="line-615"></span><span class="anchor" id="line-616"></span><span class="anchor" id="line-617"></span><span class="anchor" id="line-618"></span><span class="anchor" id="line-619"></span><span class="anchor" id="line-620"></span><span class="anchor" id="line-621"></span><span class="anchor" id="line-622"></span><span class="anchor" id="line-623"></span><span class="anchor" id="line-624"></span><span class="anchor" id="line-625"></span><span class="anchor" id="line-626"></span><span class="anchor" id="line-627"></span><span class="anchor" id="line-628"></span><span class="anchor" id="line-629"></span><span class="anchor" id="line-630"></span><span class="anchor" id="line-631"></span><span class="anchor" id="line-632"></span><span class="anchor" id="line-633"></span><span class="anchor" id="line-634"></span><span class="anchor" id="line-635"></span><span class="anchor" id="line-636"></span><span class="anchor" id="line-637"></span><span class="anchor" id="line-638"></span><span class="anchor" id="line-639"></span><span class="anchor" id="line-640"></span><span class="anchor" id="line-641"></span><span class="anchor" id="line-642"></span><span class="anchor" id="line-643"></span><span class="anchor" id="line-644"></span><span class="anchor" id="line-645"></span><span class="anchor" id="line-646"></span><span class="anchor" id="line-647"></span><span class="anchor" id="line-648"></span><span class="anchor" id="line-649"></span><span class="anchor" id="line-650"></span><span class="anchor" id="line-651"></span><span class="anchor" id="line-652"></span><span class="anchor" id="line-653"></span><span class="anchor" id="line-654"></span><span class="anchor" id="line-655"></span><span class="anchor" id="line-656"></span><span class="anchor" id="line-657"></span><span class="anchor" id="line-658"></span><span class="anchor" id="line-659"></span><span class="anchor" id="line-660"></span><span class="anchor" id="line-661"></span><span class="anchor" id="line-662"></span><span class="anchor" id="line-663"></span><span class="anchor" id="line-664"></span><span class="anchor" id="line-665"></span><span class="anchor" id="line-666"></span><span class="anchor" id="line-667"></span><span class="anchor" id="line-668"></span><span class="anchor" id="line-669"></span><span class="anchor" id="line-670"></span><span class="anchor" id="line-671"></span><span class="anchor" id="line-672"></span><span class="anchor" id="line-673"></span><span class="anchor" id="line-674"></span><span class="anchor" id="line-675"></span><span class="anchor" id="line-676"></span><span class="anchor" id="line-677"></span><span class="anchor" id="line-678"></span><span class="anchor" id="line-679"></span><span class="anchor" id="line-680"></span><span class="anchor" id="line-681"></span><span class="anchor" id="line-682"></span><span class="anchor" id="line-683"></span><span class="anchor" id="line-684"></span><span class="anchor" id="line-685"></span><span class="anchor" id="line-686"></span><span class="anchor" id="line-687"></span><span class="anchor" id="line-688"></span><span class="anchor" id="line-689"></span><span class="anchor" id="line-690"></span><span class="anchor" id="line-691"></span><span class="anchor" id="line-692"></span><span class="anchor" id="line-693"></span><span class="anchor" id="line-694"></span><span class="anchor" id="line-695"></span><span class="anchor" id="line-696"></span><span class="anchor" id="line-697"></span><span class="anchor" id="line-698"></span><span class="anchor" id="line-699"></span><span class="anchor" id="line-700"></span><span class="anchor" id="line-701"></span><span class="anchor" id="line-702"></span><span class="anchor" id="line-703"></span><span class="anchor" id="line-704"></span><span class="anchor" id="line-705"></span><span class="anchor" id="line-706"></span><span class="anchor" id="line-707"></span><span class="anchor" id="line-708"></span><span class="anchor" id="line-709"></span><span class="anchor" id="line-710"></span><span class="anchor" id="line-711"></span><span class="anchor" id="line-712"></span><span class="anchor" id="line-713"></span><span class="anchor" id="line-714"></span><span class="anchor" id="line-715"></span><span class="anchor" id="line-716"></span><span class="anchor" id="line-717"></span><span class="anchor" id="line-718"></span><span class="anchor" id="line-719"></span><span class="anchor" id="line-720"></span><span class="anchor" id="line-721"></span><div class="section" id="design-and-performance-issues-for-data-structures">
<h3>Design and performance issues for data structures</h3>
<dl><dt>For each item, we'd like to address the following points:</dt>
<dd><ul class="first last simple">
<li>What is a relevant example (with code snippets)?</li><li>How are existing packages solving (or not solving) the problem?</li><li>For performance-sensitive operations, how fast is each package (provide a code snippet)? We might also try to quantify the overhead using a particular data structure over vanilla NumPy areas (homogeneous or structured)</li></ul>
</dd>
</dl><div class="section" id="creation-of-data-objects">
<h4>Creation of data objects</h4>
<p>One of the most basic operations is the creation of a data object. Here are
examples of how to create three different data objects: datarray.DataArray,
pandas.DataMatrix, and la.larry.</p>
<p>First let's set up the data we will use to create the data objects:</p>
<pre>&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; N = 100
&gt;&gt;&gt; arr = np.random.rand(N, N)
&gt;&gt;&gt; idx1 = map(str, range(N))
&gt;&gt;&gt; idx2 = map(str, range(N))</pre><p>Create a datarray.DataArray:</p>
<pre>&gt;&gt;&gt; import datarray
&gt;&gt;&gt; datarray.__version__
    '0.0.4'
&gt;&gt;&gt; timeit datarray.DataArray(arr, [('row', idx1), ('col', idx2)])
    10000 loops, best of 3: 153 us per loop</pre><p>Create a pandas.DataMatrix:</p>
<pre>&gt;&gt;&gt; import pandas
&gt;&gt;&gt; pandas.__version__
    '0.2.1.dev'
&gt;&gt;&gt; timeit pandas.DataMatrix(arr, idx1, idx2)
    10000 loops, best of 3: 50.1 us per loop</pre><p>Create a la.larry:</p>
<pre>&gt;&gt;&gt; import la
&gt;&gt;&gt; la.__version__
    '0.5.0dev'
&gt;&gt;&gt; timeit la.larry(arr, [idx1, idx2])
    100000 loops, best of 3: 14 us per loop</pre><p>Most of the time used to create a larry is spent doing an integrity check of
the labels. If you skip the integrity check, you get a 10x speed up:</p>
<pre>&gt;&gt;&gt; timeit la.larry(arr, [idx1, idx2], integrity=False)
    1000000 loops, best of 3: 1.33 us per loop</pre></div>
<div class="section" id="tabular-data-mutability">
<h4>Tabular data, mutability</h4>
<p>Many statistical data sets arrive in tabular (2D) form-- typically a collection of vectors with associated labels. R provides the mutable data.frame class:</p>
<pre>&gt; df &lt;- data.frame(a=rnorm(5), b=rnorm(5))
&gt; df
           a           b
1 -0.4454339 -0.87899052
2  0.1119211  0.08378914
3  0.5823613  1.51314787
4 -0.4235883  1.51682599
5 -0.4429238 -1.86833929
&gt; df$a
[1] -0.4454339  0.1119211  0.5823613 -0.4235883 -0.4429238
&gt; df$c &lt;- 1
&gt; df
           a           b c
1 -0.4454339 -0.87899052 1
2  0.1119211  0.08378914 1
3  0.5823613  1.51314787 1
4 -0.4235883  1.51682599 1
5 -0.4429238 -1.86833929 1</pre><p>For users of other statistical environments, I'd be interested to hear about the tabular data structures and what they can do. Is such mutability useful? I've found it quite useful in cases like this. The R data.frame does not provide any sort of row-oriented data alignment (see below), but it's worth asking what are the features of such a 2D data structure that are the most useful.</p>
<p>The pandas code for the above is nearly identical, with pythonic notation of course:</p>
<pre>In [22]: df = DataFrame({'a' : randn(5), 'b' : randn(5)})

In [23]: df
Out[23]:
     a              b
0    -1.894         -1.373
1    -0.8486        -0.5785
2    1.838          -3.761
3    -0.6144        -0.7812
4    0.8473         0.9544


In [24]: df['a']
Out[24]:
0    -1.89423416608
1    -0.848596359606
2    1.83799383312
3    -0.614350513146
4    0.84729188782

In [25]: df['c'] = 1

In [26]: df
Out[26]:
     a              b              c
0    -1.894         -1.373         1
1    -0.8486        -0.5785        1
2    1.838          -3.761         1
3    -0.6144        -0.7812        1
4    0.8473         0.9544         1</pre><p>In the context of misaligned data, I've seen a lot of pandas users use DataFrame purely as a container for aligning labeled data:</p>
<pre>In [74]: df
Out[74]:
                       A              B
2000-01-03 00:00:00    -0.2306        0.3456
2000-01-04 00:00:00    -0.882         -0.1626
2000-01-05 00:00:00    0.2474         -0.1887
2000-01-06 00:00:00    -0.2704        0.1398
2000-01-07 00:00:00    1.498          1.628
2000-01-10 00:00:00    -1.645         0.09256
2000-01-11 00:00:00    0.5666         -1.128
2000-01-12 00:00:00    -0.5082        -0.5381
2000-01-13 00:00:00    0.2205         -0.5728
2000-01-14 00:00:00    -0.4916        -0.3333


In [76]: s
Out[76]:
2000-01-03 00:00:00    -0.115323455775
2000-01-04 00:00:00    -0.441017336819
2000-01-05 00:00:00    0.123677568341
2000-01-06 00:00:00    -0.135191054412
2000-01-07 00:00:00    0.749180511001
2000-01-10 00:00:00    -0.822250171143
2000-01-11 00:00:00    0.283300117597
2000-01-12 00:00:00    -0.254115521874

In [77]: df['C'] = s

In [78]: df
Out[78]:
                       A              B              C
2000-01-03 00:00:00    -0.2306        0.3456         -0.1153
2000-01-04 00:00:00    -0.882         -0.1626        -0.441
2000-01-05 00:00:00    0.2474         -0.1887        0.1237
2000-01-06 00:00:00    -0.2704        0.1398         -0.1352
2000-01-07 00:00:00    1.498          1.628          0.7492
2000-01-10 00:00:00    -1.645         0.09256        -0.8223
2000-01-11 00:00:00    0.5666         -1.128         0.2833
2000-01-12 00:00:00    -0.5082        -0.5381        -0.2541
2000-01-13 00:00:00    0.2205         -0.5728        NaN
2000-01-14 00:00:00    -0.4916        -0.3333        NaN</pre><p>To combine two larrys, use <strong>merge</strong>:</p>
<pre>&gt;&gt; lar1 = larry(randn(5,2))
&gt;&gt; lar2 = larry(randn(2,1), [[0, 4], ['c']])

&gt;&gt; lar1.merge(lar2)
label_0
    0
    1
    2
    3
    4
label_1
    0
    1
    c
x
array([[ 0.19271985,  0.38086157,  0.89416946],
       [ 0.17987281, -0.20143654,         NaN],
       [ 0.56567726,  2.13787551,         NaN],
       [-1.92165255,  0.22968882,         NaN],
       [ 1.14440607,  0.07242789, -0.56150006]])</pre><p>If the two larrys overlap, you can use the update option:</p>
<pre>&gt;&gt; lar3 = larry(np.ones((2,1)), [[0, 4], [0]])
&gt;&gt; lar1.merge(lar3, update=True)
label_0
    0
    1
    2
    3
    4
label_1
    0
    1
x
array([[ 1.        ,  0.38086157],
       [ 0.17987281, -0.20143654],
       [ 0.56567726,  2.13787551],
       [-1.92165255,  0.22968882],
       [ 1.        ,  0.07242789]])</pre></div>
<div class="section" id="data-alignment">
<h4>Data alignment</h4>
<blockquote>
<ul class="simple">
<li>Union versus intersection of data labels</li><li>Performance for differently-indexed data</li></ul>
</blockquote>
<p>Here is a pretty pathological but realistic example:</p>
<pre># Setup
import numpy as np
import pandas
import la
N = 10000
arr1 = np.random.randn(N)
arr2 = np.random.randn(N)
idx1 = range(N)
idx2 = range(N)[::-1]

# pandas
series1 = pandas.Series(arr1, index=idx1)
series2 = pandas.Series(arr2, index=idx2)

# larry
lar1 = la.larry(arr1, [idx1])
lar2 = la.larry(arr2, [idx2])</pre><p>Here is with latest svn/bzr trunks on 5/30/10:</p>
<pre># aligned
In [5]: timeit series1 + serie1
10000 loops, best of 3: 36.4 us per loop
In [6]: timeit lar1 + lar1
10000 loops, best of 3: 72.5 us per loop

# unaligned
In [9]: timeit series1 + series2
100 loops, best of 3: 2.72 ms per loop
In [8]: timeit lar1 + lar2
100 loops, best of 3: 4.97 ms per loop</pre><p>A 2d example:</p>
<pre># Setup
import numpy as np
import pandas
import la
N = 1000
arr1 = np.random.randn(N, N)
arr2 = np.random.randn(N, N)
idx1 = range(N)
idx2 = range(N)[::-1]

# pandas
dma1 = pandas.DataMatrix(arr1, idx1, idx1)
dma2 = pandas.DataMatrix(arr2, idx2, idx2)

# larry
lar1 = la.larry(arr1, [idx1, idx1])
lar2 = la.larry(arr2, [idx2, idx2])</pre><p>Here is with latest svn/bzr trunks on 5/30/10:</p>
<pre># aligned
&gt;&gt; timeit dma1 + dma1
100 loops, best of 3: 16 ms per loop
&gt;&gt; timeit lar1 + lar1
100 loops, best of 3: 15.9 ms per loop

# unaligned
&gt;&gt; timeit dma1 + dma2
10 loops, best of 3: 93.5 ms per loop
&gt;&gt; timeit lar1 + lar2
10 loops, best of 3: 91.7 ms per loop</pre></div>
<div class="section" id="reduction-operations">
<h4>Reduction operations</h4>
<p>Find the maximum value in a 2d data object of shape (1000, 1000):</p>
<pre>import pandas
import la

N = 1000
arr = np.random.rand(N, N)
dma = pandas.DataMatrix(arr, range(N), range(N))
lar = la.larry(arr)

# max

dma.max().max()
0.99999943789619117
lar.max()
0.99999943789619117

&gt;&gt; timeit dma.max().max()
10 loops, best of 3: 18 ms per loop
&gt;&gt; timeit lar.max()
100 loops, best of 3: 14.1 ms per loop
&gt;&gt; timeit np.nanmax(arr)
100 loops, best of 3: 14.1 ms per loop</pre></div>
<div class="section" id="io">
<h4>IO</h4>
<p>Users of data objects often need the ability to quickly archive their data. Here is the time taken to save and load two data objects of shape (N, N):</p>
<p>Could someone run this benchmark on a Linux machine with NumPy &gt; 1.3? I (Wes) ran these on Windows and I don't trust the OS.</p>
<pre>In [8]: roundtrip_archive(100)
Numpy (npz)    0.0107 seconds
larry (HDF5)   0.0064 seconds
pandas (HDF5)  0.0050 seconds

In [9]: roundtrip_archive(500)
Numpy (npz)    0.1026 seconds
larry (HDF5)   0.0908 seconds
pandas (HDF5)  0.0836 seconds

In [10]: roundtrip_archive(1000)
Numpy (npz)    0.5945 seconds
larry (HDF5)   0.3517 seconds
pandas (HDF5)  0.2611 seconds

In [11]: roundtrip_archive(2000, iterations=2)
Numpy (npz)    4.6487 seconds
larry (HDF5)   0.8843 seconds
pandas (HDF5)  0.7653 seconds

In [12]: roundtrip_archive(4000, iterations=1)
Numpy (npz)   19.7412 seconds
larry (HDF5)   2.9064 seconds
pandas (HDF5)  3.3371 seconds</pre><p>And here is the code used:</p>
<p>This needs pandas r180 and PyTables.</p>
<pre>import time, os
import numpy as np

import la
import pandas

def timeit(f, iterations):
    start = time.clock()

    for i in xrange(iterations):
        f()

    return time.clock() - start

def roundtrip_archive(N, iterations=10):

    # Create data
    arr = np.random.randn(N, N)
    lar = la.larry(arr)
    dma = pandas.DataMatrix(arr, range(N), range(N))

    # filenames
    filename_numpy = 'c:/temp/numpy.npz'
    filename_larry = 'c:/temp/archive.hdf5'
    filename_pandas = 'c:/temp/pandas_tmp'

    # Delete old files
    try:
        os.unlink(filename_numpy)
    except:
        pass
    try:
        os.unlink(filename_larry)
    except:
        pass
    try:
        os.unlink(filename_pandas)
    except:
        pass

    # Time a round trip save and load
    numpy_f = lambda: numpy_roundtrip(filename_numpy, arr, arr)
    numpy_time = timeit(numpy_f, iterations) / iterations

    larry_f = lambda: larry_roundtrip(filename_larry, lar, lar)
    larry_time = timeit(larry_f, iterations) / iterations

    pandas_f = lambda: pandas_roundtrip(filename_pandas, dma, dma)
    pandas_time = timeit(pandas_f, iterations) / iterations

    print 'Numpy (npz)   %7.4f seconds' % numpy_time
    print 'larry (HDF5)  %7.4f seconds' % larry_time
    print 'pandas (HDF5) %7.4f seconds' % pandas_time

def numpy_roundtrip(filename, arr1, arr2):
    np.savez(filename, arr1=arr1, arr2=arr2)
    npz = np.load(filename)
    arr1 = npz['arr1']
    arr2 = npz['arr2']

def larry_roundtrip(filename, lar1, lar2):
    io = la.IO(filename)
    io['lar1'] = lar1
    io['lar2'] = lar2
    lar1 = io['lar1']
    lar2 = io['lar2']

def pandas_roundtrip(filename, dma1, dma2):
    from pandas.io.pytables import HDFStore
    store = HDFStore(filename)
    store['dma1'] = dma1
    store['dma2'] = dma2
    dma1 = store['dma1']
    dma2 = store['dma2']

def pandas_roundtrip_pickle(filename, dma1, dma2):
    dma1.save(filename)
    dma1 = pandas.DataMatrix.load(filename)
    dma2.save(filename)
    dma2 = pandas.DataMatrix.load(filename)</pre><p>Sometimes you only want to load a small part of a large data object from your archive. larry supports loading pieces of a data object. Here are some examples:</p>
<pre>io['lar2'][:,-1]
io['lar2'][0,:]</pre></div>
<div class="section" id="joining-merging-data-sets">
<h4>Joining / merging data sets</h4>
<p>In pandas, it's very similar to elsewhere</p>
<pre>In [65]: df1
Out[65]:
                       A              B
2000-01-03 00:00:00    -0.1174        -0.941
2000-01-04 00:00:00    -0.6034        -0.008094
2000-01-05 00:00:00    -0.3816        -0.9338
2000-01-06 00:00:00    -0.3298        -0.9548
2000-01-07 00:00:00    0.9576         0.4652
2000-01-10 00:00:00    -0.7208        -1.131
2000-01-11 00:00:00    1.568          0.8498
2000-01-12 00:00:00    0.3717         -0.2323
2000-01-13 00:00:00    -1.428         -1.997
2000-01-14 00:00:00    -1.084         -0.271

In [67]: df2
Out[67]:
                       C              D
2000-01-03 00:00:00    0.2833         -0.1937
2000-01-05 00:00:00    1.868          1.207
2000-01-07 00:00:00    -0.8586        -0.7367
2000-01-11 00:00:00    2.121          0.9104
2000-01-13 00:00:00    0.7856         0.9063


In [68]: df1.join(df2)
Out[68]:
                       A              B              C              D
2000-01-03 00:00:00    -0.1174        -0.941         0.2833         -0.1937
2000-01-04 00:00:00    -0.6034        -0.008094      NaN            NaN
2000-01-05 00:00:00    -0.3816        -0.9338        1.868          1.207
2000-01-06 00:00:00    -0.3298        -0.9548        NaN            NaN
2000-01-07 00:00:00    0.9576         0.4652         -0.8586        -0.7367
2000-01-10 00:00:00    -0.7208        -1.131         NaN            NaN
2000-01-11 00:00:00    1.568          0.8498         2.121          0.9104
2000-01-12 00:00:00    0.3717         -0.2323        NaN            NaN
2000-01-13 00:00:00    -1.428         -1.997         0.7856         0.9063
2000-01-14 00:00:00    -1.084         -0.271         NaN            NaN

In [70]: df1.join(df2, how='inner')
Out[70]:
                       A              B              C              D
2000-01-03 00:00:00    -0.1174        -0.941         0.2833         -0.1937
2000-01-05 00:00:00    -0.3816        -0.9338        1.868          1.207
2000-01-07 00:00:00    0.9576         0.4652         -0.8586        -0.7367
2000-01-11 00:00:00    1.568          0.8498         2.121          0.9104
2000-01-13 00:00:00    -1.428         -1.997         0.7856         0.9063</pre><p>The index (row labels) are the default key for joining, but a column can also be used for a similar SQL-like join:</p>
<pre>In [73]: df2
Out[73]:
                       C              D              key
2000-01-03 00:00:00    0.2833         -0.1937        0
2000-01-05 00:00:00    1.868          1.207          1
2000-01-07 00:00:00    -0.8586        -0.7367        0
2000-01-11 00:00:00    2.121          0.9104         1
2000-01-13 00:00:00    0.7856         0.9063         0


In [74]: df3 = DataFrame({'code' : {0 : 'foo', 1 : 'bar'}})

In [75]: df3
Out[75]:
     code
0    foo
1    bar


In [76]: df2.join(df3, on='key')
Out[76]:
                       C              D              code           key
2000-01-03 00:00:00    0.2833         -0.1937        foo            0
2000-01-05 00:00:00    1.868          1.207          bar            1
2000-01-07 00:00:00    -0.8586        -0.7367        foo            0
2000-01-11 00:00:00    2.121          0.9104         bar            1
2000-01-13 00:00:00    0.7856         0.9063         foo            0</pre></div>
<div class="section" id="groupby-type-operations">
<h4>Groupby-type operations</h4>
</div>
<div class="section" id="time-series-date-functionality">
<h4>Time series / date functionality</h4>
</div>
<div class="section" id="handling-missing-data">
<h4>Handling missing data</h4>
</div>
<div class="section" id="statistics-in-computational-biology-and-bioinformatics">
<h4>Statistics in computational biology and bioinformatics</h4>
<p>I am writing here in response to Vincent Davis' message on the Biopython mailing list about feedback on statistical data structure design issues in biopython. While I have been a Biopython developer for many years, different users have different needs and perspectives, so what I write here is just my personal opinion rather than an official position of the Biopython consortium.</p>
<p>With respect to Python/NumPy/SciPy, computational biology and bioinformatics is different from other numerical sciences in three important ways:</p>
<blockquote>
<ul class="simple">
<li>Bioinformatics is dominated by Perl, and therefore people new to bioinformatics tend to choose Perl as a default rather than Python. Many people do their statistical analysis by a combination of Perl and R. For us in Biopython this means that we should make using Python as straightforward as possible.</li><li>People in bioinformatics come from a wide range of educational backgrounds. Some come from hard-core computational sciences such as physics, mathematics, or computer science, whereas others have a more traditional background in molecular biology and may not have a solid background in numerics. Some people starting in bioinformatics do not know what a compiler is (but otherwise they can be great scientists). Unfortunately, this means that tools available in SciPy are often not accessible simply because it is too difficult to install.</li><li>Some numerical libraries may be more important in bioinformatics than in other fields and vice versa. For example, to be able to calculate p-values it is important to have a library of special functions, whereas linear algebra may be less important.</li></ul>
</blockquote>
<p>What I really miss in NumPy are special functions and some basic statistical functions such as kernel density estimators. I know that these are exist in SciPy, but because of the second point this won't do me much good. I hope that some day at least the special functions can be made available in NumPy instead of SciPy.</p>
<p>See below for a discussion of MaskedArrays (numpy.ma)</p>
</div>
</div>
<div class="section" id="maskedarrays-commentary">
<h3>MaskedArrays commentary</h3>
<p>Masked arrays are slower than ndarrays since they do more. Out of the packages listed above, scikits.timeseries is the only one that uses MaskedArrays heavily.</p>
<p>Here's some performance for a 1000x10 array (first number is the time ratio, since my CPU is undoubtedly faster or slower than yours when you run these benchmarks):</p>
<table border="1" class="docutils">
<caption>Performance comparison</caption>
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Operation</th>
<th class="head">ndarray</th>
<th class="head">MaskedArray</th>
<th class="head">larry</th>
<th class="head">pandas</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>arr * 2</td>
<td>1.0 (17 us)</td>
<td>4.95 (84.2us)</td>
<td>1.94 (32.9 us)</td>
<td>1.85 (31.6us)</td>
</tr>
<tr><td>arr * arr</td>
<td>1.0 (15.9 us)</td>
<td>6.42 (102us)</td>
<td>1.88 (29.9 us)</td>
<td>1.99 (31.7us)</td>
</tr>
</tbody>
</table>
<p>code for these data structures</p>
<pre>arr = randn(1000, 10)
marr = np.ma.masked_array(arr)
larr = larry(arr)
parr = DataMatrix(arr, range(1000), range(10))</pre><p>The slowdown for using MaskedArrays does not seem acceptable for general purpose use-- however in applications where one needs to be able to distinguish between NaN (missing) and NaN (you took sqrt(-1)) then perhaps they should be used. But to pay 4-7x cost for every operation seems excessive.</p>
</div>
<span class="anchor" id="line-722"></span><span class="anchor" id="bottom"></span></div><p id="pageinfo" class="info" lang="en" dir="ltr">SciPy: StatisticalDataStructures  (last edited 2015-10-24 17:48:26 by <span title="">anonymous</span>)</p>

<div id="pagebottom"></div>
</div>


<div id="footer">
<ul class="editbar"><li class="toggleCommentsButton" style="display:none;"><a href="#" class="nbcomment" onClick="toggleComments();return false;">Comments</a></li><li><a class="nbattachments" href="StatisticalDataStructures37dc.html?action=AttachFile" rel="nofollow">Attachments</a></li><li>
<form class="actionsmenu" method="GET" action="../external.html?link=http://localhost:8080/StatisticalDataStructures">
<div>
    <label>More Actions:</label>
    <select name="action"
        onchange="if ((this.selectedIndex != 0) &&
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="RenamePage" disabled class="disabled">Rename Page</option>
<option value="DeletePage" disabled class="disabled">Delete Page</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Subscribe User</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Remove Spam</option>
<option value="show" disabled class="disabled">Revert to this revision</option>
    </select>
    <input type="submit" value="Do">
    
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('More Actions:');
//-->
</script>
</form>
</li></ul>

<ul id="credits">
<li><a href="../external.html?link=http://moinmo.in/" title="This site uses the MoinMoin Wiki software.">MoinMoin Powered</a></li><li><a href="../external.html?link=http://moinmo.in/Python" title="MoinMoin is written in Python.">Python Powered</a></li><li><a href="../external.html?link=http://moinmo.in/GPL" title="MoinMoin is GPL licensed.">GPL licensed</a></li><li><a href="../external.html?link=http://validator.w3.org/check?uri=referer" title="Click here to validate this page.">Valid HTML 4.01</a></li>
</ul>


</div>
</body>

<!-- Mirrored from localhost:8080/StatisticalDataStructures by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 29 Oct 2015 20:32:31 GMT -->
</html>

