<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>

<!-- Mirrored from localhost:8080/MatrixIndexing by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 29 Oct 2015 20:27:10 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="edit_on_doubleclick" content="/">
<meta name="robots" content="index,nofollow">

<title>MatrixIndexing - SciPy</title>
<script type="text/javascript" src="moin_static197/common/js/common.js"></script>

<script type="text/javascript">
<!--
var search_hint = "Search";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="moin_static197/modern/css/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="moin_static197/modern/css/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="moin_static197/modern/css/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="moin_static197/modern/css/projection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="/moin_static197/modern/css/msie.css">
<![endif]-->


<link rel="alternate" title="SciPy: MatrixIndexing" href="../external.html?link=http://localhost:8080/MatrixIndexing?diffs=1&amp;show_att=1&amp;action=rss_rc&amp;unique=0&amp;page=MatrixIndexing&amp;ddiffs=1" type="application/rss+xml">


<link rel="Start" href="AllPages.html">
<link rel="Alternate" title="Wiki Markup" href="../external.html?link=http://localhost:8080/MatrixIndexing?action=raw">
<link rel="Alternate" media="print" title="Print View" href="../external.html?link=http://localhost:8080/MatrixIndexing?action=print">
<link rel="Search" href="FindPage.html">
<link rel="Index" href="TitleIndex.html">
<link rel="Glossary" href="WordIndex.html">
<link rel="Help" href="HelpOnFormatting.html">
</head>

<body  lang="en" dir="ltr">

<div id="header">


<form id="searchform" method="get" action="../external.html?link=http://localhost:8080/MatrixIndexing">
<div>
<input type="hidden" name="action" value="fullsearch">
<input type="hidden" name="context" value="180">
<label for="searchinput">Search:</label>
<input id="searchinput" type="text" name="value" value="" size="20"
    onfocus="searchFocus(this)" onblur="searchBlur(this)"
    onkeyup="searchChange(this)" onchange="searchChange(this)" alt="Search">
<input id="titlesearch" name="titlesearch" type="submit"
    value="Titles" alt="Search Titles">
<input id="fullsearch" name="fullsearch" type="submit"
    value="Text" alt="Search Full Text">
</div>
</form>
<script type="text/javascript">
<!--// Initialize search form
var f = document.getElementById('searchform');
f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
searchChange(e);
searchBlur(e);
//-->
</script>

<ul id="username"><li><a href="MatrixIndexing456e.html?action=login" id="login" rel="nofollow">Login</a></li></ul>
<div id="locationline">
<div id="interwiki"><span><a href="AllPages.html" rel="nofollow">SciPy</a></span></div>

<ul id="pagelocation">
<li><a class="backlink" href="AllPagesdd4d.html?action=fullsearch&amp;context=180&amp;value=linkto%3A%22MatrixIndexing%22" rel="nofollow" title="Click to do a full-text search for this title">MatrixIndexing</a></li>
</ul>

</div>


<ul id="navibar">
<li class="wikilink"><a href="RecentChanges.html">RecentChanges</a></li><li class="wikilink"><a class="nonexistent" href="FindPage.html">FindPage</a></li><li class="wikilink"><a class="nonexistent" href="HelpContents.html">HelpContents</a></li><li class="current"><a href="MatrixIndexing.html">MatrixIndexing</a></li>
</ul>

<div id="pageline"><hr style="display:none;"></div>

<ul class="editbar"><li class="toggleCommentsButton" style="display:none;"><a href="#" class="nbcomment" onClick="toggleComments();return false;">Comments</a></li><li><a class="nbattachments" href="MatrixIndexing37dc.html?action=AttachFile" rel="nofollow">Attachments</a></li><li>
<form class="actionsmenu" method="GET" action="../external.html?link=http://localhost:8080/MatrixIndexing">
<div>
    <label>More Actions:</label>
    <select name="action"
        onchange="if ((this.selectedIndex != 0) &&
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="RenamePage" disabled class="disabled">Rename Page</option>
<option value="DeletePage" disabled class="disabled">Delete Page</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Subscribe User</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Remove Spam</option>
<option value="show" disabled class="disabled">Revert to this revision</option>
    </select>
    <input type="submit" value="Do">
    
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('More Actions:');
//-->
</script>
</form>
</li></ul>

</div>

<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><p class="line867"><span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span><span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span><span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span><span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span><span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span><span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span><span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span><span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span><span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span><span class="anchor" id="line-28"></span><span class="anchor" id="line-29"></span><span class="anchor" id="line-30"></span><span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span><span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span><span class="anchor" id="line-35"></span><span class="anchor" id="line-36"></span><span class="anchor" id="line-37"></span><span class="anchor" id="line-38"></span><span class="anchor" id="line-39"></span><span class="anchor" id="line-40"></span><span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span><span class="anchor" id="line-43"></span><span class="anchor" id="line-44"></span><span class="anchor" id="line-45"></span><span class="anchor" id="line-46"></span><span class="anchor" id="line-47"></span><span class="anchor" id="line-48"></span><span class="anchor" id="line-49"></span><span class="anchor" id="line-50"></span><span class="anchor" id="line-51"></span><span class="anchor" id="line-52"></span><span class="anchor" id="line-53"></span><span class="anchor" id="line-54"></span><span class="anchor" id="line-55"></span><span class="anchor" id="line-56"></span><span class="anchor" id="line-57"></span><span class="anchor" id="line-58"></span><span class="anchor" id="line-59"></span><span class="anchor" id="line-60"></span><span class="anchor" id="line-61"></span><span class="anchor" id="line-62"></span><span class="anchor" id="line-63"></span><span class="anchor" id="line-64"></span><span class="anchor" id="line-65"></span><span class="anchor" id="line-66"></span><span class="anchor" id="line-67"></span><span class="anchor" id="line-68"></span><span class="anchor" id="line-69"></span><span class="anchor" id="line-70"></span><span class="anchor" id="line-71"></span><span class="anchor" id="line-72"></span><span class="anchor" id="line-73"></span><span class="anchor" id="line-74"></span><span class="anchor" id="line-75"></span><span class="anchor" id="line-76"></span><span class="anchor" id="line-77"></span><span class="anchor" id="line-78"></span><span class="anchor" id="line-79"></span><span class="anchor" id="line-80"></span><span class="anchor" id="line-81"></span><span class="anchor" id="line-82"></span><span class="anchor" id="line-83"></span><span class="anchor" id="line-84"></span><span class="anchor" id="line-85"></span><span class="anchor" id="line-86"></span><span class="anchor" id="line-87"></span><span class="anchor" id="line-88"></span><span class="anchor" id="line-89"></span><span class="anchor" id="line-90"></span><span class="anchor" id="line-91"></span><span class="anchor" id="line-92"></span><span class="anchor" id="line-93"></span><span class="anchor" id="line-94"></span><span class="anchor" id="line-95"></span><span class="anchor" id="line-96"></span><span class="anchor" id="line-97"></span><span class="anchor" id="line-98"></span><span class="anchor" id="line-99"></span><span class="anchor" id="line-100"></span><span class="anchor" id="line-101"></span><span class="anchor" id="line-102"></span><span class="anchor" id="line-103"></span><span class="anchor" id="line-104"></span><span class="anchor" id="line-105"></span><span class="anchor" id="line-106"></span><span class="anchor" id="line-107"></span><span class="anchor" id="line-108"></span><span class="anchor" id="line-109"></span><span class="anchor" id="line-110"></span><span class="anchor" id="line-111"></span><span class="anchor" id="line-112"></span><span class="anchor" id="line-113"></span><span class="anchor" id="line-114"></span><span class="anchor" id="line-115"></span><span class="anchor" id="line-116"></span><span class="anchor" id="line-117"></span><span class="anchor" id="line-118"></span><span class="anchor" id="line-119"></span><span class="anchor" id="line-120"></span><span class="anchor" id="line-121"></span><span class="anchor" id="line-122"></span><span class="anchor" id="line-123"></span><span class="anchor" id="line-124"></span><span class="anchor" id="line-125"></span><span class="anchor" id="line-126"></span><span class="anchor" id="line-127"></span><span class="anchor" id="line-128"></span><span class="anchor" id="line-129"></span><span class="anchor" id="line-130"></span><span class="anchor" id="line-131"></span><span class="anchor" id="line-132"></span><span class="anchor" id="line-133"></span><span class="anchor" id="line-134"></span><span class="anchor" id="line-135"></span><span class="anchor" id="line-136"></span><span class="anchor" id="line-137"></span><span class="anchor" id="line-138"></span><span class="anchor" id="line-139"></span><span class="anchor" id="line-140"></span><span class="anchor" id="line-141"></span><span class="anchor" id="line-142"></span><span class="anchor" id="line-143"></span><span class="anchor" id="line-144"></span><span class="anchor" id="line-145"></span><span class="anchor" id="line-146"></span><span class="anchor" id="line-147"></span><span class="anchor" id="line-148"></span><span class="anchor" id="line-149"></span><span class="anchor" id="line-150"></span><span class="anchor" id="line-151"></span><span class="anchor" id="line-152"></span><span class="anchor" id="line-153"></span><span class="anchor" id="line-154"></span><span class="anchor" id="line-155"></span><span class="anchor" id="line-156"></span><span class="anchor" id="line-157"></span><span class="anchor" id="line-158"></span><span class="anchor" id="line-159"></span><span class="anchor" id="line-160"></span><span class="anchor" id="line-161"></span><span class="anchor" id="line-162"></span><span class="anchor" id="line-163"></span><span class="anchor" id="line-164"></span><span class="anchor" id="line-165"></span><span class="anchor" id="line-166"></span><span class="anchor" id="line-167"></span><span class="anchor" id="line-168"></span><span class="anchor" id="line-169"></span><span class="anchor" id="line-170"></span><span class="anchor" id="line-171"></span><span class="anchor" id="line-172"></span><span class="anchor" id="line-173"></span><span class="anchor" id="line-174"></span><span class="anchor" id="line-175"></span><span class="anchor" id="line-176"></span><span class="anchor" id="line-177"></span><span class="anchor" id="line-178"></span><span class="anchor" id="line-179"></span><span class="anchor" id="line-180"></span><span class="anchor" id="line-181"></span><span class="anchor" id="line-182"></span><span class="anchor" id="line-183"></span><span class="anchor" id="line-184"></span><span class="anchor" id="line-185"></span><span class="anchor" id="line-186"></span><span class="anchor" id="line-187"></span><span class="anchor" id="line-188"></span><span class="anchor" id="line-189"></span><span class="anchor" id="line-190"></span><span class="anchor" id="line-191"></span><span class="anchor" id="line-192"></span><span class="anchor" id="line-193"></span><span class="anchor" id="line-194"></span><span class="anchor" id="line-195"></span><span class="anchor" id="line-196"></span><span class="anchor" id="line-197"></span><span class="anchor" id="line-198"></span><span class="anchor" id="line-199"></span><span class="anchor" id="line-200"></span><span class="anchor" id="line-201"></span><span class="anchor" id="line-202"></span><span class="anchor" id="line-203"></span><span class="anchor" id="line-204"></span><span class="anchor" id="line-205"></span><span class="anchor" id="line-206"></span><span class="anchor" id="line-207"></span><span class="anchor" id="line-208"></span><span class="anchor" id="line-209"></span><span class="anchor" id="line-210"></span><span class="anchor" id="line-211"></span><span class="anchor" id="line-212"></span><span class="anchor" id="line-213"></span><span class="anchor" id="line-214"></span><span class="anchor" id="line-215"></span><span class="anchor" id="line-216"></span><span class="anchor" id="line-217"></span><span class="anchor" id="line-218"></span><span class="anchor" id="line-219"></span><span class="anchor" id="line-220"></span><span class="anchor" id="line-221"></span><span class="anchor" id="line-222"></span><span class="anchor" id="line-223"></span><span class="anchor" id="line-224"></span><span class="anchor" id="line-225"></span><span class="anchor" id="line-226"></span><span class="anchor" id="line-227"></span><span class="anchor" id="line-228"></span><span class="anchor" id="line-229"></span><span class="anchor" id="line-230"></span><span class="anchor" id="line-231"></span><span class="anchor" id="line-232"></span><span class="anchor" id="line-233"></span><span class="anchor" id="line-234"></span><span class="anchor" id="line-235"></span><span class="anchor" id="line-236"></span><span class="anchor" id="line-237"></span><span class="anchor" id="line-238"></span><span class="anchor" id="line-239"></span><span class="anchor" id="line-240"></span><span class="anchor" id="line-241"></span><span class="anchor" id="line-242"></span><span class="anchor" id="line-243"></span><span class="anchor" id="line-244"></span><span class="anchor" id="line-245"></span><span class="anchor" id="line-246"></span><span class="anchor" id="line-247"></span><span class="anchor" id="line-248"></span><span class="anchor" id="line-249"></span><span class="anchor" id="line-250"></span><span class="anchor" id="line-251"></span><span class="anchor" id="line-252"></span><span class="anchor" id="line-253"></span><span class="anchor" id="line-254"></span><span class="anchor" id="line-255"></span><span class="anchor" id="line-256"></span><span class="anchor" id="line-257"></span><span class="anchor" id="line-258"></span><span class="anchor" id="line-259"></span><span class="anchor" id="line-260"></span><span class="anchor" id="line-261"></span><span class="anchor" id="line-262"></span><span class="anchor" id="line-263"></span><span class="anchor" id="line-264"></span><span class="anchor" id="line-265"></span><span class="anchor" id="line-266"></span><span class="anchor" id="line-267"></span><span class="anchor" id="line-268"></span><span class="anchor" id="line-269"></span><span class="anchor" id="line-270"></span><span class="anchor" id="line-271"></span><span class="anchor" id="line-272"></span><span class="anchor" id="line-273"></span><span class="anchor" id="line-274"></span><span class="anchor" id="line-275"></span><span class="anchor" id="line-276"></span><span class="anchor" id="line-277"></span><span class="anchor" id="line-278"></span><span class="anchor" id="line-279"></span><span class="anchor" id="line-280"></span><span class="anchor" id="line-281"></span><span class="anchor" id="line-282"></span><span class="anchor" id="line-283"></span><span class="anchor" id="line-284"></span><span class="anchor" id="line-285"></span><span class="anchor" id="line-286"></span><span class="anchor" id="line-287"></span><span class="anchor" id="line-288"></span><span class="anchor" id="line-289"></span><span class="anchor" id="line-290"></span><span class="anchor" id="line-291"></span><span class="anchor" id="line-292"></span><span class="anchor" id="line-293"></span><span class="anchor" id="line-294"></span><span class="anchor" id="line-295"></span><span class="anchor" id="line-296"></span><span class="anchor" id="line-297"></span><span class="anchor" id="line-298"></span><span class="anchor" id="line-299"></span><span class="anchor" id="line-300"></span><span class="anchor" id="line-301"></span><span class="anchor" id="line-302"></span><span class="anchor" id="line-303"></span><span class="anchor" id="line-304"></span><span class="anchor" id="line-305"></span><span class="anchor" id="line-306"></span><span class="anchor" id="line-307"></span><span class="anchor" id="line-308"></span><span class="anchor" id="line-309"></span><span class="anchor" id="line-310"></span><span class="anchor" id="line-311"></span><span class="anchor" id="line-312"></span><span class="anchor" id="line-313"></span><span class="anchor" id="line-314"></span><span class="anchor" id="line-315"></span><span class="anchor" id="line-316"></span><span class="anchor" id="line-317"></span><span class="anchor" id="line-318"></span><span class="anchor" id="line-319"></span><span class="anchor" id="line-320"></span><span class="anchor" id="line-321"></span><span class="anchor" id="line-322"></span><span class="anchor" id="line-323"></span><span class="anchor" id="line-324"></span><span class="anchor" id="line-325"></span><span class="anchor" id="line-326"></span><span class="anchor" id="line-327"></span><span class="anchor" id="line-328"></span><span class="anchor" id="line-329"></span><span class="anchor" id="line-330"></span><span class="anchor" id="line-331"></span><span class="anchor" id="line-332"></span><span class="anchor" id="line-333"></span><span class="anchor" id="line-334"></span><span class="anchor" id="line-335"></span><span class="anchor" id="line-336"></span><span class="anchor" id="line-337"></span><span class="anchor" id="line-338"></span><span class="anchor" id="line-339"></span><span class="anchor" id="line-340"></span><span class="anchor" id="line-341"></span><span class="anchor" id="line-342"></span><span class="anchor" id="line-343"></span><span class="anchor" id="line-344"></span><span class="anchor" id="line-345"></span><span class="anchor" id="line-346"></span><span class="anchor" id="line-347"></span><span class="anchor" id="line-348"></span><span class="anchor" id="line-349"></span><span class="anchor" id="line-350"></span><span class="anchor" id="line-351"></span><span class="anchor" id="line-352"></span><span class="anchor" id="line-353"></span><span class="anchor" id="line-354"></span><span class="anchor" id="line-355"></span><span class="anchor" id="line-356"></span><span class="anchor" id="line-357"></span><span class="anchor" id="line-358"></span><span class="anchor" id="line-359"></span><span class="anchor" id="line-360"></span><span class="anchor" id="line-361"></span><span class="anchor" id="line-362"></span><span class="anchor" id="line-363"></span><span class="anchor" id="line-364"></span><span class="anchor" id="line-365"></span><span class="anchor" id="line-366"></span><span class="anchor" id="line-367"></span><span class="anchor" id="line-368"></span><span class="anchor" id="line-369"></span><span class="anchor" id="line-370"></span><span class="anchor" id="line-371"></span><span class="anchor" id="line-372"></span><span class="anchor" id="line-373"></span><span class="anchor" id="line-374"></span><span class="anchor" id="line-375"></span><span class="anchor" id="line-376"></span><span class="anchor" id="line-377"></span><span class="anchor" id="line-378"></span><span class="anchor" id="line-379"></span><span class="anchor" id="line-380"></span><span class="anchor" id="line-381"></span><div class="section" id="introduction">
<h3>Introduction</h3>
<p>In NumPy 1.0.4 and earlier, matrices were treated as
containers of matrices rather than as containers of
1d arrays.  This leads to some behavior that is
surprising for new users and not useful to experienced
users.  Here are three example anomalies:</p>
<pre>&gt;&gt;&gt; x = np.mat('0 1;2 3')
&gt;&gt;&gt; x[0][0]         #anomaly #1
matrix([[0, 1]])
&gt;&gt;&gt; np.array([x,x]) #anomaly #2
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
ValueError: setting an array element with a sequence.
&gt;&gt;&gt; for row in x:   #anomaly #3
...  for item in row:
...   print item
...
[[0 1]]
[[2 3]]</pre><p>Anomaly #1 demonstrates a breakage of a fundamental expecation for indexing.
Example #3 demonstrates how this behavior currently undermines the generic use of iteration.
(In principle we could change <tt>__iter__</tt>,
at the cost of another deviation from array behavior.)
Anomaly #2 demonstrates that the current breakage in the behavior of iteration has implications for all kinds of code that should be functional but currently is not.</p>
<p>A number of proposals have surfaced to eliminate this odd behavior.
Unfortunately, some of them conflict with another behavior that some consider desirable,
that <tt>x[0] == x[0,:]</tt> <em>and</em> that <tt>x[0,:]</tt> is a matrix (i.e., 2d).</p>
<p>Note that NumPy indexing has none of these problems or inconsistencies.
A core to several proposals is therefore:
restore NumPy indexing to the matrix class,
but return matrices when the result is 2d.</p>
<p>However, quite a few people argue that <tt>x[0]</tt> should raise an error
(since matrix indexing should always be 2d).
At this point it appears that NumPy will have to pick two of
the three following matrix behaviors:</p>
<ul class="simple">
<li>non-scalar indexing returns a submatrix</li><li><tt>x[0][0]==x[0,0]</tt></li><li><tt>x[0]==x[0,:]</tt> and <tt>x[0,:]</tt> is a matrix.</li></ul>
<p>There appears to be wide but not unanimous agreement that <tt>x[0][0]==x[0,0]</tt> is a basic
expectation for the behavior of 2d array-like objects, and should not be broken.
(Some people argue that <tt>x[0]</tt> should raise an error for a matrix <tt>x</tt>, and one person even argued that this should be true for ndarrays as well.)
A summary of considerations can be found in the <a class="reference internal" href="#guidelines">Guidelines</a> section.
You can also skip to the <a class="reference internal" href="#list-of-proposals">List of Proposals</a>.</p>
<div class="section" id="core-questions">
<h4>Core Questions</h4>
<p>Two currently related (but potentially independent) questions are: what is <tt>x[0]</tt>,
and what objects are yielded by iteration over a matrix.</p>
<div class="section" id="what-is-x-0">
<h5>What is x[0]?</h5>
<p>Suppose <tt>x</tt> is a matrix, and I say <tt>v=A[0]</tt>.
What is <tt>v</tt>?</p>
<ol><li>If <tt>v</tt> is a 1d array, its behavior is known.
E.g., <tt>v[0]</tt> is the first element
and <tt>v[0,0]</tt> is an IndexError.
If we want to keep current behavior of submatrix extraction,
we give up <tt>x[0] == x[0,:]</tt>.
On the other hand, if we stick close to ndarray behavior,
<tt>x[0,:]</tt> should not return a matrix either!
(We should use the usual NumPy slicing instead: <tt>x[:1,:]</tt>.)</li><li>If <tt>v</tt> is a matrix, its behavior can be learned
by the experienced but breaks basic expectations
(e.g., the x[0][0] problem).</li><li>If <tt>v</tt> is a &quot;RowVector&quot; what behavior do we get?
Suppose the idea is that this will rescue
<tt>x[0][0]==x[0,0]</tt> <strong>and</strong> <tt>x[0]=x[0,:]</tt>.
Of course we must give up that <tt>x[0,:]</tt> is a submatrix.
(This may be the right thing to give up!)
Must <tt>v</tt> deviate from submatrix behavior in an important way?
Yes:  <tt>v[0][0]</tt> is an IndexError.
(Note that the same problem arises if we just override
<tt>__getitem__</tt> for the matrix class to special case
row  and column matrices.)
It seems that <tt>v</tt> is a lot like a 1d array.
Should it have other behavior that make it usable in
linear algebra?  Would any of these properties conflict
with the behavior of 1d arrays?  If so, is there any motivation
for such row vectors other than a desire to be able to use
single index rather than 2?</li></ol><p>Comment: currently access through iteration yields the same result
as access with a scalar index.  (While this could be changed,
the equivalence seems to be a good thing.) But since it is in
principle separable, there is a second question.</p>
</div>
<div class="section" id="id1">
<h5>What is x[0,:]?</h5>
<p>Currently x[0,:] returns a rank-two object, a matrix. Thus to extract element 2, one uses x[0,:][0,2]. This may break some code that assumes (for example) x[i,...] has rank one less than x. One argument for doing it this way is so that x[0,:] still has matrix-like &quot;*&quot; semantics.</p>
</div>
<div class="section" id="what-does-iteration-over-x-yield">
<h5>What Does Iteration Over x Yield?</h5>
<p>This question raises issues similar to the previous question.</p>
</div>
</div>
<div class="section" id="related-questions">
<h4>Related Questions</h4>
<p>1. For matrix x, should x[0].A[0] == x.A[0][0]?
That is, should the array attribute of a Row Vector or Column Vector be 1d?
The majority view at this point is &quot;yes&quot;, but some uncertainty has been expressed.</p>
<p>2. For matrix <tt>x</tt>, should <tt>x[0]</tt> be a 1d array,
a new vector object of some kind,
or a 2d submatrix?
(And in each case, should <tt>x[0]</tt> be equivalent to <tt>x[0,:]</tt>?)</p>
<blockquote>
<ul class="simple">
<li><tt>x[0]</tt> being a 1d array is behavior most like a 2d array (<strong>pro</strong>)</li><li><tt>x[0]</tt> being a 1d array is not convenient for linear algebra (although <tt>x[:1,:]</tt> would still be available) (<strong>con</strong>)</li><li>a new vector object adds complexity (<strong>con</strong>)</li><li>a new vector object would be convenient for linear algebra (<strong>pro</strong>)</li><li>a new vector object may mean more deviations from 2d array behavior (possible <strong>con</strong>)</li></ul>
</blockquote>
<p>Apparently this choice will involve tradeoffs.  Thus there are multiple proposals.</p>
</div>
<div class="section" id="list-of-proposals">
<h4>List of Proposals</h4>
<ol><li>Introduce separate Row- and ColumnVector objects, which behave like (1xN) and (Nx1) matrices.  Their elements can be indexed with a single element.  A Matrix becomes a container of Vectors.  For an example which explores whether there are advantages to this, see <a class="reference external" href="ConjugateGradientExample.html">ConjugateGradientExample</a>.</li><li>Let a matrix be a container of 1d arrays.</li><li>Introduce a vector object that is a subclass of matrix that handles scalar indexes differently when there is only one row or one column.  (No separate row and column vector objects.)</li><li>Take a new approach to matrices: add meta information to arrays to make them look more like tensors, and then construct a matrix class as a minimal deviation from these tensor-like arrays.</li><li>Make <tt>x[0]</tt> raise an error, but add <tt>row</tt> and <tt>column</tt> attributes to allow iteration across rows or columns.  (Here the rows and columns are interpreted as submatrices, so iteration is yielding objects of the matrix type.)  Override <tt>__iter__</tt> so that iteration on a matrix yields 1d arrays, just like with an ndarray.  This keeps behavior close to ndarray behavior but adds attributes that allow for iteration over rows or columns of a matrix (as submatrices).  Indexing with non-scalar indexes should <em>always</em> yield a submatrix (e.g., <tt>x[0,:]</tt>).</li><li>Use ndarray-style indexing.  If the result would be a 2d array, return a matrix.  If the result would be 1d array, return a 1d array or possibly a new vector object.  (Note: this returns to ndarray style indexing and so gives up the current behavior that <tt>x[0,:]</tt> returns a matrix.)</li></ol><div class="section" id="background">
<h5>Background</h5>
<p>Something similar to proposal (3) was implemented in r5072,
but was reverted in r5084.
(The implied behavior that x[0][0] is a type error if x is a 1 by N matrix was considered untenable.)
Proposal (1) remains under active consideration.
Proposal (4) has not been fleshed out yet.</p>
<p>All proposals will eliminate the anomaly above.
Any option eventually implemented should do so as well.
Agreement on this appears general.</p>
<p>One of the proposals above is likely to be implemented in the long run.
They are not compatible, so a good decision needs to consider the
pros and cons of each approach.</p>
<p>A key question that seems likely to guide the decision is:
how will the choice of proposal affect the ability of
NumPy to maintain consistency between the behavior of
matrices and the behavior of sparse matrices.</p>
</div>
</div>
</div>
<div class="section" id="guidelines">
<h3>Guidelines</h3>
<ol><li>Subclasses of ndarray should introduce deviant behavior only for clear gains in functionality or ease of use.</li><li>Matrices and sparse matrices should behave consistently.</li><li>Matrices should facilitate linear algebra.  Specifically, they should should override the <tt>*</tt> and <tt>**</tt> operators as does the current matrix class, and they should allow convenient extraction of submatrices.</li><li>The following questions should be explicitly addressed:</li></ol><ul class="simple">
<li>what behavior allows the most generic code?</li><li>what behavior breaks fewest expectations?</li><li>what behavior is most useful?</li></ul>
<p>This seems to imply answers to the following questions (although agreement on this remains far from universal):</p>
<ol><li>Do we want to be able to extract a single row or column from a matrix, and have it be indexable like a 1-d object? (Answer: certainly yes for rows. Columns could be gotten from the transpose, e.g. <tt>x.T[0]</tt>, but see (3) below.  A 1d object is most useful, allows the most generic code, and breaks fewest expectations.)</li><li>Do we want to be able to do (1) without calling the Array attribute:  M.A[i]? (Yes: this is not less useful, allows the most generic code, and breaks fewest expectations.)</li><li>Do we want to have those 1-d objects to have an orientation so that they act like Row or Column vectors in linear algebra operations (and broadcasting)? (Unclear.  Most resulting functionality could be provided by <tt>rows</tt> and <tt>columns</tt> attributes that yield corresponding <strong>matrices</strong>.  The exception is access to elements by scalar indexing, but is this important? Maybe not.)</li><li>Do we want to require slice notation to get a submatrix that happens to have a single row or column? (Yes: this is slightly clumsier than current behavior for <em>this</em> purpose, but is consistent with ndarray indexing so that it breaks fewest expectations, and it allows the most generic code.)</li></ol><div class="section" id="proposal-1-introduce-row-and-columnvectors">
<h4>Proposal #1: Introduce Row- and ColumnVectors</h4>
<div class="section" id="rationalisation">
<h5>Rationalisation</h5>
<p>N-d arrays are organised in the following hierarchy:</p>
<blockquote>
<ul class="simple">
<li>N-d array</li><li>(N-1)-d array</li><li>...</li><li>1-d array</li><li>scalar</li></ul>
</blockquote>
<p>In other words, an N-dimensional ndarray is a container of (N-1)-dimensional ndarrays.  This holds down to N==1, where the ndarray contains scalars.</p>
<p>This proposal (#1) suggests a similar hierarchy for matrices:</p>
<blockquote>
<ul class="simple">
<li>Matrix</li><li>RowVector or ColumnVector</li><li>scalar</li></ul>
</blockquote>
<p>This hierarchy ensures a minimum of behavioral differences between ndarrays and Matrices.  Among others, the following expression would yield the same results for ndarrays and Matrices:</p>
<blockquote>
<ul class="simple">
<li>x[0] == x[0,:]</li><li>x[0][0]</li><li>x[0,:][0]</li><li>x[:,0][0]</li></ul>
</blockquote>
<p>Note that any slice returning a vector preserves its orientation, like the current Matrix implementation does:</p>
<blockquote>
<ul class="simple">
<li>x[0,:] -&gt; Row Vector</li><li>x[:,0] -&gt; Column Vector</li></ul>
</blockquote>
<p>This behavior is intentionally different from ndarrays.</p>
</div>
<div class="section" id="unanswered-question">
<h5>Unanswered Question</h5>
<p>See <a class="reference internal" href="#related-questions">Related Questions</a> #1 above.</p>
</div>
<div class="section" id="proposal-drawbacks">
<h5>Proposal Drawbacks</h5>
<blockquote>
<ul class="simple">
<li>Deviations from the behavior of ndarrays. Specifically, iteration over a matrix will not yield 1d NumPy arrays. (Also, see the <a class="reference internal" href="#unanswered-question">Unanswered Question</a> above.</li><li>Inconsistency in the indexing style for producing row vectors and column vectors</li><li>Loss of a standard way to extract a row or a column as a submatrix (rather than a vector)</li><li>No clear gain in functionality over the simpler proposal 2.  (But see <a class="reference internal" href="#functionality-gains">Functionality Gains</a> below.)</li><li>Increase in complexity</li></ul>
</blockquote>
</div>
<div class="section" id="functionality-gains">
<h5>Functionality Gains</h5>
<p>Because this proposal is more complex, it should be implemented only if
there are clear gains in functionality.</p>
<p>One possible gain has been suggested: it may prove easier to keep
matrix behavior compatible with sparse matrix behavior under this proposal.
(This suggestion needs to be fleshed out.)</p>
<p>One gain from this approach relative to say proposal #6 is that we can
continue to simply express the quadratic <tt>x[0,:]*A*x[:,0]</tt> in exactly
the same way, which is likely to be intuitive to beginners.</p>
</div>
<div class="section" id="an-alternative-approach-to-the-same-functionality">
<h5>An Alternative Approach to the Same Functionality</h5>
<p>The goals of this proposal <em>might</em> be met by introducting new attributes (perhaps <tt>rows</tt> and <tt>columns</tt>, allowing iteration over the matrix rows and columns.  This appears to be a more consistent way to get the same functionality.</p>
</div>
</div>
<div class="section" id="proposal-2">
<h4>Proposal 2</h4>
<p>A 2D matrix becomes a container of 1D arrays.
This has been superceded by <a class="reference internal" href="#proposal-6">Proposal 6</a>.</p>
</div>
<div class="section" id="proposal-3">
<h4>Proposal 3</h4>
<p><strong>Proposal</strong>: Special Indexing for Matrices that are Row or Column Vectors</p>
<div class="section" id="implementation">
<h5>Implementation</h5>
<p>This might involve no more than a change in <tt>__getitem__</tt> so that the matrix
tests its shape before processing a scalar index.</p>
</div>
<div class="section" id="drawbacks">
<h5>Drawbacks</h5>
<p>This introduces an obvious indexing inconsistency, making general code difficult.</p>
</div>
</div>
<div class="section" id="proposal-4">
<h4>Proposal 4</h4>
<p><strong>Proposal</strong>: Meta Data to Support Tensor-Like Arrays</p>
<div class="section" id="details">
<h5>Details</h5>
<p>Currently missing.</p>
</div>
</div>
<div class="section" id="proposal-5">
<h4>Proposal 5</h4>
<p>Add new attributes for row and column access, which will return <strong>matrices</strong> (i.e., 2d).</p>
<ol><li>Add a <tt>rows</tt> method and a <tt>cols</tt> method for returning iterators on the rows and columns.</li><li>Also allow access to specified rows.</li></ol><p>The <tt>rows</tt> and <tt>cols</tt> methods would render the following code valid:</p>
<pre>for row in x.rows():
  for col in row.cols():
    print col</pre><p>and is thus a alternative to the currently not working:</p>
<pre>for row in x:
   for col in row:
      print col</pre><p>which currently gives a unexpected result.</p>
<p>Comment: with these methods in place, there seems little reason not to
let iteration over a matrix yield 1d arrays, which keeps matrix behavior
closer to ndarray behavior.  This is good, since it means much array
code can handle matrices without any special handling.</p>
<div class="section" id="access-to-specified-rows-columns">
<h5>Access to Specified Rows/Columns</h5>
<p>One possibility is to let the <tt>rows</tt> and <tt>cols</tt> methods take an argument
with a default of None.  The default is to return an iterator over the rows/columns.
An iterator over subsets of rows/columns could be specified with a sequence.
A single row/column could be specified with a scalar argument.</p>
</div>
</div>
<div class="section" id="proposal-6">
<h4>Proposal 6</h4>
<p>Use standard ndarray indexing syntax.  If this would produce a 2d array, return a matrix.
Otherwise, return an array.</p>
<div class="section" id="what-changes">
<h5>What changes</h5>
<blockquote>
<ul class="simple">
<li>iteration over a matrix yields 1d arrays, just like iteration over a 2d array</li><li>x[i] and x.A[i] are identical for integer i (which fixes the example anomalies in the <a class="reference internal" href="#introduction">Introduction</a>).</li></ul>
</blockquote>
</div>
<div class="section" id="why-this-is-desirable">
<h5>Why this is desirable</h5>
<blockquote>
<ul class="simple">
<li>the resulting matrix behavior is more natural and less surprising to new users</li><li>behavioral consistency across array-like objects is a good thing when possible.  On this principle, matrix behavior should deviate from 2d array behavior only when there is a clear increase in functionality.  The current matrix response to a scalar index is a deviation from 2d array behavior that provides no additional functionality to experienced users and is surprising to new users.</li></ul>
</blockquote>
<p>Disadvantages:</p>
<ul class="simple">
<li>the quadratic <tt>x[0,:]*A*x[:,0]</tt> would have to be written in another way, e.g.,<ol><li><tt>x[0:1,:]*A*x[:,0:1]</tt></li><li><tt>x[[0],:]*A*x[:,[0]]</tt></li></ol></li><li><tt>x[idx,:]</tt> returns a different type depending on the type of idx<ol><li>if idx is a scalar, the result is a 1d array</li><li>if idx is a list or array, the result is a matrix</li></ol></li></ul>
<p>Advantages:</p>
<ul class="simple">
<li>strongly ensures viability of generic code</li></ul>
<p>Comment: <a class="reference internal" href="#proposal-5">Proposal 5</a> and <a class="reference internal" href="#proposal-6">Proposal 6</a> appear to be complements.</p>
</div>
</div>
</div>
<span class="anchor" id="line-382"></span><span class="anchor" id="line-383"></span><p class="line867"><hr /><p class="line874"> <span class="anchor" id="line-384"></span><a href="ProposedEnhancements.html">ProposedEnhancements</a> <span class="anchor" id="line-385"></span><span class="anchor" id="bottom"></span></div><p id="pageinfo" class="info" lang="en" dir="ltr">SciPy: MatrixIndexing  (last edited 2015-10-24 17:48:26 by <span title="">anonymous</span>)</p>

<div id="pagebottom"></div>
</div>


<div id="footer">
<ul class="editbar"><li class="toggleCommentsButton" style="display:none;"><a href="#" class="nbcomment" onClick="toggleComments();return false;">Comments</a></li><li><a class="nbattachments" href="MatrixIndexing37dc.html?action=AttachFile" rel="nofollow">Attachments</a></li><li>
<form class="actionsmenu" method="GET" action="../external.html?link=http://localhost:8080/MatrixIndexing">
<div>
    <label>More Actions:</label>
    <select name="action"
        onchange="if ((this.selectedIndex != 0) &&
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="RenamePage" disabled class="disabled">Rename Page</option>
<option value="DeletePage" disabled class="disabled">Delete Page</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Subscribe User</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Remove Spam</option>
<option value="show" disabled class="disabled">Revert to this revision</option>
    </select>
    <input type="submit" value="Do">
    
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('More Actions:');
//-->
</script>
</form>
</li></ul>

<ul id="credits">
<li><a href="../external.html?link=http://moinmo.in/" title="This site uses the MoinMoin Wiki software.">MoinMoin Powered</a></li><li><a href="../external.html?link=http://moinmo.in/Python" title="MoinMoin is written in Python.">Python Powered</a></li><li><a href="../external.html?link=http://moinmo.in/GPL" title="MoinMoin is GPL licensed.">GPL licensed</a></li><li><a href="../external.html?link=http://validator.w3.org/check?uri=referer" title="Click here to validate this page.">Valid HTML 4.01</a></li>
</ul>


</div>
</body>

<!-- Mirrored from localhost:8080/MatrixIndexing by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 29 Oct 2015 20:27:12 GMT -->
</html>

