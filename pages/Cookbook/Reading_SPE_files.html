<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>

<!-- Mirrored from localhost:8080/Cookbook/Reading_SPE_files by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 29 Oct 2015 20:22:07 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="edit_on_doubleclick" content="/">
<meta name="robots" content="index,nofollow">

<title>Cookbook/Reading_SPE_files - SciPy wiki dump</title>
<script type="text/javascript" src="../moin_static197/common/js/common.js"></script>

<script type="text/javascript">
<!--
var search_hint = "Search";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../moin_static197/modern/css/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="../moin_static197/modern/css/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="../moin_static197/modern/css/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="../moin_static197/modern/css/projection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="/moin_static197/modern/css/msie.css">
<![endif]-->


<link rel="alternate" title="SciPy: Cookbook/Reading_SPE_files" href="../../external.html?link=http://localhost:8080/Cookbook/Reading_SPE_files?diffs=1&amp;show_att=1&amp;action=rss_rc&amp;unique=0&amp;page=Cookbook%2FReading_SPE_files&amp;ddiffs=1" type="application/rss+xml">


<link rel="Start" href="../AllPages.html">
<link rel="Alternate" title="Wiki Markup" href="../../external.html?link=http://localhost:8080/Cookbook/Reading_SPE_files?action=raw">
<link rel="Alternate" media="print" title="Print View" href="../../external.html?link=http://localhost:8080/Cookbook/Reading_SPE_files?action=print">
<link rel="Up" href="../Cookbook.html">
<link rel="Appendix" title="lampe_dt.png" href="Reading_SPE_filesaadc.html?action=AttachFile&amp;do=view&amp;target=lampe_dt.png">
<link rel="Appendix" title="read_spe.zip" href="Reading_SPE_files942c.html?action=AttachFile&amp;do=view&amp;target=read_spe.zip">
<link rel="Search" href="../FindPage.html">
<link rel="Index" href="../TitleIndex.html">
<link rel="Glossary" href="../WordIndex.html">
<link rel="Help" href="../HelpOnFormatting.html">
</head>

<body  lang="en" dir="ltr"><div style="background: white; padding:2em;">This is an archival dump of old wiki content --- see <a href="http://scipy.org/">scipy.org</a> for current material.<br>Please see <a href="http://scipy-cookbook.readthedocs.org/">http://scipy-cookbook.readthedocs.org/</a></div>

<div id="header">


<form id="searchform" method="get" action="../../external.html?link=http://localhost:8080/Cookbook/Reading_SPE_files">
<div>
<input type="hidden" name="action" value="fullsearch">
<input type="hidden" name="context" value="180">
<label for="searchinput">Search:</label>
<input id="searchinput" type="text" name="value" value="" size="20"
    onfocus="searchFocus(this)" onblur="searchBlur(this)"
    onkeyup="searchChange(this)" onchange="searchChange(this)" alt="Search">
<input id="titlesearch" name="titlesearch" type="submit"
    value="Titles" alt="Search Titles">
<input id="fullsearch" name="fullsearch" type="submit"
    value="Text" alt="Search Full Text">
</div>
</form>
<script type="text/javascript">
<!--// Initialize search form
var f = document.getElementById('searchform');
f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
searchChange(e);
searchBlur(e);
//-->
</script>

<ul id="username"><li><a href="Reading_SPE_files456e.html?action=login" id="login" rel="nofollow">Login</a></li></ul>
<div id="locationline">
<div id="interwiki"><span><a href="../AllPages.html" rel="nofollow">SciPy</a></span></div>

<ul id="pagelocation">
<li><a href="../Cookbook.html">Cookbook</a></li><li><a class="backlink" href="Reading_SPE_filesfe50.html?action=fullsearch&amp;context=180&amp;value=linkto%3A%22Cookbook%2FReading_SPE_files%22" rel="nofollow" title="Click to do a full-text search for this title">Reading_SPE_files</a></li>
</ul>

</div>


<ul id="navibar">
<li class="wikilink"><a href="../RecentChanges.html">RecentChanges</a></li><li class="wikilink"><a class="nonexistent" href="../FindPage.html">FindPage</a></li><li class="wikilink"><a class="nonexistent" href="../HelpContents.html">HelpContents</a></li><li class="current"><a href="Reading_SPE_files.html">Reading_SPE_files</a></li>
</ul>

<div id="pageline"><hr style="display:none;"></div>

<ul class="editbar"><li class="toggleCommentsButton" style="display:none;"><a href="#" class="nbcomment" onClick="toggleComments();return false;">Comments</a></li><li><a class="nbattachments" href="Reading_SPE_files37dc.html?action=AttachFile" rel="nofollow">Attachments</a></li><li>
<form class="actionsmenu" method="GET" action="../../external.html?link=http://localhost:8080/Cookbook/Reading_SPE_files">
<div>
    <label>More Actions:</label>
    <select name="action"
        onchange="if ((this.selectedIndex != 0) &&
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="RenamePage" disabled class="disabled">Rename Page</option>
<option value="DeletePage" disabled class="disabled">Delete Page</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Subscribe User</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Remove Spam</option>
<option value="show" disabled class="disabled">Revert to this revision</option>
    </select>
    <input type="submit" value="Do">
    
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('More Actions:');
//-->
</script>
</form>
</li></ul>

</div>

<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><p class="line867">
<h1 id="Reading_SPE_file_from_CCD_camera">Reading SPE file from CCD camera</h1>
<span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><p class="line862">Some <a class="http" href="../../external.html?link=http://en.wikipedia.org/wiki/CCD_camera">charge-coupled device (CCD)</a> cameras (Princeton and like) produce SPE files. This page suggests how to read such binary files with Numpy but the code is not robust. The following code is only able to read files having the same format as the example, 'lampe_dt.spe' (unfortuanetly the only SPE file on the wiki).    <span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><p class="line867">
<h2 id="Loading_SPE_file_with_numpy">Loading SPE file with numpy</h2>
<span class="anchor" id="line-6"></span><p class="line874">Only Numpy is required for loading SPE file, the result will be an array made of colors. The image size is at position 42 and 656 and the data at 4100. There are then many other data in a SPE file header, one must be the data type (you are welcome to edit this page if you know where). Finally note that the image is always made of colors coded on unsigned integer of 16 bits but it might not be the case in your input file. <span class="anchor" id="line-7"></span><span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span><span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span><span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span><span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span><span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span><span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span><span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span><span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span><span class="anchor" id="line-28"></span><span class="anchor" id="line-29"></span><span class="anchor" id="line-30"></span><span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span><span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span><span class="anchor" id="line-35"></span><span class="anchor" id="line-36"></span><span class="anchor" id="line-37"></span><span class="anchor" id="line-38"></span><span class="anchor" id="line-39"></span><span class="anchor" id="line-40"></span><span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span><span class="anchor" id="line-43"></span><span class="anchor" id="line-44"></span><span class="anchor" id="line-45"></span><span class="anchor" id="line-46"></span><span class="anchor" id="line-47"></span><span class="anchor" id="line-48"></span><span class="anchor" id="line-49"></span><span class="anchor" id="line-50"></span><span class="anchor" id="line-51"></span><span class="anchor" id="line-52"></span><span class="anchor" id="line-53"></span><span class="anchor" id="line-54"></span><span class="anchor" id="line-55"></span><span class="anchor" id="line-1-1"></span><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
function isnumbered(obj) {
  return obj.childNodes.length && obj.firstChild.childNodes.length && obj.firstChild.firstChild.className == 'LineNumber';
}
function nformat(num,chrs,add) {
  var nlen = Math.max(0,chrs-(''+num).length), res = '';
  while (nlen>0) { res += ' '; nlen-- }
  return res+num+add;
}
function addnumber(did, nstart, nstep) {
  var c = document.getElementById(did), l = c.firstChild, n = 1;
  if (!isnumbered(c)) {
    if (typeof nstart == 'undefined') nstart = 1;
    if (typeof nstep  == 'undefined') nstep = 1;
    var n = nstart;
    while (l != null) {
      if (l.tagName == 'SPAN') {
        var s = document.createElement('SPAN');
        var a = document.createElement('A');
        s.className = 'LineNumber';
        a.appendChild(document.createTextNode(nformat(n,4,'')));
        a.href = '#' + did + '_' + n;
        s.appendChild(a);
        s.appendChild(document.createTextNode(' '));
        n += nstep;
        if (l.childNodes.length) {
          l.insertBefore(s, l.firstChild);
        }
        else {
          l.appendChild(s);
        }
      }
      l = l.nextSibling;
    }
  }
  return false;
}
function remnumber(did) {
  var c = document.getElementById(did), l = c.firstChild;
  if (isnumbered(c)) {
    while (l != null) {
      if (l.tagName == 'SPAN' && l.firstChild.className == 'LineNumber') l.removeChild(l.firstChild);
      l = l.nextSibling;
    }
  }
  return false;
}
function togglenumber(did, nstart, nstep) {
  var c = document.getElementById(did);
  if (isnumbered(c)) {
    remnumber(did);
  } else {
    addnumber(did,nstart,nstep);
  }
  return false;
}
</script>

<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_1">   1</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_1"></span><span class="anchor" id="line-1-2"></span><span class="Comment"># read_spe.py</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_2">   2</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_2"></span><span class="anchor" id="line-2-1"></span><span class="ResWord">import</span> <span class="ID">numpy</span> <span class="ResWord">as</span> <span class="ID">N</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_3">   3</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_3"></span><span class="anchor" id="line-3-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_4">   4</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_4"></span><span class="anchor" id="line-4-1"></span><span class="ResWord">class</span> <span class="ID">File</span>(<span class="ResWord">object</span>):</span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_5">   5</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_5"></span><span class="anchor" id="line-5-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_6">   6</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_6"></span><span class="anchor" id="line-6-1"></span>    <span class="ResWord">def</span> <span class="ID">__init__</span>(<span class="ResWord">self</span>, <span class="ID">fname</span>):</span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_7">   7</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_7"></span><span class="anchor" id="line-7-1"></span>        <span class="ResWord">self</span>.<span class="ID">_fid</span> = <span class="ResWord">open</span>(<span class="ID">fname</span>, <span class="String">'</span><span class="String">rb</span><span class="String">'</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_8">   8</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_8"></span><span class="anchor" id="line-8-1"></span>        <span class="ResWord">self</span>.<span class="ID">_load_size</span>()</span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_9">   9</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_9"></span><span class="anchor" id="line-9-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_10">  10</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_10"></span><span class="anchor" id="line-10-1"></span>    <span class="ResWord">def</span> <span class="ID">_load_size</span>(<span class="ResWord">self</span>):</span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_11">  11</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_11"></span><span class="anchor" id="line-11-1"></span>        <span class="ResWord">self</span>.<span class="ID">_xdim</span> = <span class="ID">N</span>.<span class="ID">int64</span>(<span class="ResWord">self</span>.<span class="ID">read_at</span>(<span class="Number">42</span>, <span class="Number">1</span>, <span class="ID">N</span>.<span class="ID">int16</span>)[<span class="Number">0</span>])</span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_12">  12</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_12"></span><span class="anchor" id="line-12-1"></span>        <span class="ResWord">self</span>.<span class="ID">_ydim</span> = <span class="ID">N</span>.<span class="ID">int64</span>(<span class="ResWord">self</span>.<span class="ID">read_at</span>(<span class="Number">656</span>, <span class="Number">1</span>, <span class="ID">N</span>.<span class="ID">int16</span>)[<span class="Number">0</span>])</span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_13">  13</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_13"></span><span class="anchor" id="line-13-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_14">  14</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_14"></span><span class="anchor" id="line-14-1"></span>    <span class="ResWord">def</span> <span class="ID">_load_date_time</span>(<span class="ResWord">self</span>):</span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_15">  15</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_15"></span><span class="anchor" id="line-15-1"></span>        <span class="ID">rawdate</span> = <span class="ResWord">self</span>.<span class="ID">read_at</span>(<span class="Number">20</span>, <span class="Number">9</span>, <span class="ID">N</span>.<span class="ID">int8</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_16">  16</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_16"></span><span class="anchor" id="line-16-1"></span>        <span class="ID">rawtime</span> = <span class="ResWord">self</span>.<span class="ID">read_at</span>(<span class="Number">172</span>, <span class="Number">6</span>, <span class="ID">N</span>.<span class="ID">int8</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_17">  17</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_17"></span><span class="anchor" id="line-17-1"></span>        <span class="ID">strdate</span> = <span class="String">'</span><span class="String">'</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_18">  18</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_18"></span><span class="anchor" id="line-18-1"></span>        <span class="ResWord">for</span> <span class="ID">ch</span> <span class="ResWord">in</span> <span class="ID">rawdate</span> :</span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_19">  19</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_19"></span><span class="anchor" id="line-19-1"></span>            <span class="ID">strdate</span> += <span class="ResWord">chr</span>(<span class="ID">ch</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_20">  20</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_20"></span><span class="anchor" id="line-20-1"></span>        <span class="ResWord">for</span> <span class="ID">ch</span> <span class="ResWord">in</span> <span class="ID">rawtime</span>:</span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_21">  21</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_21"></span><span class="anchor" id="line-21-1"></span>            <span class="ID">strdate</span> += <span class="ResWord">chr</span>(<span class="ID">ch</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_22">  22</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_22"></span><span class="anchor" id="line-22-1"></span>        <span class="ResWord">self</span>.<span class="ID">_date_time</span> = <span class="ID">time</span>.<span class="ID">strptime</span>(<span class="ID">strdate</span>,<span class="String">&quot;</span><span class="String">%d</span><span class="String">%</span><span class="String">b</span><span class="String">%</span><span class="String">Y</span><span class="String">%</span><span class="String">H</span><span class="String">%</span><span class="String">M</span><span class="String">%</span><span class="String">S</span><span class="String">&quot;</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_23">  23</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_23"></span><span class="anchor" id="line-23-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_24">  24</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_24"></span><span class="anchor" id="line-24-1"></span>    <span class="ResWord">def</span> <span class="ID">get_size</span>(<span class="ResWord">self</span>):</span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_25">  25</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_25"></span><span class="anchor" id="line-25-1"></span>        <span class="ResWord">return</span> (<span class="ResWord">self</span>.<span class="ID">_xdim</span>, <span class="ResWord">self</span>.<span class="ID">_ydim</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_26">  26</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_26"></span><span class="anchor" id="line-26-1"></span>        </span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_27">  27</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_27"></span><span class="anchor" id="line-27-1"></span>    <span class="ResWord">def</span> <span class="ID">read_at</span>(<span class="ResWord">self</span>, <span class="ID">pos</span>, <span class="ID">size</span>, <span class="ID">ntype</span>):</span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_28">  28</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_28"></span><span class="anchor" id="line-28-1"></span>        <span class="ResWord">self</span>.<span class="ID">_fid</span>.<span class="ID">seek</span>(<span class="ID">pos</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_29">  29</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_29"></span><span class="anchor" id="line-29-1"></span>        <span class="ResWord">return</span> <span class="ID">N</span>.<span class="ID">fromfile</span>(<span class="ResWord">self</span>.<span class="ID">_fid</span>, <span class="ID">ntype</span>, <span class="ID">size</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_30">  30</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_30"></span><span class="anchor" id="line-30-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_31">  31</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_31"></span><span class="anchor" id="line-31-1"></span>    <span class="ResWord">def</span> <span class="ID">load_img</span>(<span class="ResWord">self</span>):</span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_32">  32</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_32"></span><span class="anchor" id="line-32-1"></span>        <span class="ID">img</span> = <span class="ResWord">self</span>.<span class="ID">read_at</span>(<span class="Number">4100</span>, <span class="ResWord">self</span>.<span class="ID">_xdim</span> * <span class="ResWord">self</span>.<span class="ID">_ydim</span>, <span class="ID">N</span>.<span class="ID">uint16</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_33">  33</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_33"></span><span class="anchor" id="line-33-1"></span>        <span class="ResWord">return</span> <span class="ID">img</span>.<span class="ID">reshape</span>((<span class="ResWord">self</span>.<span class="ID">_ydim</span>, <span class="ResWord">self</span>.<span class="ID">_xdim</span>))</span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_34">  34</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_34"></span><span class="anchor" id="line-34-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_35">  35</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_35"></span><span class="anchor" id="line-35-1"></span>    <span class="ResWord">def</span> <span class="ID">close</span>(<span class="ResWord">self</span>):</span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_36">  36</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_36"></span><span class="anchor" id="line-36-1"></span>        <span class="ResWord">self</span>.<span class="ID">_fid</span>.<span class="ID">close</span>()</span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_37">  37</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_37"></span><span class="anchor" id="line-37-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_38">  38</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_38"></span><span class="anchor" id="line-38-1"></span><span class="ResWord">def</span> <span class="ID">load</span>(<span class="ID">fname</span>):</span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_39">  39</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_39"></span><span class="anchor" id="line-39-1"></span>    <span class="ID">fid</span> = <span class="ID">File</span>(<span class="ID">fname</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_40">  40</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_40"></span><span class="anchor" id="line-40-1"></span>    <span class="ID">img</span> = <span class="ID">fid</span>.<span class="ID">load_img</span>()</span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_41">  41</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_41"></span><span class="anchor" id="line-41-1"></span>    <span class="ID">fid</span>.<span class="ID">close</span>()</span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_42">  42</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_42"></span><span class="anchor" id="line-42-1"></span>    <span class="ResWord">return</span> <span class="ID">img</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_43">  43</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_43"></span><span class="anchor" id="line-43-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_44">  44</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_44"></span><span class="anchor" id="line-44-1"></span><span class="ResWord">if</span> <span class="ID">__name__</span> == <span class="String">&quot;</span><span class="String">__main__</span><span class="String">&quot;</span>:</span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_45">  45</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_45"></span><span class="anchor" id="line-45-1"></span>    <span class="ResWord">import</span> <span class="ID">sys</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_46">  46</a> </span><span class="LineAnchor" id="CA-7fa4b15dbbc99713d6f6c4317a7709e2b76c47d2_46"></span><span class="anchor" id="line-46-1"></span>    <span class="ID">img</span> = <span class="ID">load</span>(<span class="ID">sys</span>.<span class="ID">argv</span>[-<span class="Number">1</span>])</span>
</pre></div></div><span class="anchor" id="line-56"></span><span class="anchor" id="line-57"></span><p class="line867">
<h2 id="Viewing_the_image_with_matplotlib_and_ipython">Viewing the image with matplotlib and ipython</h2>
<span class="anchor" id="line-58"></span><p class="line862">The 'read_spe.py' script from above and the 'lampe_dt.spe' example are provided in the archive <a class="attachment" href="Reading_SPE_files942c.html?action=AttachFile&amp;do=view&amp;target=read_spe.zip" title="">read_spe.zip</a>. Once decompresesed, you can then start ipython in the directory where the script lives: <span class="anchor" id="line-59"></span><span class="anchor" id="line-60"></span><span class="anchor" id="line-61"></span><pre><span class="anchor" id="line-1"></span>ipython -pylab read_spe.py lampe_dt.spe</pre><span class="anchor" id="line-62"></span><p class="line874">The following first line will show the image in a new window. The second line will change the colormap (try 'help(pylab.colormaps)' for listing them). <span class="anchor" id="line-63"></span><span class="anchor" id="line-64"></span><span class="anchor" id="line-65"></span><span class="anchor" id="line-66"></span><span class="anchor" id="line-67"></span><span class="anchor" id="line-1-3"></span><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-b8769efb7179832eec1b33d10237b472fb5a2ca4\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-b8769efb7179832eec1b33d10237b472fb5a2ca4" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-b8769efb7179832eec1b33d10237b472fb5a2ca4_1">   1</a> </span><span class="LineAnchor" id="CA-b8769efb7179832eec1b33d10237b472fb5a2ca4_1"></span><span class="anchor" id="line-1-4"></span>&gt;&gt;&gt; <span class="ID">pylab</span>.<span class="ID">imshow</span>(<span class="ID">img</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-b8769efb7179832eec1b33d10237b472fb5a2ca4_2">   2</a> </span><span class="LineAnchor" id="CA-b8769efb7179832eec1b33d10237b472fb5a2ca4_2"></span><span class="anchor" id="line-2-2"></span>&gt;&gt;&gt; <span class="ID">pylab</span>.<span class="ID">hot</span>()</span>
</pre></div></div><span class="anchor" id="line-68"></span><div><table><tbody><tr>  <td style="text-align: center"><p class="line891"><img alt="lampe_dt.png" class="attachment" src="lampe_dtb100.png?action=AttachFile&amp;do=get&amp;target=lampe_dt.png" title="lampe_dt.png" /></td>
</tr>
</tbody></table></div><span class="anchor" id="line-69"></span><span class="anchor" id="bottom"></span></div><p id="pageinfo" class="info" lang="en" dir="ltr">SciPy: Cookbook/Reading_SPE_files  (last edited 2015-10-24 17:48:27 by <span title="">anonymous</span>)</p>

<div id="pagebottom"></div>
</div>


<div id="footer">
<ul class="editbar"><li class="toggleCommentsButton" style="display:none;"><a href="#" class="nbcomment" onClick="toggleComments();return false;">Comments</a></li><li><a class="nbattachments" href="Reading_SPE_files37dc.html?action=AttachFile" rel="nofollow">Attachments</a></li><li>
<form class="actionsmenu" method="GET" action="../../external.html?link=http://localhost:8080/Cookbook/Reading_SPE_files">
<div>
    <label>More Actions:</label>
    <select name="action"
        onchange="if ((this.selectedIndex != 0) &&
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="RenamePage" disabled class="disabled">Rename Page</option>
<option value="DeletePage" disabled class="disabled">Delete Page</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Subscribe User</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Remove Spam</option>
<option value="show" disabled class="disabled">Revert to this revision</option>
    </select>
    <input type="submit" value="Do">
    
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('More Actions:');
//-->
</script>
</form>
</li></ul>

<ul id="credits">
<li><a href="../../external.html?link=http://moinmo.in/" title="This site uses the MoinMoin Wiki software.">MoinMoin Powered</a></li><li><a href="../../external.html?link=http://moinmo.in/Python" title="MoinMoin is written in Python.">Python Powered</a></li><li><a href="../../external.html?link=http://moinmo.in/GPL" title="MoinMoin is GPL licensed.">GPL licensed</a></li><li><a href="../../external.html?link=http://validator.w3.org/check?uri=referer" title="Click here to validate this page.">Valid HTML 4.01</a></li>
</ul>


</div>
</body>

<!-- Mirrored from localhost:8080/Cookbook/Reading_SPE_files by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 29 Oct 2015 20:22:09 GMT -->
</html>

