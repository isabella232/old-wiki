<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>

<!-- Mirrored from localhost:8080/Cookbook/Matplotlib/Animations?action=recoverpass by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 29 Oct 2015 23:19:04 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="edit_on_doubleclick" content="/">
<meta name="robots" content="noindex,nofollow">

<title>Cookbook/Matplotlib/Animations - SciPy wiki dump</title>
<script type="text/javascript" src="../../moin_static197/common/js/common.js"></script>

<script type="text/javascript">
<!--
var search_hint = "Search";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../../moin_static197/modern/css/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="../../moin_static197/modern/css/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="../../moin_static197/modern/css/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="../../moin_static197/modern/css/projection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="/moin_static197/modern/css/msie.css">
<![endif]-->


<link rel="alternate" title="SciPy: Cookbook/Matplotlib/Animations" href="../../../external.html?link=http://localhost:8080/Cookbook/Matplotlib/Animations?diffs=1&amp;show_att=1&amp;action=rss_rc&amp;unique=0&amp;page=Cookbook%2FMatplotlib%2FAnimations&amp;ddiffs=1" type="application/rss+xml">


<link rel="Start" href="../../AllPages.html">
<link rel="Alternate" title="Wiki Markup" href="../../../external.html?link=http://localhost:8080/Cookbook/Matplotlib/Animations?action=raw">
<link rel="Alternate" media="print" title="Print View" href="../../../external.html?link=http://localhost:8080/Cookbook/Matplotlib/Animations?action=print">
<link rel="Up" href="../Matplotlib.html">
<link rel="Search" href="../../FindPage.html">
<link rel="Index" href="../../TitleIndex.html">
<link rel="Glossary" href="../../WordIndex.html">
<link rel="Help" href="../../HelpOnFormatting.html">
</head>

<body  lang="en" dir="ltr"><div style="background: white; padding:2em;">This is an archival dump of old wiki content --- see <a href="http://scipy.org/">scipy.org</a> for current material</div>

<div id="header">


<form id="searchform" method="get" action="../../../external.html?link=http://localhost:8080/Cookbook/Matplotlib/Animations">
<div>
<input type="hidden" name="action" value="fullsearch">
<input type="hidden" name="context" value="180">
<label for="searchinput">Search:</label>
<input id="searchinput" type="text" name="value" value="" size="20"
    onfocus="searchFocus(this)" onblur="searchBlur(this)"
    onkeyup="searchChange(this)" onchange="searchChange(this)" alt="Search">
<input id="titlesearch" name="titlesearch" type="submit"
    value="Titles" alt="Search Titles">
<input id="fullsearch" name="fullsearch" type="submit"
    value="Text" alt="Search Full Text">
</div>
</form>
<script type="text/javascript">
<!--// Initialize search form
var f = document.getElementById('searchform');
f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
searchChange(e);
searchBlur(e);
//-->
</script>

<ul id="username"><li><a href="Animations456e.html?action=login" id="login" rel="nofollow">Login</a></li></ul>
<div id="locationline">
<div id="interwiki"><span><a href="../../AllPages.html" rel="nofollow">SciPy</a></span></div>

<ul id="pagelocation">
<li><a href="../../Cookbook.html">Cookbook</a></li><li><a href="../Matplotlib.html">Matplotlib</a></li><li><a class="backlink" href="Animations9608.html?action=fullsearch&amp;context=180&amp;value=linkto%3A%22Cookbook%2FMatplotlib%2FAnimations%22" rel="nofollow" title="Click to do a full-text search for this title">Animations</a></li>
</ul>

</div>


<ul id="navibar">
<li class="wikilink"><a href="../../RecentChanges.html">RecentChanges</a></li><li class="wikilink"><a class="nonexistent" href="../../FindPage.html">FindPage</a></li><li class="wikilink"><a class="nonexistent" href="../../HelpContents.html">HelpContents</a></li><li class="current"><a href="Animations.html">Animations</a></li>
</ul>

<div id="pageline"><hr style="display:none;"></div>
<div id="message">
<p><div class="warning">This wiki is not enabled for mail processing.
Contact the owner of the wiki, who can enable email.</div></p><a class="clear-link" href="Animations.html">Clear message</a>
</div>

<ul class="editbar"><li class="toggleCommentsButton" style="display:none;"><a href="#" class="nbcomment" onClick="toggleComments();return false;">Comments</a></li><li><a class="nbattachments" href="Animations37dc.html?action=AttachFile" rel="nofollow">Attachments</a></li><li>
<form class="actionsmenu" method="GET" action="../../../external.html?link=http://localhost:8080/Cookbook/Matplotlib/Animations">
<div>
    <label>More Actions:</label>
    <select name="action"
        onchange="if ((this.selectedIndex != 0) &&
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="RenamePage" disabled class="disabled">Rename Page</option>
<option value="DeletePage" disabled class="disabled">Delete Page</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Subscribe User</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Remove Spam</option>
<option value="show" disabled class="disabled">Revert to this revision</option>
    </select>
    <input type="submit" value="Do">
    
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('More Actions:');
//-->
</script>
</form>
</li></ul>

</div>

<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><p class="line867"><em><strong>Note:</em></strong> Some of the matplotlib code in this cookbook entry may be deprecated or obsolete.  For example, the file <strong>anim.py</strong> mentioned below no longer exists in matplotlib.  Examples of animation in matplotlib are at <a class="http" href="../../../external.html?link=http://matplotlib.sourceforge.net/examples/animation/index.html">http://matplotlib.sourceforge.net/examples/animation/index.html</a>, and the main animation API documentation is <a class="http" href="../../../external.html?link=http://matplotlib.sourceforge.net/api/animation_api.html">http://matplotlib.sourceforge.net/api/animation_api.html</a>. <span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><p class="line867"><hr /><p class="line874"> <span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><p class="line874">matplotlib supports animated plots, and provides a number of demos. An important question when considering whether to use matplotlib for animation is what kind of speed you need.  matplotlib is not the fastest plotting library in the west, and may be too slow for some animation applications.  Nonetheless, it is fast enough for many if not most, and this tutorial is geared to showing you how to make it fast enough for you.  In particular, the section *Animating selected plot elements* shows you how to get top speed out of matplotlib animations. <span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span><p class="line867"><div class="table-of-contents"><p class="table-of-contents-heading">Contents<ol><li>
<a href="#Performance">Performance</a></li><li>
<a href="#GUI_neutral_animation_in_pylab">GUI neutral animation in pylab</a></li><li>
<a href="#Using_the_GUI_timers_or_idle_handlers">Using the GUI timers or idle handlers</a></li><li>
<a href="#Animating_selected_plot_elements">Animating selected plot elements</a></li><li>
<a href="#Example:_cursoring">Example: cursoring</a></li><li>
<a href="#The_.27blit.27_animation_methods">The 'blit' animation methods</a><ol><li>
<a href="#Figure_canvas_methods">Figure canvas methods</a></li></ol></li></ol></div> <span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span><p class="line867">
<h1 id="Performance">Performance</h1>
<span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><p class="line862">matplotlib supports 5 different graphical user interfaces (GTK, WX, Qt, Tkinter, FLTK) and for some of those GUIs, there are various ways to draw to the canvas.  For example, for GTK, you can use native <a class="http" href="../../../external.html?link=http://www.pygtk.org/pygtk2reference/class-gdkdrawable.html">GDK drawing</a>, <a class="http" href="../../../external.html?link=http://antigrain.com/">antigrain</a>, or <span class="anchor" id="line-12"></span><a class="http" href="../../../external.html?link=http://cairographics.org/">cairo</a>.  A GUI toolkit combined with some method of drawing comprises a <a class="http" href="../../../external.html?link=http://matplotlib.sourceforge.net/backends.html">backend</a>.  For example, drawing to a GTK canvas with the antigrain drawing toolkit is called the GTKAgg backend.  This is important because different backends have different performance characteristics, and the difference can be considerable. <span class="anchor" id="line-13"></span><span class="anchor" id="line-14"></span><p class="line874">When considering performance, the typical measure is frames per second.  Television is 30 frames per second, and for many application if you can get 10 or more frames per second the animation is smooth enough to &quot;look good&quot;.  Monitors refresh at 75-80 frames per second typically, and so this is an upper limit for performance.  Any faster is probably wasted CPU cycles. <span class="anchor" id="line-15"></span><span class="anchor" id="line-16"></span><p class="line862">Here are some numbers for the animated script <a class="http" href="../../../external.html?link=http://matplotlib.sf.net/examples/anim.py">anim.py</a>, which simply updates a sine wave on various backends, run under linux on a 3GHz Pentium IV.  To profile a script under different backends,  you can use the &quot;GUI neutral&quot; animation technique described below and then run it with the <tt>-dBackend</tt> flag, as in: <span class="anchor" id="line-17"></span><span class="anchor" id="line-18"></span><p class="line867"><span class="anchor" id="line-19"></span><span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span><pre><span class="anchor" id="line-1"></span>&gt; python anim.py -dWX
<span class="anchor" id="line-2"></span>&gt; python anim.py -dGTKAgg</pre><span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span><p class="line874">Here are the results.  Note that these should be interpreted cautiously, because some GUIs might call a drawing operation in a separate thread and return before it is complete, or drop a drawing operation while one is in the queue.  The most important assessment is qualitative. <span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span><p class="line867"><span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span><span class="anchor" id="line-28"></span><span class="anchor" id="line-29"></span><span class="anchor" id="line-30"></span><span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span><pre><span class="anchor" id="line-1-1"></span>Backend  Frames/second
<span class="anchor" id="line-2-1"></span> GTK         43   
<span class="anchor" id="line-3"></span> GTKAgg      36 
<span class="anchor" id="line-4"></span> TkAgg       20 
<span class="anchor" id="line-5"></span> WX          11
<span class="anchor" id="line-6"></span> WXAgg       27 </pre><span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span><p class="line867">
<h1 id="GUI_neutral_animation_in_pylab">GUI neutral animation in pylab</h1>
<span class="anchor" id="line-35"></span><span class="anchor" id="line-36"></span><p class="line862">The pylab interface supports animation that does not depend on a specific GUI toolkit.  This is not recommended for production use, but is often a good way to make a quick-and-dirty, throw away animation. After importing pylab, you need to turn interaction on with the <a class="http" href="../../../external.html?link=http://matplotlib.sf.net/matplotlib.pylab.html#-ion">ion</a> command. You can then force a draw at any time with <a class="http" href="../../../external.html?link=http://matplotlib.sf.net/matplotlib.pylab.html#-draw">draw</a>.  In interactive mode, a new draw command is issued after each pylab command, and you can also temporarily turn off this behavior for a block of plotting commands in which you do not want an update with the <a class="http" href="../../../external.html?link=http://matplotlib.sf.net/matplotlib.pylab.html#-ioff">ioff</a> commands.  This is described in more detail on the <a class="http" href="../../../external.html?link=http://matplotlib.sf.net/interactive.html">interactive</a> page. <span class="anchor" id="line-37"></span><span class="anchor" id="line-38"></span><p class="line874">Here is the anim.py script that was used to generate the profiling numbers across backends in the table above <span class="anchor" id="line-39"></span><span class="anchor" id="line-40"></span><span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span><span class="anchor" id="line-43"></span><span class="anchor" id="line-44"></span><span class="anchor" id="line-45"></span><span class="anchor" id="line-46"></span><span class="anchor" id="line-47"></span><span class="anchor" id="line-48"></span><span class="anchor" id="line-49"></span><span class="anchor" id="line-50"></span><span class="anchor" id="line-51"></span><span class="anchor" id="line-52"></span><span class="anchor" id="line-53"></span><span class="anchor" id="line-1-1"></span><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
function isnumbered(obj) {
  return obj.childNodes.length && obj.firstChild.childNodes.length && obj.firstChild.firstChild.className == 'LineNumber';
}
function nformat(num,chrs,add) {
  var nlen = Math.max(0,chrs-(''+num).length), res = '';
  while (nlen>0) { res += ' '; nlen-- }
  return res+num+add;
}
function addnumber(did, nstart, nstep) {
  var c = document.getElementById(did), l = c.firstChild, n = 1;
  if (!isnumbered(c)) {
    if (typeof nstart == 'undefined') nstart = 1;
    if (typeof nstep  == 'undefined') nstep = 1;
    var n = nstart;
    while (l != null) {
      if (l.tagName == 'SPAN') {
        var s = document.createElement('SPAN');
        var a = document.createElement('A');
        s.className = 'LineNumber';
        a.appendChild(document.createTextNode(nformat(n,4,'')));
        a.href = '#' + did + '_' + n;
        s.appendChild(a);
        s.appendChild(document.createTextNode(' '));
        n += nstep;
        if (l.childNodes.length) {
          l.insertBefore(s, l.firstChild);
        }
        else {
          l.appendChild(s);
        }
      }
      l = l.nextSibling;
    }
  }
  return false;
}
function remnumber(did) {
  var c = document.getElementById(did), l = c.firstChild;
  if (isnumbered(c)) {
    while (l != null) {
      if (l.tagName == 'SPAN' && l.firstChild.className == 'LineNumber') l.removeChild(l.firstChild);
      l = l.nextSibling;
    }
  }
  return false;
}
function togglenumber(did, nstart, nstep) {
  var c = document.getElementById(did);
  if (isnumbered(c)) {
    remnumber(did);
  } else {
    addnumber(did,nstart,nstep);
  }
  return false;
}
</script>

<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-e02e7b4724266e3b4c220a47e7e3b21891778773\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-e02e7b4724266e3b4c220a47e7e3b21891778773" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-e02e7b4724266e3b4c220a47e7e3b21891778773_1">   1</a> </span><span class="LineAnchor" id="CA-e02e7b4724266e3b4c220a47e7e3b21891778773_1"></span><span class="anchor" id="line-1-2"></span><span class="ResWord">from</span> <span class="ID">pylab</span> <span class="ResWord">import</span> *</span>
<span class="line"><span class="LineNumber"><a href="#CA-e02e7b4724266e3b4c220a47e7e3b21891778773_2">   2</a> </span><span class="LineAnchor" id="CA-e02e7b4724266e3b4c220a47e7e3b21891778773_2"></span><span class="anchor" id="line-2-1"></span><span class="ResWord">import</span> <span class="ID">time</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e02e7b4724266e3b4c220a47e7e3b21891778773_3">   3</a> </span><span class="LineAnchor" id="CA-e02e7b4724266e3b4c220a47e7e3b21891778773_3"></span><span class="anchor" id="line-3-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e02e7b4724266e3b4c220a47e7e3b21891778773_4">   4</a> </span><span class="LineAnchor" id="CA-e02e7b4724266e3b4c220a47e7e3b21891778773_4"></span><span class="anchor" id="line-4-1"></span><span class="ID">ion</span>()  </span>
<span class="line"><span class="LineNumber"><a href="#CA-e02e7b4724266e3b4c220a47e7e3b21891778773_5">   5</a> </span><span class="LineAnchor" id="CA-e02e7b4724266e3b4c220a47e7e3b21891778773_5"></span><span class="anchor" id="line-5-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e02e7b4724266e3b4c220a47e7e3b21891778773_6">   6</a> </span><span class="LineAnchor" id="CA-e02e7b4724266e3b4c220a47e7e3b21891778773_6"></span><span class="anchor" id="line-6-1"></span><span class="ID">tstart</span> = <span class="ID">time</span>.<span class="ID">time</span>()               <span class="Comment"># for profiling</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e02e7b4724266e3b4c220a47e7e3b21891778773_7">   7</a> </span><span class="LineAnchor" id="CA-e02e7b4724266e3b4c220a47e7e3b21891778773_7"></span><span class="anchor" id="line-7-1"></span><span class="ID">x</span> = <span class="ID">arange</span>(<span class="Number">0</span>,<span class="Number">2</span>*<span class="ID">pi</span>,<span class="Number">0.01</span>)            <span class="Comment"># x-array</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e02e7b4724266e3b4c220a47e7e3b21891778773_8">   8</a> </span><span class="LineAnchor" id="CA-e02e7b4724266e3b4c220a47e7e3b21891778773_8"></span><span class="anchor" id="line-8-1"></span><span class="ID">line</span>, = <span class="ID">plot</span>(<span class="ID">x</span>,<span class="ID">sin</span>(<span class="ID">x</span>))</span>
<span class="line"><span class="LineNumber"><a href="#CA-e02e7b4724266e3b4c220a47e7e3b21891778773_9">   9</a> </span><span class="LineAnchor" id="CA-e02e7b4724266e3b4c220a47e7e3b21891778773_9"></span><span class="anchor" id="line-9-1"></span><span class="ResWord">for</span> <span class="ID">i</span> <span class="ResWord">in</span> <span class="ID">arange</span>(<span class="Number">1</span>,<span class="Number">200</span>):</span>
<span class="line"><span class="LineNumber"><a href="#CA-e02e7b4724266e3b4c220a47e7e3b21891778773_10">  10</a> </span><span class="LineAnchor" id="CA-e02e7b4724266e3b4c220a47e7e3b21891778773_10"></span><span class="anchor" id="line-10-1"></span>    <span class="ID">line</span>.<span class="ID">set_ydata</span>(<span class="ID">sin</span>(<span class="ID">x</span>+<span class="ID">i</span>/<span class="Number">10.0</span>))  <span class="Comment"># update the data</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e02e7b4724266e3b4c220a47e7e3b21891778773_11">  11</a> </span><span class="LineAnchor" id="CA-e02e7b4724266e3b4c220a47e7e3b21891778773_11"></span><span class="anchor" id="line-11-1"></span>    <span class="ID">draw</span>()                         <span class="Comment"># redraw the canvas</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e02e7b4724266e3b4c220a47e7e3b21891778773_12">  12</a> </span><span class="LineAnchor" id="CA-e02e7b4724266e3b4c220a47e7e3b21891778773_12"></span><span class="anchor" id="line-12-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e02e7b4724266e3b4c220a47e7e3b21891778773_13">  13</a> </span><span class="LineAnchor" id="CA-e02e7b4724266e3b4c220a47e7e3b21891778773_13"></span><span class="anchor" id="line-13-1"></span><span class="ResWord">print</span> <span class="String">'</span><span class="String">FPS:</span><span class="String">'</span> , <span class="Number">200</span>/(<span class="ID">time</span>.<span class="ID">time</span>()-<span class="ID">tstart</span>)</span>
</pre></div></div><span class="anchor" id="line-54"></span><span class="anchor" id="line-55"></span><p class="line862">Note the technique of creating a line with the call to <a class="http" href="../../../external.html?link=http://matplotlib.sf.net/matplotlib.pylab.html#-plot">plot</a>: <span class="anchor" id="line-56"></span><span class="anchor" id="line-57"></span><span class="anchor" id="line-58"></span><span class="anchor" id="line-1-3"></span><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-52436b9906ec7ebebc63d166abac271dcaea6125\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-52436b9906ec7ebebc63d166abac271dcaea6125" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-52436b9906ec7ebebc63d166abac271dcaea6125_1">   1</a> </span><span class="LineAnchor" id="CA-52436b9906ec7ebebc63d166abac271dcaea6125_1"></span><span class="anchor" id="line-1-4"></span><span class="ID">line</span>, = <span class="ID">plot</span>(<span class="ID">x</span>,<span class="ID">sin</span>(<span class="ID">x</span>))</span>
</pre></div></div><span class="anchor" id="line-59"></span><p class="line874">and then setting its data with the set_ydata method and calling draw: <span class="anchor" id="line-60"></span><span class="anchor" id="line-61"></span><span class="anchor" id="line-62"></span><span class="anchor" id="line-63"></span><span class="anchor" id="line-1-5"></span><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-997085ea2d93965877d4b23528f8bf32e698a308\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-997085ea2d93965877d4b23528f8bf32e698a308" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-997085ea2d93965877d4b23528f8bf32e698a308_1">   1</a> </span><span class="LineAnchor" id="CA-997085ea2d93965877d4b23528f8bf32e698a308_1"></span><span class="anchor" id="line-1-6"></span><span class="ID">line</span>.<span class="ID">set_ydata</span>(<span class="ID">sin</span>(<span class="ID">x</span>+<span class="ID">i</span>/<span class="Number">10.0</span>))  <span class="Comment"># update the data</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-997085ea2d93965877d4b23528f8bf32e698a308_2">   2</a> </span><span class="LineAnchor" id="CA-997085ea2d93965877d4b23528f8bf32e698a308_2"></span><span class="anchor" id="line-2-2"></span><span class="ID">draw</span>()                         <span class="Comment"># redraw the canvas</span></span>
</pre></div></div><span class="anchor" id="line-64"></span><p class="line874">This can be much faster than clearing the axes and/or creating new objects for each plot command. <span class="anchor" id="line-65"></span><span class="anchor" id="line-66"></span><p class="line874">To animate a pcolor plot use: <span class="anchor" id="line-67"></span><span class="anchor" id="line-68"></span><span class="anchor" id="line-69"></span><span class="anchor" id="line-70"></span><span class="anchor" id="line-71"></span><span class="anchor" id="line-72"></span><span class="anchor" id="line-73"></span><span class="anchor" id="line-74"></span><span class="anchor" id="line-1-7"></span><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-76ad1f3494d2bb3f9797c9b7081822aeb3b4ede1\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-76ad1f3494d2bb3f9797c9b7081822aeb3b4ede1" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-76ad1f3494d2bb3f9797c9b7081822aeb3b4ede1_1">   1</a> </span><span class="LineAnchor" id="CA-76ad1f3494d2bb3f9797c9b7081822aeb3b4ede1_1"></span><span class="anchor" id="line-1-8"></span><span class="ID">p</span> = <span class="ID">pcolor</span>(<span class="ID">XI</span>,<span class="ID">YI</span>,<span class="ID">C</span>[<span class="Number">0</span>])</span>
<span class="line"><span class="LineNumber"><a href="#CA-76ad1f3494d2bb3f9797c9b7081822aeb3b4ede1_2">   2</a> </span><span class="LineAnchor" id="CA-76ad1f3494d2bb3f9797c9b7081822aeb3b4ede1_2"></span><span class="anchor" id="line-2-3"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-76ad1f3494d2bb3f9797c9b7081822aeb3b4ede1_3">   3</a> </span><span class="LineAnchor" id="CA-76ad1f3494d2bb3f9797c9b7081822aeb3b4ede1_3"></span><span class="anchor" id="line-3-2"></span><span class="ResWord">for</span> <span class="ID">i</span> <span class="ResWord">in</span> <span class="ResWord">range</span>(<span class="Number">1</span>,<span class="ResWord">len</span>(<span class="ID">C</span>)):</span>
<span class="line"><span class="LineNumber"><a href="#CA-76ad1f3494d2bb3f9797c9b7081822aeb3b4ede1_4">   4</a> </span><span class="LineAnchor" id="CA-76ad1f3494d2bb3f9797c9b7081822aeb3b4ede1_4"></span><span class="anchor" id="line-4-2"></span>  <span class="ID">p</span>.<span class="ID">set_array</span>(<span class="ID">C</span>[<span class="ID">i</span>,<span class="Number">0</span>:-<span class="Number">1</span>,<span class="Number">0</span>:-<span class="Number">1</span>].<span class="ID">ravel</span>())</span>
<span class="line"><span class="LineNumber"><a href="#CA-76ad1f3494d2bb3f9797c9b7081822aeb3b4ede1_5">   5</a> </span><span class="LineAnchor" id="CA-76ad1f3494d2bb3f9797c9b7081822aeb3b4ede1_5"></span><span class="anchor" id="line-5-2"></span>  <span class="ID">p</span>.<span class="ID">autoscale</span>()</span>
<span class="line"><span class="LineNumber"><a href="#CA-76ad1f3494d2bb3f9797c9b7081822aeb3b4ede1_6">   6</a> </span><span class="LineAnchor" id="CA-76ad1f3494d2bb3f9797c9b7081822aeb3b4ede1_6"></span><span class="anchor" id="line-6-2"></span>  <span class="ID">draw</span>()</span>
</pre></div></div><span class="anchor" id="line-75"></span><p class="line874">This assumes C is a 3D array where the first dimension is time and that XI,YI and C[i,:,:] have the same shape. If C[i,:,:] is one row and one column smaller simply use C.ravel(). <span class="anchor" id="line-76"></span><span class="anchor" id="line-77"></span><p class="line867">
<h1 id="Using_the_GUI_timers_or_idle_handlers">Using the GUI timers or idle handlers</h1>
<span class="anchor" id="line-78"></span><span class="anchor" id="line-79"></span><p class="line862">If you are doing production code or anything semi-serious, you are advised to use the GUI event handling specific to your toolkit for animation, because this will give you more control over your animation than matplotlib can provide through the GUI neutral pylab interface to animation.  How you do this depends on your toolkit, but there are examples for several of the backends in the matplotlib examples directory, eg, <a class="http" href="../../../external.html?link=http://matplotlib.sf.net/examples/anim_tk.py">anim_tk.py</a> for Tkinter, <a class="http" href="../../../external.html?link=http://matplotlib.sf.net/examples/dynamic_image_gtkagg.py">dynamic_image_gtkagg.py</a> for GTKAgg and <a class="http" href="../../../external.html?link=http://matplotlib.sf.net/examples/dynamic_image_wxagg.py">dynamic_image_wxagg.py</a> for WXAgg. <span class="anchor" id="line-80"></span><span class="anchor" id="line-81"></span><p class="line874">The basic idea is to create your figure and a callback function that updates your figure.  You then pass that callback to the GUI idle handler or timer.  A simple example in GTK looks like <span class="anchor" id="line-82"></span><span class="anchor" id="line-83"></span><p class="line867"><span class="anchor" id="line-84"></span><span class="anchor" id="line-85"></span><span class="anchor" id="line-86"></span><span class="anchor" id="line-87"></span><span class="anchor" id="line-88"></span><span class="anchor" id="line-89"></span><span class="anchor" id="line-1-9"></span><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-866c4f7f976b2efe2848e93d4955e1f5f6bbe74d\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-866c4f7f976b2efe2848e93d4955e1f5f6bbe74d" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-866c4f7f976b2efe2848e93d4955e1f5f6bbe74d_1">   1</a> </span><span class="LineAnchor" id="CA-866c4f7f976b2efe2848e93d4955e1f5f6bbe74d_1"></span><span class="anchor" id="line-1-10"></span><span class="ResWord">def</span> <span class="ID">callback</span>(*<span class="ID">args</span>):  </span>
<span class="line"><span class="LineNumber"><a href="#CA-866c4f7f976b2efe2848e93d4955e1f5f6bbe74d_2">   2</a> </span><span class="LineAnchor" id="CA-866c4f7f976b2efe2848e93d4955e1f5f6bbe74d_2"></span><span class="anchor" id="line-2-4"></span>   <span class="ID">line</span>.<span class="ID">set_ydata</span>(<span class="ID">get_next_plot</span>())</span>
<span class="line"><span class="LineNumber"><a href="#CA-866c4f7f976b2efe2848e93d4955e1f5f6bbe74d_3">   3</a> </span><span class="LineAnchor" id="CA-866c4f7f976b2efe2848e93d4955e1f5f6bbe74d_3"></span><span class="anchor" id="line-3-3"></span>   <span class="ID">canvas</span>.<span class="ID">draw</span>()  <span class="Comment"># or simply &quot;draw&quot; in pylab</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-866c4f7f976b2efe2848e93d4955e1f5f6bbe74d_4">   4</a> </span><span class="LineAnchor" id="CA-866c4f7f976b2efe2848e93d4955e1f5f6bbe74d_4"></span><span class="anchor" id="line-4-3"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-866c4f7f976b2efe2848e93d4955e1f5f6bbe74d_5">   5</a> </span><span class="LineAnchor" id="CA-866c4f7f976b2efe2848e93d4955e1f5f6bbe74d_5"></span><span class="anchor" id="line-5-3"></span><span class="ID">gtk</span>.<span class="ID">idle_add</span>(<span class="ID">callback</span>)</span>
</pre></div></div><span class="anchor" id="line-90"></span><span class="anchor" id="line-91"></span><p class="line874">A simple example in WX or WXAgg looks like <span class="anchor" id="line-92"></span><span class="anchor" id="line-93"></span><p class="line867"><span class="anchor" id="line-94"></span><span class="anchor" id="line-95"></span><span class="anchor" id="line-96"></span><span class="anchor" id="line-97"></span><span class="anchor" id="line-98"></span><span class="anchor" id="line-99"></span><span class="anchor" id="line-100"></span><span class="anchor" id="line-1-11"></span><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-713337641e6d93a4e425ae2c9de7d77d0c2ef6dd\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-713337641e6d93a4e425ae2c9de7d77d0c2ef6dd" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-713337641e6d93a4e425ae2c9de7d77d0c2ef6dd_1">   1</a> </span><span class="LineAnchor" id="CA-713337641e6d93a4e425ae2c9de7d77d0c2ef6dd_1"></span><span class="anchor" id="line-1-12"></span><span class="ResWord">def</span> <span class="ID">callback</span>(*<span class="ID">args</span>):  </span>
<span class="line"><span class="LineNumber"><a href="#CA-713337641e6d93a4e425ae2c9de7d77d0c2ef6dd_2">   2</a> </span><span class="LineAnchor" id="CA-713337641e6d93a4e425ae2c9de7d77d0c2ef6dd_2"></span><span class="anchor" id="line-2-5"></span>   <span class="ID">line</span>.<span class="ID">set_ydata</span>(<span class="ID">get_next_plot</span>())</span>
<span class="line"><span class="LineNumber"><a href="#CA-713337641e6d93a4e425ae2c9de7d77d0c2ef6dd_3">   3</a> </span><span class="LineAnchor" id="CA-713337641e6d93a4e425ae2c9de7d77d0c2ef6dd_3"></span><span class="anchor" id="line-3-4"></span>   <span class="ID">canvas</span>.<span class="ID">draw</span>()</span>
<span class="line"><span class="LineNumber"><a href="#CA-713337641e6d93a4e425ae2c9de7d77d0c2ef6dd_4">   4</a> </span><span class="LineAnchor" id="CA-713337641e6d93a4e425ae2c9de7d77d0c2ef6dd_4"></span><span class="anchor" id="line-4-4"></span>   <span class="ID">wx</span>.<span class="ID">WakeUpIdle</span>() <span class="Comment"># ensure that the idle event keeps firing</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-713337641e6d93a4e425ae2c9de7d77d0c2ef6dd_5">   5</a> </span><span class="LineAnchor" id="CA-713337641e6d93a4e425ae2c9de7d77d0c2ef6dd_5"></span><span class="anchor" id="line-5-4"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-713337641e6d93a4e425ae2c9de7d77d0c2ef6dd_6">   6</a> </span><span class="LineAnchor" id="CA-713337641e6d93a4e425ae2c9de7d77d0c2ef6dd_6"></span><span class="anchor" id="line-6-3"></span><span class="ID">wx</span>.<span class="ID">EVT_IDLE</span>(<span class="ID">wx</span>.<span class="ID">GetApp</span>(), <span class="ID">callback</span>)</span>
</pre></div></div><span class="anchor" id="line-101"></span><span class="anchor" id="line-102"></span><p class="line867">
<h1 id="Animating_selected_plot_elements">Animating selected plot elements</h1>
<span class="anchor" id="line-103"></span><span class="anchor" id="line-104"></span><p class="line862">One limitation of the methods presented above is that all figure elements are redrawn with every call to draw, but we are only updating a single element.  Often what we want to do is draw a background, and animate just one or two elements on top of it.  As of matplotlib-0.87,  GTKAgg, TkAgg, WXAgg, and FLTKAgg support the methods discussed here. <span class="anchor" id="line-105"></span><span class="anchor" id="line-106"></span><p class="line862">The basic idea is to set the 'animated' property of the Artist you want to animate (all figure elements from Figure to Axes to Line2D to Text derive from the base class <a class="http" href="../../../external.html?link=http://matplotlib.sf.net/matplotlib.artist.html">Artist</a>).  Then, when the standard canvas draw operation is called, all the artists except the animated one will be drawn.  You can then use the method <tt>background&nbsp;=&nbsp;canvas.copy_from_bbox(bbox)</tt> to copy a rectangular region (eg the axes bounding box) into a a pixel buffer.  In animation, you restore the background with <tt>canvas.restore_region(background)</tt>, and then call <tt>ax.draw_artist(something)</tt> to draw your animated artist onto the clean background, and <tt>canvas.blit(bbox)</tt> to blit the updated axes rectangle to the figure.  When I run the example below in the same environment that produced 36 FPS for GTKAgg above, I measure 327 FPS with the techniques below.  See the caveats on performance numbers mentioned above.  Suffice it to say, quantitatively and qualitiatively it is much faster. <span class="anchor" id="line-107"></span><span class="anchor" id="line-108"></span><p class="line867"><span class="anchor" id="line-109"></span><span class="anchor" id="line-110"></span><span class="anchor" id="line-111"></span><span class="anchor" id="line-112"></span><span class="anchor" id="line-113"></span><span class="anchor" id="line-114"></span><span class="anchor" id="line-115"></span><span class="anchor" id="line-116"></span><span class="anchor" id="line-117"></span><span class="anchor" id="line-118"></span><span class="anchor" id="line-119"></span><span class="anchor" id="line-120"></span><span class="anchor" id="line-121"></span><span class="anchor" id="line-122"></span><span class="anchor" id="line-123"></span><span class="anchor" id="line-124"></span><span class="anchor" id="line-125"></span><span class="anchor" id="line-126"></span><span class="anchor" id="line-127"></span><span class="anchor" id="line-128"></span><span class="anchor" id="line-129"></span><span class="anchor" id="line-130"></span><span class="anchor" id="line-131"></span><span class="anchor" id="line-132"></span><span class="anchor" id="line-133"></span><span class="anchor" id="line-134"></span><span class="anchor" id="line-135"></span><span class="anchor" id="line-136"></span><span class="anchor" id="line-137"></span><span class="anchor" id="line-138"></span><span class="anchor" id="line-139"></span><span class="anchor" id="line-140"></span><span class="anchor" id="line-141"></span><span class="anchor" id="line-142"></span><span class="anchor" id="line-143"></span><span class="anchor" id="line-144"></span><span class="anchor" id="line-145"></span><span class="anchor" id="line-146"></span><span class="anchor" id="line-147"></span><span class="anchor" id="line-148"></span><span class="anchor" id="line-149"></span><span class="anchor" id="line-150"></span><span class="anchor" id="line-1-13"></span><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-e85584f977f9c725143feb535003e9c1bdb73bed\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_1">   1</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_1"></span><span class="anchor" id="line-1-14"></span><span class="ResWord">import</span> <span class="ID">sys</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_2">   2</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_2"></span><span class="anchor" id="line-2-6"></span><span class="ResWord">import</span> <span class="ID">gtk</span>, <span class="ID">gobject</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_3">   3</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_3"></span><span class="anchor" id="line-3-5"></span><span class="ResWord">import</span> <span class="ID">pylab</span> <span class="ResWord">as</span> <span class="ID">p</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_4">   4</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_4"></span><span class="anchor" id="line-4-5"></span><span class="ResWord">import</span> <span class="ID">matplotlib.numerix</span> <span class="ResWord">as</span> <span class="ID">nx</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_5">   5</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_5"></span><span class="anchor" id="line-5-5"></span><span class="ResWord">import</span> <span class="ID">time</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_6">   6</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_6"></span><span class="anchor" id="line-6-4"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_7">   7</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_7"></span><span class="anchor" id="line-7-2"></span><span class="ID">ax</span> = <span class="ID">p</span>.<span class="ID">subplot</span>(<span class="Number">111</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_8">   8</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_8"></span><span class="anchor" id="line-8-2"></span><span class="ID">canvas</span> = <span class="ID">ax</span>.<span class="ID">figure</span>.<span class="ID">canvas</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_9">   9</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_9"></span><span class="anchor" id="line-9-2"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_10">  10</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_10"></span><span class="anchor" id="line-10-2"></span><span class="Comment"># for profiling</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_11">  11</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_11"></span><span class="anchor" id="line-11-2"></span><span class="ID">tstart</span> = <span class="ID">time</span>.<span class="ID">time</span>()</span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_12">  12</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_12"></span><span class="anchor" id="line-12-2"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_13">  13</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_13"></span><span class="anchor" id="line-13-2"></span><span class="Comment"># create the initial line</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_14">  14</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_14"></span><span class="anchor" id="line-14-1"></span><span class="ID">x</span> = <span class="ID">nx</span>.<span class="ID">arange</span>(<span class="Number">0</span>,<span class="Number">2</span>*<span class="ID">nx</span>.<span class="ID">pi</span>,<span class="Number">0.01</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_15">  15</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_15"></span><span class="anchor" id="line-15-1"></span><span class="ID">line</span>, = <span class="ID">p</span>.<span class="ID">plot</span>(<span class="ID">x</span>, <span class="ID">nx</span>.<span class="ID">sin</span>(<span class="ID">x</span>), <span class="ID">animated</span>=<span class="ResWord">True</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_16">  16</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_16"></span><span class="anchor" id="line-16-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_17">  17</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_17"></span><span class="anchor" id="line-17-1"></span><span class="Comment"># save the clean slate background -- everything but the animated line</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_18">  18</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_18"></span><span class="anchor" id="line-18-1"></span><span class="Comment"># is drawn and saved in the pixel buffer background</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_19">  19</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_19"></span><span class="anchor" id="line-19-1"></span><span class="ID">background</span> = <span class="ID">canvas</span>.<span class="ID">copy_from_bbox</span>(<span class="ID">ax</span>.<span class="ID">bbox</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_20">  20</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_20"></span><span class="anchor" id="line-20-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_21">  21</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_21"></span><span class="anchor" id="line-21-1"></span><span class="ResWord">def</span> <span class="ID">update_line</span>(*<span class="ID">args</span>):</span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_22">  22</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_22"></span><span class="anchor" id="line-22-1"></span>    <span class="Comment"># restore the clean slate background</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_23">  23</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_23"></span><span class="anchor" id="line-23-1"></span>    <span class="ID">canvas</span>.<span class="ID">restore_region</span>(<span class="ID">background</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_24">  24</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_24"></span><span class="anchor" id="line-24-1"></span>    <span class="Comment"># update the data</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_25">  25</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_25"></span><span class="anchor" id="line-25-1"></span>    <span class="ID">line</span>.<span class="ID">set_ydata</span>(<span class="ID">nx</span>.<span class="ID">sin</span>(<span class="ID">x</span>+<span class="ID">update_line</span>.<span class="ID">cnt</span>/<span class="Number">10.0</span>))  </span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_26">  26</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_26"></span><span class="anchor" id="line-26-1"></span>    <span class="Comment"># just draw the animated artist</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_27">  27</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_27"></span><span class="anchor" id="line-27-1"></span>    <span class="ID">ax</span>.<span class="ID">draw_artist</span>(<span class="ID">line</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_28">  28</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_28"></span><span class="anchor" id="line-28-1"></span>    <span class="Comment"># just redraw the axes rectangle</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_29">  29</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_29"></span><span class="anchor" id="line-29-1"></span>    <span class="ID">canvas</span>.<span class="ID">blit</span>(<span class="ID">ax</span>.<span class="ID">bbox</span>) </span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_30">  30</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_30"></span><span class="anchor" id="line-30-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_31">  31</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_31"></span><span class="anchor" id="line-31-1"></span>    <span class="ResWord">if</span> <span class="ID">update_line</span>.<span class="ID">cnt</span>==<span class="Number">50</span>:</span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_32">  32</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_32"></span><span class="anchor" id="line-32-1"></span>        <span class="Comment"># print the timing info and quit</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_33">  33</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_33"></span><span class="anchor" id="line-33-1"></span>        <span class="ResWord">print</span> <span class="String">'</span><span class="String">FPS:</span><span class="String">'</span> , <span class="ID">update_line</span>.<span class="ID">cnt</span>/(<span class="ID">time</span>.<span class="ID">time</span>()-<span class="ID">tstart</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_34">  34</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_34"></span><span class="anchor" id="line-34-1"></span>        <span class="ID">sys</span>.<span class="ID">exit</span>()</span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_35">  35</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_35"></span><span class="anchor" id="line-35-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_36">  36</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_36"></span><span class="anchor" id="line-36-1"></span>    <span class="ID">update_line</span>.<span class="ID">cnt</span> += <span class="Number">1</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_37">  37</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_37"></span><span class="anchor" id="line-37-1"></span>    <span class="ResWord">return</span> <span class="ResWord">True</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_38">  38</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_38"></span><span class="anchor" id="line-38-1"></span><span class="ID">update_line</span>.<span class="ID">cnt</span> = <span class="Number">0</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_39">  39</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_39"></span><span class="anchor" id="line-39-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_40">  40</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_40"></span><span class="anchor" id="line-40-1"></span><span class="ID">gobject</span>.<span class="ID">idle_add</span>(<span class="ID">update_line</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-e85584f977f9c725143feb535003e9c1bdb73bed_41">  41</a> </span><span class="LineAnchor" id="CA-e85584f977f9c725143feb535003e9c1bdb73bed_41"></span><span class="anchor" id="line-41-1"></span><span class="ID">p</span>.<span class="ID">show</span>()</span>
</pre></div></div><span class="anchor" id="line-151"></span><span class="anchor" id="line-152"></span><p class="line867">
<h1 id="Example:_cursoring">Example: cursoring</h1>
<span class="anchor" id="line-153"></span><span class="anchor" id="line-154"></span><p class="line862">matplotlib 0.83.2 introduced a cursor class which can utilize these blit methods for no lag cursoring.  The class takes a <tt>useblit=True|False</tt> argument in the constructor.  For backends that support the new API (GTKAgg) set <tt>useblit=True</tt>: <span class="anchor" id="line-155"></span><span class="anchor" id="line-156"></span><span class="anchor" id="line-157"></span><span class="anchor" id="line-158"></span><span class="anchor" id="line-159"></span><span class="anchor" id="line-160"></span><span class="anchor" id="line-161"></span><span class="anchor" id="line-162"></span><span class="anchor" id="line-163"></span><span class="anchor" id="line-164"></span><span class="anchor" id="line-165"></span><span class="anchor" id="line-166"></span><span class="anchor" id="line-167"></span><span class="anchor" id="line-168"></span><span class="anchor" id="line-169"></span><span class="anchor" id="line-170"></span><span class="anchor" id="line-171"></span><span class="anchor" id="line-1-15"></span><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940_1">   1</a> </span><span class="LineAnchor" id="CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940_1"></span><span class="anchor" id="line-1-16"></span><span class="ResWord">from</span> <span class="ID">matplotlib.widgets</span> <span class="ResWord">import</span> <span class="ID">Cursor</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940_2">   2</a> </span><span class="LineAnchor" id="CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940_2"></span><span class="anchor" id="line-2-7"></span><span class="ResWord">import</span> <span class="ID">pylab</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940_3">   3</a> </span><span class="LineAnchor" id="CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940_3"></span><span class="anchor" id="line-3-6"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940_4">   4</a> </span><span class="LineAnchor" id="CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940_4"></span><span class="anchor" id="line-4-6"></span><span class="ID">fig</span> = <span class="ID">pylab</span>.<span class="ID">figure</span>(<span class="ID">figsize</span>=(<span class="Number">8</span>,<span class="Number">6</span>))</span>
<span class="line"><span class="LineNumber"><a href="#CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940_5">   5</a> </span><span class="LineAnchor" id="CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940_5"></span><span class="anchor" id="line-5-6"></span><span class="ID">ax</span> = <span class="ID">fig</span>.<span class="ID">add_axes</span>([<span class="Number">0.075</span>, <span class="Number">0.25</span>, <span class="Number">0.9</span>, <span class="Number">0.725</span>], <span class="ID">axisbg</span>=<span class="String">'</span><span class="String">#FFFFCC</span><span class="String">'</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940_6">   6</a> </span><span class="LineAnchor" id="CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940_6"></span><span class="anchor" id="line-6-5"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940_7">   7</a> </span><span class="LineAnchor" id="CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940_7"></span><span class="anchor" id="line-7-3"></span><span class="ID">x</span>,<span class="ID">y</span> = <span class="Number">4</span>*(<span class="ID">pylab</span>.<span class="ID">rand</span>(<span class="Number">2</span>,<span class="Number">100</span>)-.<span class="Number">5</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940_8">   8</a> </span><span class="LineAnchor" id="CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940_8"></span><span class="anchor" id="line-8-3"></span><span class="ID">ax</span>.<span class="ID">plot</span>(<span class="ID">x</span>,<span class="ID">y</span>,<span class="String">'</span><span class="String">o</span><span class="String">'</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940_9">   9</a> </span><span class="LineAnchor" id="CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940_9"></span><span class="anchor" id="line-9-3"></span><span class="ID">ax</span>.<span class="ID">set_xlim</span>(-<span class="Number">2</span>,<span class="Number">2</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940_10">  10</a> </span><span class="LineAnchor" id="CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940_10"></span><span class="anchor" id="line-10-3"></span><span class="ID">ax</span>.<span class="ID">set_ylim</span>(-<span class="Number">2</span>,<span class="Number">2</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940_11">  11</a> </span><span class="LineAnchor" id="CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940_11"></span><span class="anchor" id="line-11-3"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940_12">  12</a> </span><span class="LineAnchor" id="CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940_12"></span><span class="anchor" id="line-12-3"></span><span class="Comment"># set useblit = True on gtkagg for enhanced performance    </span></span>
<span class="line"><span class="LineNumber"><a href="#CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940_13">  13</a> </span><span class="LineAnchor" id="CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940_13"></span><span class="anchor" id="line-13-3"></span><span class="ID">cursor</span> = <span class="ID">Cursor</span>(<span class="ID">ax</span>, <span class="ID">useblit</span>=<span class="ResWord">True</span>, <span class="ID">color</span>=<span class="String">'</span><span class="String">red</span><span class="String">'</span>, <span class="ID">linewidth</span>=<span class="Number">2</span> )</span>
<span class="line"><span class="LineNumber"><a href="#CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940_14">  14</a> </span><span class="LineAnchor" id="CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940_14"></span><span class="anchor" id="line-14-2"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940_15">  15</a> </span><span class="LineAnchor" id="CA-4a44e9cf5ebdfba7818fc858d867f42a459fb940_15"></span><span class="anchor" id="line-15-2"></span><span class="ID">pylab</span>.<span class="ID">show</span>()</span>
</pre></div></div><span class="anchor" id="line-172"></span><span class="anchor" id="line-173"></span><p class="line867">
<h1 id="The_.27blit.27_animation_methods">The 'blit' animation methods</h1>
<span class="anchor" id="line-174"></span><span class="anchor" id="line-175"></span><p class="line874">As noted above, only the GTKAgg supports the methods above to to the animations of selected actors.  The following are needed <span class="anchor" id="line-176"></span><span class="anchor" id="line-177"></span><p class="line867">
<h2 id="Figure_canvas_methods">Figure canvas methods</h2>
<span class="anchor" id="line-178"></span><span class="anchor" id="line-179"></span><ul><li><p class="line891"><tt>background&nbsp;=&nbsp;canvas.copy_from_bbox(ax.bbox)</tt> - copy the region in ax.bbox into a pixel buffer and return it in an object type of your choosing.  bbox is a matplotlib BBox instance from the <a class="http" href="../../../external.html?link=http://matplotlib.sf.net/transforms.html">transforms module</a>. <tt>background</tt> is not used by the matplotlib frontend, but it stores it and passes it back to the backend in the <tt>restore_region</tt> method. You will probably want to store not only the pixel buffer but the rectangular region of the canvas from whence it came in the background object. <span class="anchor" id="line-180"></span><span class="anchor" id="line-181"></span></li><li class="gap"><p class="line891"><tt>canvas.restore_region(background)</tt> - restore the region copied above to the canvas.   <span class="anchor" id="line-182"></span><span class="anchor" id="line-183"></span></li><li class="gap"><p class="line891"><tt>canvas.blit(bbox)</tt> - transfer the pixel buffer in region bounded by bbox to the canvas. <span class="anchor" id="line-184"></span><span class="anchor" id="line-185"></span></li></ul><p class="line862">For *Agg backends, there is no need to implement the first two as Agg will do all the work (<tt>FigureCanvasAgg</tt> defines them).  Thus you only need to be able to blit the agg buffer from a selected rectangle.  One thing that might make this easier for backends using string methods to transfer the agg pixel buffer to their respective canvas is to define a <tt>to_rgba_str(bbox)</tt> method in agg.  If you are working on this and need help, please contact the <span class="anchor" id="line-186"></span><a class="http" href="../../../external.html?link=http://sourceforge.net/mailarchive/forum.php?forum_id=36187">matplotlib-devel list</a>. <span class="anchor" id="line-187"></span><span class="anchor" id="line-188"></span><p class="line874">Once all/most of the backends have implemented these methods, the matplotlib front end can do all the work of managing the background/restore/blit opertations, and userland animated code can look like <span class="anchor" id="line-189"></span><span class="anchor" id="line-190"></span><p class="line867"><span class="anchor" id="line-191"></span><span class="anchor" id="line-192"></span><span class="anchor" id="line-193"></span><span class="anchor" id="line-194"></span><span class="anchor" id="line-195"></span><span class="anchor" id="line-196"></span><span class="anchor" id="line-1-17"></span><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-4e9819ef8d9df409b92e632dcdcfc50f6f43f12d\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-4e9819ef8d9df409b92e632dcdcfc50f6f43f12d" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-4e9819ef8d9df409b92e632dcdcfc50f6f43f12d_1">   1</a> </span><span class="LineAnchor" id="CA-4e9819ef8d9df409b92e632dcdcfc50f6f43f12d_1"></span><span class="anchor" id="line-1-18"></span><span class="ID">line</span>, = <span class="ID">plot</span>(<span class="ID">something</span>, <span class="ID">animated</span>=<span class="ResWord">True</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-4e9819ef8d9df409b92e632dcdcfc50f6f43f12d_2">   2</a> </span><span class="LineAnchor" id="CA-4e9819ef8d9df409b92e632dcdcfc50f6f43f12d_2"></span><span class="anchor" id="line-2-8"></span><span class="ID">draw</span>()   </span>
<span class="line"><span class="LineNumber"><a href="#CA-4e9819ef8d9df409b92e632dcdcfc50f6f43f12d_3">   3</a> </span><span class="LineAnchor" id="CA-4e9819ef8d9df409b92e632dcdcfc50f6f43f12d_3"></span><span class="anchor" id="line-3-7"></span><span class="ResWord">def</span> <span class="ID">callback</span>(*<span class="ID">args</span>):</span>
<span class="line"><span class="LineNumber"><a href="#CA-4e9819ef8d9df409b92e632dcdcfc50f6f43f12d_4">   4</a> </span><span class="LineAnchor" id="CA-4e9819ef8d9df409b92e632dcdcfc50f6f43f12d_4"></span><span class="anchor" id="line-4-7"></span>    <span class="ID">line</span>.<span class="ID">set_ydata</span>(<span class="ID">somedata</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-4e9819ef8d9df409b92e632dcdcfc50f6f43f12d_5">   5</a> </span><span class="LineAnchor" id="CA-4e9819ef8d9df409b92e632dcdcfc50f6f43f12d_5"></span><span class="anchor" id="line-5-7"></span>    <span class="ID">ax</span>.<span class="ID">draw_animated</span>()</span>
</pre></div></div><span class="anchor" id="line-197"></span><span class="anchor" id="line-198"></span><p class="line862">and the rest will happen automagically.  Since some backends <strong>do not</strong> currently implement  <span class="anchor" id="line-199"></span>the required methods, I am making them available to the users to manage themselves but <span class="anchor" id="line-200"></span>am not assuming them in the axes drawing code. <span class="anchor" id="line-201"></span><span class="anchor" id="line-202"></span><p class="line867"><hr /><p class="line874"> <span class="anchor" id="line-203"></span><a href="../../CategoryCookbookMatplotlib.html">CategoryCookbookMatplotlib</a> <span class="anchor" id="line-204"></span><span class="anchor" id="bottom"></span></div>
<div id="pagebottom"></div>
</div>


<div id="footer">
<ul class="editbar"><li class="toggleCommentsButton" style="display:none;"><a href="#" class="nbcomment" onClick="toggleComments();return false;">Comments</a></li><li><a class="nbattachments" href="Animations37dc.html?action=AttachFile" rel="nofollow">Attachments</a></li><li>
<form class="actionsmenu" method="GET" action="../../../external.html?link=http://localhost:8080/Cookbook/Matplotlib/Animations">
<div>
    <label>More Actions:</label>
    <select name="action"
        onchange="if ((this.selectedIndex != 0) &&
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="RenamePage" disabled class="disabled">Rename Page</option>
<option value="DeletePage" disabled class="disabled">Delete Page</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Subscribe User</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Remove Spam</option>
<option value="show" disabled class="disabled">Revert to this revision</option>
    </select>
    <input type="submit" value="Do">
    
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('More Actions:');
//-->
</script>
</form>
</li></ul>

<ul id="credits">
<li><a href="../../../external.html?link=http://moinmo.in/" title="This site uses the MoinMoin Wiki software.">MoinMoin Powered</a></li><li><a href="../../../external.html?link=http://moinmo.in/Python" title="MoinMoin is written in Python.">Python Powered</a></li><li><a href="../../../external.html?link=http://moinmo.in/GPL" title="MoinMoin is GPL licensed.">GPL licensed</a></li><li><a href="../../../external.html?link=http://validator.w3.org/check?uri=referer" title="Click here to validate this page.">Valid HTML 4.01</a></li>
</ul>


</div>
</body>

<!-- Mirrored from localhost:8080/Cookbook/Matplotlib/Animations?action=recoverpass by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 29 Oct 2015 23:19:04 GMT -->
</html>

