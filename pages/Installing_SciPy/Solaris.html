<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>

<!-- Mirrored from localhost:8080/Installing_SciPy/Solaris by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 29 Oct 2015 20:26:28 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="edit_on_doubleclick" content="/">
<meta name="robots" content="index,nofollow">

<title>Installing_SciPy/Solaris - SciPy wiki dump</title>
<script type="text/javascript" src="../moin_static197/common/js/common.js"></script>

<script type="text/javascript">
<!--
var search_hint = "Search";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../moin_static197/modern/css/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="../moin_static197/modern/css/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="../moin_static197/modern/css/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="../moin_static197/modern/css/projection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="/moin_static197/modern/css/msie.css">
<![endif]-->


<link rel="alternate" title="SciPy: Installing_SciPy/Solaris" href="../../external.html?link=http://localhost:8080/Installing_SciPy/Solaris?diffs=1&amp;show_att=1&amp;action=rss_rc&amp;unique=0&amp;page=Installing_SciPy%2FSolaris&amp;ddiffs=1" type="application/rss+xml">


<link rel="Start" href="../AllPages.html">
<link rel="Alternate" title="Wiki Markup" href="../../external.html?link=http://localhost:8080/Installing_SciPy/Solaris?action=raw">
<link rel="Alternate" media="print" title="Print View" href="../../external.html?link=http://localhost:8080/Installing_SciPy/Solaris?action=print">
<link rel="Up" href="../Installing_SciPy.html">
<link rel="Search" href="../FindPage.html">
<link rel="Index" href="../TitleIndex.html">
<link rel="Glossary" href="../WordIndex.html">
<link rel="Help" href="../HelpOnFormatting.html">
</head>

<body  lang="en" dir="ltr"><div style="background: white; padding:2em;">This is an archival dump of old wiki content --- see <a href="http://scipy.org/">scipy.org</a> for current material</div>

<div id="header">


<form id="searchform" method="get" action="../../external.html?link=http://localhost:8080/Installing_SciPy/Solaris">
<div>
<input type="hidden" name="action" value="fullsearch">
<input type="hidden" name="context" value="180">
<label for="searchinput">Search:</label>
<input id="searchinput" type="text" name="value" value="" size="20"
    onfocus="searchFocus(this)" onblur="searchBlur(this)"
    onkeyup="searchChange(this)" onchange="searchChange(this)" alt="Search">
<input id="titlesearch" name="titlesearch" type="submit"
    value="Titles" alt="Search Titles">
<input id="fullsearch" name="fullsearch" type="submit"
    value="Text" alt="Search Full Text">
</div>
</form>
<script type="text/javascript">
<!--// Initialize search form
var f = document.getElementById('searchform');
f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
searchChange(e);
searchBlur(e);
//-->
</script>

<ul id="username"><li><a href="Solaris456e.html?action=login" id="login" rel="nofollow">Login</a></li></ul>
<div id="locationline">
<div id="interwiki"><span><a href="../AllPages.html" rel="nofollow">SciPy</a></span></div>

<ul id="pagelocation">
<li><a href="../Installing_SciPy.html">Installing_SciPy</a></li><li><a class="backlink" href="../AllPages099b.html?action=fullsearch&amp;context=180&amp;value=linkto%3A%22Installing_SciPy%2FSolaris%22" rel="nofollow" title="Click to do a full-text search for this title">Solaris</a></li>
</ul>

</div>


<ul id="navibar">
<li class="wikilink"><a href="../RecentChanges.html">RecentChanges</a></li><li class="wikilink"><a class="nonexistent" href="../FindPage.html">FindPage</a></li><li class="wikilink"><a class="nonexistent" href="../HelpContents.html">HelpContents</a></li><li class="current"><a href="Solaris.html">Installing_SciPy/Solaris</a></li>
</ul>

<div id="pageline"><hr style="display:none;"></div>

<ul class="editbar"><li class="toggleCommentsButton" style="display:none;"><a href="#" class="nbcomment" onClick="toggleComments();return false;">Comments</a></li><li><a class="nbattachments" href="Solaris37dc.html?action=AttachFile" rel="nofollow">Attachments</a></li><li>
<form class="actionsmenu" method="GET" action="../../external.html?link=http://localhost:8080/Installing_SciPy/Solaris">
<div>
    <label>More Actions:</label>
    <select name="action"
        onchange="if ((this.selectedIndex != 0) &&
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="RenamePage" disabled class="disabled">Rename Page</option>
<option value="DeletePage" disabled class="disabled">Delete Page</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Subscribe User</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Remove Spam</option>
<option value="show" disabled class="disabled">Revert to this revision</option>
    </select>
    <input type="submit" value="Do">
    
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('More Actions:');
//-->
</script>
</form>
</li></ul>

</div>

<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><p class="line874">These instructions describe the experience of one user, posted to the mailing list on 24 Aug 2010, on how to build numpy 1.4.1 and scipy 0.8.0 on Solaris 10 x86 and sparc, update 7 and 5 respectively.  Same results on x86 update 8 with current recommended patches.   <span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><p class="line874">All machines built with SUNWCprog metacluster (e.g. the Solaris developer environment), and Sun Studio 12 update 1 (unpatched original release) at /opt/sunstudio12.1 (the default location for this release).  The default system /usr/bin/python (from Sun) is 2.4.4.  I'm willing to avoid building BLAS / LAPACK if I can avoid doing that, and the sunmath / sunperf libs bundled with Sun Studio work.  Details: <span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><p class="line867">
<h2 id="Build_environment">Build environment</h2>
<span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span><p class="line874">site.cfg (for both numpy and scipy) says: <span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span><span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span><pre><span class="anchor" id="line-1"></span> [DEFAULT]
<span class="anchor" id="line-2"></span> library_dirs = /opt/sunstudio12.1/lib
<span class="anchor" id="line-3"></span> [blas_opt]
<span class="anchor" id="line-4"></span> libraries = sunperf
<span class="anchor" id="line-5"></span> [lapack_opt]
<span class="anchor" id="line-6"></span> libraries = sunmath</pre><span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span><p class="line867">
<h2 id="Shell_environment">Shell environment</h2>
<span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span><p class="line874">The relevant fraction of the shell environment for both is: <span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span><span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span><span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span><pre><span class="anchor" id="line-1-1"></span> PATH=/opt/sunstudio12.1/bin:/usr/ccs/bin:/usr/bin:/usr/sfw/bin:/usr/sbin; export PATH
<span class="anchor" id="line-2-1"></span> ATLAS=None; export ATLAS
<span class="anchor" id="line-3-1"></span> BLAS=/opt/sunstudio12.1/lib/libsunperf.so; export BLAS
<span class="anchor" id="line-4-1"></span> LAPACK=/opt/sunstudio12.1/lib/libsunmath.so; export LAPACK</pre><span class="anchor" id="line-26"></span><p class="line862">pyCC finds the compilers by their inclusion in PATH.  <a class="nonexistent" href="../SunStudio.html">SunStudio</a> was installed with '--create-symlinks', creating links in /usr/bin; that may have helped. <span class="anchor" id="line-27"></span><span class="anchor" id="line-28"></span><p class="line874">CC,CXX,CFLAGS and friends are not set. <span class="anchor" id="line-29"></span><span class="anchor" id="line-30"></span><p class="line874">For scipy, LDFLAGS='-lCrun' was added to the environment to get resolve run-time linker errors produced scipy.test() (discussed below). <span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span><p class="line874">crle is set to installation default, no modifications present. LD_LIBRARY_PATH is unset for the build. <span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span><p class="line867">
<h2 id="Building">Building</h2>
<span class="anchor" id="line-35"></span><span class="anchor" id="line-36"></span><p class="line874">numpy 1.4.1 builds with the usual warnings about mismatched pointer declarations from system headers and code not reached. <span class="anchor" id="line-37"></span><span class="anchor" id="line-38"></span><p class="line874">Running the tests with <span class="anchor" id="line-39"></span><tt>python&nbsp;-c&nbsp;&quot;import&nbsp;numpy;numpy.test()&quot;</tt> <span class="anchor" id="line-40"></span>fails with a complaint that the default nose is too old.  nose 0.11.x does not work, nose 0.10.(3,4) worked, no errors from numpy.test().  (All modules were packaged to permit clean re-installation, and as a final step all was built / installed on a machine that had not yet seen scipy.) <span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span><p class="line874">Building scipy 0.8.0 out of the box ends with: <span class="anchor" id="line-43"></span><span class="anchor" id="line-44"></span><span class="anchor" id="line-45"></span><span class="anchor" id="line-46"></span><span class="anchor" id="line-47"></span><span class="anchor" id="line-48"></span><span class="anchor" id="line-49"></span><span class="anchor" id="line-50"></span><span class="anchor" id="line-51"></span><span class="anchor" id="line-52"></span><pre><span class="anchor" id="line-1-2"></span> scipy/sparse/linalg/eigen/arpack/ARPACK/SRC/zneupd.f:
<span class="anchor" id="line-2-2"></span>       zneupd:
<span class="anchor" id="line-3-2"></span> f90: Internal Error, code=fw-interface-cexp-277, last src=scipy/sparse/linalg/eigen/arpack/ARPACK/SRC/zneupd.f:673
<span class="anchor" id="line-4-2"></span> f90: Warning: The option -xcode=pic32 has no effect on x86
<span class="anchor" id="line-5-1"></span> scipy/sparse/linalg/eigen/arpack/ARPACK/SRC/zneupd.f:
<span class="anchor" id="line-6-1"></span>       zneupd:
<span class="anchor" id="line-7"></span> f90: Internal Error, code=fw-interface-cexp-277, last src=scipy/sparse/linalg/eigen/arpack/ARPACK/SRC/zneupd.f:673
<span class="anchor" id="line-8"></span> error: Command &quot;/opt/sunstudio12.1/bin/f90 -ftrap=%none -f77 -xcode=pic32 -Iscipy/sparse/linalg/eigen/arpack/ARPACK/SRC -I/usr/lib/python2.4/site-packages/numpy/core/include -c -c scipy/sparse/linalg/eigen/arpack/ARPACK/SRC/zneupd.f -o build/temp.solaris-2.10-i86pc-2.4/scipy/sparse/linalg/eigen/arpack/ARPACK/SRC/zneupd.o&quot; failed with exit status 1</pre><span class="anchor" id="line-53"></span><p class="line862">This is a <a class="nonexistent" href="../SunStudio.html">SunStudio</a> problem fixed by installing patches: <span class="anchor" id="line-54"></span><span class="anchor" id="line-55"></span><p class="line874">sparc: 128231-05  128232-03  141854-01  141860-03 <span class="anchor" id="line-56"></span><span class="anchor" id="line-57"></span><p class="line874">i386: 141852-06  141853-03  141855-01  141858-06 <span class="anchor" id="line-58"></span><span class="anchor" id="line-59"></span><p class="line874">There is a gcc compiler directive (-Wall) in scipy/ndimage/setup.py that must be removed for the compiler to succeed. <span class="anchor" id="line-60"></span><span class="anchor" id="line-61"></span><p class="line874">Without LDFLAGS=lCrun, scipy.test() records 6 errors against scipy/sparse/sparsetools/_csr.so: <span class="anchor" id="line-62"></span><span class="anchor" id="line-63"></span><span class="anchor" id="line-64"></span><pre><span class="anchor" id="line-1-3"></span> ImportError: ld.so.1: python2.4: fatal: relocation error: file /usr/lib/python2.4/site-packages/scipy/sparse/sparsetools/_csr.so: symbol __1c2k6Fpv0_v_: referenced symbol not found</pre><span class="anchor" id="line-65"></span><p class="line874">The missing mangled C++ symbol is in /usr/lib/libCrun.so.1.  It's not clear to me why the linker didn't pick it up, but moving on ... <span class="anchor" id="line-66"></span><span class="anchor" id="line-67"></span><p class="line874">There are 3 python assertion failures (not detailed here). <span class="anchor" id="line-68"></span><span class="anchor" id="line-69"></span><p class="line874">Building scipy with LDFLAGS=-lCrun results in an abend of scipy.test() evidently originating in scipy/io/tests/test_netcdf.py (line 104) at test_read_write_sio.  After running our scipy code against the resulting scipy, we concluded that this was either an isolated error or a problem on the test suite in our environment. <span class="anchor" id="line-70"></span><span class="anchor" id="line-71"></span><p class="line874">All done. <span class="anchor" id="line-72"></span><span class="anchor" id="bottom"></span></div><p id="pageinfo" class="info" lang="en" dir="ltr">SciPy: Installing_SciPy/Solaris  (last edited 2015-10-24 17:48:25 by <span title="">anonymous</span>)</p>

<div id="pagebottom"></div>
</div>


<div id="footer">
<ul class="editbar"><li class="toggleCommentsButton" style="display:none;"><a href="#" class="nbcomment" onClick="toggleComments();return false;">Comments</a></li><li><a class="nbattachments" href="Solaris37dc.html?action=AttachFile" rel="nofollow">Attachments</a></li><li>
<form class="actionsmenu" method="GET" action="../../external.html?link=http://localhost:8080/Installing_SciPy/Solaris">
<div>
    <label>More Actions:</label>
    <select name="action"
        onchange="if ((this.selectedIndex != 0) &&
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="RenamePage" disabled class="disabled">Rename Page</option>
<option value="DeletePage" disabled class="disabled">Delete Page</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Subscribe User</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Remove Spam</option>
<option value="show" disabled class="disabled">Revert to this revision</option>
    </select>
    <input type="submit" value="Do">
    
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('More Actions:');
//-->
</script>
</form>
</li></ul>

<ul id="credits">
<li><a href="../../external.html?link=http://moinmo.in/" title="This site uses the MoinMoin Wiki software.">MoinMoin Powered</a></li><li><a href="../../external.html?link=http://moinmo.in/Python" title="MoinMoin is written in Python.">Python Powered</a></li><li><a href="../../external.html?link=http://moinmo.in/GPL" title="MoinMoin is GPL licensed.">GPL licensed</a></li><li><a href="../../external.html?link=http://validator.w3.org/check?uri=referer" title="Click here to validate this page.">Valid HTML 4.01</a></li>
</ul>


</div>
</body>

<!-- Mirrored from localhost:8080/Installing_SciPy/Solaris by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 29 Oct 2015 20:26:31 GMT -->
</html>

