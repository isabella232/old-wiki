<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>

<!-- Mirrored from localhost:8080/BaseArray/CodeDescription by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 29 Oct 2015 20:05:01 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="edit_on_doubleclick" content="/">
<meta name="robots" content="index,nofollow">

<title>BaseArray/CodeDescription - SciPy wiki dump</title>
<script type="text/javascript" src="../moin_static197/common/js/common.js"></script>

<script type="text/javascript">
<!--
var search_hint = "Search";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../moin_static197/modern/css/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="../moin_static197/modern/css/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="../moin_static197/modern/css/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="../moin_static197/modern/css/projection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="/moin_static197/modern/css/msie.css">
<![endif]-->


<link rel="alternate" title="SciPy: BaseArray/CodeDescription" href="../../external.html?link=http://localhost:8080/BaseArray/CodeDescription?diffs=1&amp;show_att=1&amp;action=rss_rc&amp;unique=0&amp;page=BaseArray%2FCodeDescription&amp;ddiffs=1" type="application/rss+xml">


<link rel="Start" href="../AllPages.html">
<link rel="Alternate" title="Wiki Markup" href="../../external.html?link=http://localhost:8080/BaseArray/CodeDescription?action=raw">
<link rel="Alternate" media="print" title="Print View" href="../../external.html?link=http://localhost:8080/BaseArray/CodeDescription?action=print">
<link rel="Search" href="../FindPage.html">
<link rel="Index" href="../TitleIndex.html">
<link rel="Glossary" href="../WordIndex.html">
<link rel="Help" href="../HelpOnFormatting.html">
</head>

<body  lang="en" dir="ltr"><div style="background: white; padding:2em;">This is an archival dump of old wiki content --- see <a href="http://scipy.org/">scipy.org</a> for current material</div>

<div id="header">


<form id="searchform" method="get" action="../../external.html?link=http://localhost:8080/BaseArray/CodeDescription">
<div>
<input type="hidden" name="action" value="fullsearch">
<input type="hidden" name="context" value="180">
<label for="searchinput">Search:</label>
<input id="searchinput" type="text" name="value" value="" size="20"
    onfocus="searchFocus(this)" onblur="searchBlur(this)"
    onkeyup="searchChange(this)" onchange="searchChange(this)" alt="Search">
<input id="titlesearch" name="titlesearch" type="submit"
    value="Titles" alt="Search Titles">
<input id="fullsearch" name="fullsearch" type="submit"
    value="Text" alt="Search Full Text">
</div>
</form>
<script type="text/javascript">
<!--// Initialize search form
var f = document.getElementById('searchform');
f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
searchChange(e);
searchBlur(e);
//-->
</script>

<ul id="username"><li><a href="CodeDescription456e.html?action=login" id="login" rel="nofollow">Login</a></li></ul>
<div id="locationline">
<div id="interwiki"><span><a href="../AllPages.html" rel="nofollow">SciPy</a></span></div>

<ul id="pagelocation">
<li><a class="nonexistent" href="../BaseArray.html">BaseArray</a></li><li><a class="backlink" href="../AllPages6807.html?action=fullsearch&amp;context=180&amp;value=linkto%3A%22BaseArray%2FCodeDescription%22" rel="nofollow" title="Click to do a full-text search for this title">CodeDescription</a></li>
</ul>

</div>


<ul id="navibar">
<li class="wikilink"><a href="../RecentChanges.html">RecentChanges</a></li><li class="wikilink"><a class="nonexistent" href="../FindPage.html">FindPage</a></li><li class="wikilink"><a class="nonexistent" href="../HelpContents.html">HelpContents</a></li><li class="current"><a href="CodeDescription.html">BaseArray/CodeDescription</a></li>
</ul>

<div id="pageline"><hr style="display:none;"></div>

<ul class="editbar"><li class="toggleCommentsButton" style="display:none;"><a href="#" class="nbcomment" onClick="toggleComments();return false;">Comments</a></li><li><a class="nbattachments" href="CodeDescription37dc.html?action=AttachFile" rel="nofollow">Attachments</a></li><li>
<form class="actionsmenu" method="GET" action="../../external.html?link=http://localhost:8080/BaseArray/CodeDescription">
<div>
    <label>More Actions:</label>
    <select name="action"
        onchange="if ((this.selectedIndex != 0) &&
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="RenamePage" disabled class="disabled">Rename Page</option>
<option value="DeletePage" disabled class="disabled">Delete Page</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Subscribe User</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Remove Spam</option>
<option value="show" disabled class="disabled">Revert to this revision</option>
    </select>
    <input type="submit" value="Do">
    
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('More Actions:');
//-->
</script>
</form>
</li></ul>

</div>

<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><p class="line874">The proposed basearray type does not have a fully-filled type-object structure. In other words, basearray is above all a place-holder and base-type, of which other, more capable array objects can be subtypes of. Besides serving as a base type, the object exports and consumes the array interface. <span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><p class="line874">Alongside basearray and datatype (a descriptor of the type an array carries), an array iterator type is defined to facilitate some procedures. There are also two auxialliary structures and a number of C-API functions. <span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><p class="line862">Ultimately, there are two files to be added: <a class="http" href="../../external.html?link=http://svn.scipy.org/svn/PEP/basearray.c">basearray.c</a> and <a class="http" href="../../external.html?link=http://svn.scipy.org/svn/PEP/basearray.h">basearray.h</a>. <span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span><p class="line867">
<h2 id="C_structures_defined">C structures defined</h2>
<span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span><p class="line867">
<h3 id="PyBaseArrayObject">PyBaseArrayObject</h3>
<span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><div><table><tbody><tr>  <td><p class="line862"> void *data;                 </td>
  <td><p class="line862"> Pointer to raw data buffer. </td>
</tr>
<tr>  <td><span class="anchor" id="line-12"></span><p class="line862"> int ndim;                   </td>
  <td><p class="line862"> Number of dimensions. </td>
</tr>
<tr>  <td><span class="anchor" id="line-13"></span><p class="line862"> intp *dimensions;           </td>
  <td><p class="line862"> Size in each dimension. </td>
</tr>
<tr>  <td><span class="anchor" id="line-14"></span><p class="line862"> intp *strides;              </td>
  <td><p class="line862"> Bytes to jump to get to the next element in each dimension. </td>
</tr>
<tr>  <td><span class="anchor" id="line-15"></span><p class="line862"> <a class="nonexistent" href="../PyDataTypeObject-2.html">PyDataTypeObject</a> *datatype; </td>
  <td><p class="line862"> Pointer to data type object describing the data. </td>
</tr>
<tr>  <td><span class="anchor" id="line-16"></span><p class="line862"> int flags;                  </td>
  <td><p class="line862"> Flags describing the data buffer </td>
</tr>
<tr>  <td><span class="anchor" id="line-17"></span><p class="line862"> <a class="nonexistent" href="../PyObject.html">PyObject</a> *base;             </td>
  <td><p class="line862"> This object should be decref'd upon deletion of the array. For creation from a buffer object it points to an object that should be decref'd upon deletion. </td>
</tr>
<tr>  <td><span class="anchor" id="line-18"></span><p class="line862"> <a class="nonexistent" href="../PyObject.html">PyObject</a> *weakreflist;      </td>
  <td><p class="line862"> For weakreferences. </td>
</tr>
</tbody></table></div><span class="anchor" id="line-19"></span><span class="anchor" id="line-20"></span><p class="line874">The flags variable is the bit-wise OR of: <span class="anchor" id="line-21"></span><ul><li style="list-style-type:none">CONTIGUOUS - set if array is c-style contiguous in memory, with the last dimension varying the fastest. <span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span>FORTRAN - set if array is fortran-style contiguous in memory, with the first dimension varying the fastest.  <span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span>OWN_DATA - set if this array owns the data buffer and should de-allocate it when the array is deallocated. <span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span>WRITEABLE - the memory can be written to.  <span class="anchor" id="line-28"></span><span class="anchor" id="line-29"></span>ALIGNED - the memory (for each stride) is aligned properly for the type. <span class="anchor" id="line-30"></span><span class="anchor" id="line-31"></span></li></ul><p class="line867">
<h3 id="PyDataTypeObject">PyDataTypeObject</h3>
<span class="anchor" id="line-32"></span><span class="anchor" id="line-33"></span><p class="line874">Describes the type of data the array carries. There are instances of this object for a fixed set of built-in Python types. <span class="anchor" id="line-34"></span><span class="anchor" id="line-35"></span><div><table><tbody><tr>  <td><p class="line862"> <a class="nonexistent" href="../PyTypeObject.html">PyTypeObject</a> *typeobj   </td>
  <td><p class="line862"> A Python &quot;scalar&quot; type corresonding to the array elements. </td>
</tr>
<tr>  <td><span class="anchor" id="line-36"></span><p class="line862"> char kind;              </td>
  <td><p class="line862"> A character representing the kind of data for this type. </td>
</tr>
<tr>  <td><span class="anchor" id="line-37"></span><p class="line862"> char byteorder;         </td>
  <td><p class="line862"> '&lt;' (big-endian), '&lt;' (little), '|' (not-applicable), or '=' (native). </td>
</tr>
<tr>  <td><span class="anchor" id="line-38"></span><p class="line862"> char hasobject;         </td>
  <td><p class="line862"> Non-zero only if there are object arrays in fields. </td>
</tr>
<tr>  <td><span class="anchor" id="line-39"></span><p class="line862"> int elsize;             </td>
  <td><p class="line862"> The size of each element this data-type represents, in bytes. </td>
</tr>
<tr>  <td><span class="anchor" id="line-40"></span><p class="line862"> int alignment;          </td>
  <td><p class="line862"> For a basic C-type, this holds the alignment needed for the type. For the C-type of a type this data-type object represents the alignment is offsetof(struct{char c; &lt;type&gt; v;},v). </td>
</tr>
<tr>  <td><span class="anchor" id="line-41"></span><p class="line862"> struct _arr_ *subarray; </td>
  <td><p class="line862"> Non-NULL if the type is a C-contigouus array of some other type. </td>
</tr>
<tr>  <td><span class="anchor" id="line-42"></span><p class="line862"> <a class="nonexistent" href="../PyObject.html">PyObject</a> *fields;       </td>
  <td><p class="line862"> A dictionary of names and fields - a field is a segment of a larger type that has its own data-type object. This dictionary is keyed by strings representing field names and returns a tuple of the form (data-type, offset[, label]), where data-type is the data-type object describing the type, offset is the offset in bytes to the start of that field, and label is the optional user-name of this field. The reason for having label is that the key might be a Python-acceptable name (such that could                                      be used in attribute access, for example), but label is the definer's &quot;official title&quot;, which may contain spaces, units, and so forth. </td>
</tr>
<tr>  <td><span class="anchor" id="line-43"></span><p class="line862"> <a class="nonexistent" href="../PyObject.html">PyObject</a> *names;        </td>
  <td><p class="line862"> An ordered tuple of field names or NULL if no fields are defined. </td>
</tr>
<tr>  <td><span class="anchor" id="line-44"></span><p class="line862"> <a class="nonexistent" href="../PyDataTypeFuncs.html">PyDataTypeFuncs</a> *funcs; </td>
  <td><p class="line862"> Table of functions specific for each data-type. </td>
</tr>
</tbody></table></div><span class="anchor" id="line-45"></span><span class="anchor" id="line-46"></span><p class="line867">
<h3 id="PyDataTypeFuncs">PyDataTypeFuncs</h3>
<span class="anchor" id="line-47"></span><span class="anchor" id="line-48"></span><p class="line874">Carries pointers to functions specific to a given datatype object. Currently two such function are included in this structure: <span class="anchor" id="line-49"></span><ul><li><p class="line891"><a class="nonexistent" href="../PyDataType.html">PyDataType</a>_<a class="nonexistent" href="../GetItemFunc.html">GetItemFunc</a> *getitem; <span class="anchor" id="line-50"></span></li><li><p class="line891"><a class="nonexistent" href="../PyDataType.html">PyDataType</a>_<a class="nonexistent" href="../SetItemFunc.html">SetItemFunc</a> *setitem; <span class="anchor" id="line-51"></span><span class="anchor" id="line-52"></span></li></ul><p class="line867">
<h3 id="PyBaseArrayIterObject">PyBaseArrayIterObject</h3>
<span class="anchor" id="line-53"></span><span class="anchor" id="line-54"></span><p class="line874">This iterator structure is usefull for looping over a basearray. <span class="anchor" id="line-55"></span><span class="anchor" id="line-56"></span><div><table><tbody><tr>  <td><p class="line862"> int nd_m1;                  </td>
  <td><p class="line862"> Number of dimensions minus 1. </td>
</tr>
<tr>  <td><span class="anchor" id="line-57"></span><p class="line862"> intp index;                 </td>
  <td><p class="line862"> Current 1D index into the array. </td>
</tr>
<tr>  <td><span class="anchor" id="line-58"></span><p class="line862"> intp size;                  </td>
  <td><p class="line862"> Total size of the array. </td>
</tr>
<tr>  <td><span class="anchor" id="line-59"></span><p class="line862"> intp coordinates[MAX_DIMS]; </td>
  <td><p class="line862"> N-dimensional index into the array. </td>
</tr>
<tr>  <td><span class="anchor" id="line-60"></span><p class="line862"> intp dims_m1[MAX_DIMS];     </td>
  <td><p class="line862"> Size of the array minus 1 in each dimension. </td>
</tr>
<tr>  <td><span class="anchor" id="line-61"></span><p class="line862"> intp strides[MAX_DIMS];     </td>
  <td><p class="line862"> Bytes to jump to get to the next element in each dimension. </td>
</tr>
<tr>  <td><span class="anchor" id="line-62"></span><p class="line862"> intp backstrides[MAX_DIMS]; </td>
  <td><p class="line862"> Bytes to jump from the end of a dimension to its beginning. </td>
</tr>
<tr>  <td><span class="anchor" id="line-63"></span><p class="line862"> intp factors[MAX_DIMS];     </td>
  <td><p class="line862"> Shape factors, for computing an ND index from a 1D index. </td>
</tr>
<tr>  <td><span class="anchor" id="line-64"></span><p class="line862"> <a class="nonexistent" href="../PyBaseArrayObject.html">PyBaseArrayObject</a> *ao;      </td>
  <td><p class="line862"> The underlying basearray object this iterator refers to. </td>
</tr>
<tr>  <td><span class="anchor" id="line-65"></span><p class="line862"> char *dataptr;              </td>
  <td><p class="line862"> Pointer to the element indicated by this iterator. </td>
</tr>
<tr>  <td><span class="anchor" id="line-66"></span><p class="line862"> Bool contiguous;            </td>
  <td><p class="line862"> True when *ao has the CONTIGUOUS flag set. </td>
</tr>
</tbody></table></div><span class="anchor" id="line-67"></span><span class="anchor" id="line-68"></span><p class="line867">
<h3 id="PyBaseArrayDims">PyBaseArrayDims</h3>
<span class="anchor" id="line-69"></span><span class="anchor" id="line-70"></span><p class="line874">Auxiliary structure used for interpreting the shape and stride of Python objects when they are converted to useful C objects. <span class="anchor" id="line-71"></span><span class="anchor" id="line-72"></span><div><table><tbody><tr>  <td><p class="line862"> intp *ptr;    </td>
  <td><p class="line862"> Pointer to a list of intp representing array shape or strides. </td>
</tr>
<tr>  <td><span class="anchor" id="line-73"></span><p class="line862"> int len;      </td>
  <td><p class="line862"> The length of the list of integers pointed to above. </td>
</tr>
</tbody></table></div><span class="anchor" id="line-74"></span><span class="anchor" id="line-75"></span><p class="line867">
<h3 id="PyBaseArrayChunk">PyBaseArrayChunk</h3>
<span class="anchor" id="line-76"></span><span class="anchor" id="line-77"></span><p class="line874">Auxiliary structure for representing a memory segment, the equivalent of the Python buffer object. <span class="anchor" id="line-78"></span><span class="anchor" id="line-79"></span><div><table><tbody><tr>  <td><p class="line862"> <a class="nonexistent" href="../PyObject.html">PyObject</a> *base;  </td>
  <td><p class="line862"> The Python object this memory segment comes from. </td>
</tr>
<tr>  <td><span class="anchor" id="line-80"></span><p class="line862"> void *ptr;       </td>
  <td><p class="line862"> Pointer to the beginning of the memory segment. </td>
</tr>
<tr>  <td><span class="anchor" id="line-81"></span><p class="line862"> intp len;        </td>
  <td><p class="line862"> Length of the segment in bytes. </td>
</tr>
<tr>  <td><span class="anchor" id="line-82"></span><p class="line862"> int flags;       </td>
  <td><p class="line862"> Any data flags that should be used to interpret the memory. </td>
</tr>
</tbody></table></div><span class="anchor" id="line-83"></span><span class="anchor" id="bottom"></span></div><p id="pageinfo" class="info" lang="en" dir="ltr">SciPy: BaseArray/CodeDescription  (last edited 2015-10-24 17:48:27 by <span title="">anonymous</span>)</p>

<div id="pagebottom"></div>
</div>


<div id="footer">
<ul class="editbar"><li class="toggleCommentsButton" style="display:none;"><a href="#" class="nbcomment" onClick="toggleComments();return false;">Comments</a></li><li><a class="nbattachments" href="CodeDescription37dc.html?action=AttachFile" rel="nofollow">Attachments</a></li><li>
<form class="actionsmenu" method="GET" action="../../external.html?link=http://localhost:8080/BaseArray/CodeDescription">
<div>
    <label>More Actions:</label>
    <select name="action"
        onchange="if ((this.selectedIndex != 0) &&
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="RenamePage" disabled class="disabled">Rename Page</option>
<option value="DeletePage" disabled class="disabled">Delete Page</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Subscribe User</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Remove Spam</option>
<option value="show" disabled class="disabled">Revert to this revision</option>
    </select>
    <input type="submit" value="Do">
    
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('More Actions:');
//-->
</script>
</form>
</li></ul>

<ul id="credits">
<li><a href="../../external.html?link=http://moinmo.in/" title="This site uses the MoinMoin Wiki software.">MoinMoin Powered</a></li><li><a href="../../external.html?link=http://moinmo.in/Python" title="MoinMoin is written in Python.">Python Powered</a></li><li><a href="../../external.html?link=http://moinmo.in/GPL" title="MoinMoin is GPL licensed.">GPL licensed</a></li><li><a href="../../external.html?link=http://validator.w3.org/check?uri=referer" title="Click here to validate this page.">Valid HTML 4.01</a></li>
</ul>


</div>
</body>

<!-- Mirrored from localhost:8080/BaseArray/CodeDescription by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 29 Oct 2015 20:05:04 GMT -->
</html>

